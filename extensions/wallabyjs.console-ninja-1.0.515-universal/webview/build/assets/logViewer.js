var zm=Object.defineProperty;var jm=(e,t,n)=>t in e?zm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ge=(e,t,n)=>jm(e,typeof t!="symbol"?t+"":t,n);import{g as sc,c as $m,a as pn,i as qn,b as dt,r as Vc,T as Ym,v as Km,u as rt,d as lc,p as mn,j as ue,F as Xm,e as $,f as pe,t as Uc,h as Jm,k as Zm,l as Qm,m as Hc,R as ev}from"./jsx-runtime.js";var Pn={exports:{}},tv=Pn.exports,Wc;function nv(){return Wc||(Wc=1,function(e,t){(function(n,r){e.exports=r()})(tv,function(){var n=1e3,r=6e4,i=36e5,a="millisecond",s="second",o="minute",l="hour",c="day",u="week",d="month",h="quarter",f="year",g="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(b){var L=["th","st","nd","rd"],S=b%100;return"["+b+(L[(S-20)%10]||L[S]||L[0])+"]"}},m=function(b,L,S){var I=String(b);return!I||I.length>=L?b:""+Array(L+1-I.length).join(S)+b},_={s:m,z:function(b){var L=-b.utcOffset(),S=Math.abs(L),I=Math.floor(S/60),k=S%60;return(L<=0?"+":"-")+m(I,2,"0")+":"+m(k,2,"0")},m:function b(L,S){if(L.date()<S.date())return-b(S,L);var I=12*(S.year()-L.year())+(S.month()-L.month()),k=L.clone().add(I,d),D=S-k<0,F=L.clone().add(I+(D?-1:1),d);return+(-(I+(S-k)/(D?k-F:F-k))||0)},a:function(b){return b<0?Math.ceil(b)||0:Math.floor(b)},p:function(b){return{M:d,y:f,w:u,d:c,D:g,h:l,m:o,s,ms:a,Q:h}[b]||String(b||"").toLowerCase().replace(/s$/,"")},u:function(b){return b===void 0}},C="en",x={};x[C]=p;var P=function(b){return b instanceof A},R=function b(L,S,I){var k;if(!L)return C;if(typeof L=="string"){var D=L.toLowerCase();x[D]&&(k=D),S&&(x[D]=S,k=D);var F=L.split("-");if(!k&&F.length>1)return b(F[0])}else{var O=L.name;x[O]=L,k=O}return!I&&k&&(C=k),k||!I&&C},T=function(b,L){if(P(b))return b.clone();var S=typeof L=="object"?L:{};return S.date=b,S.args=arguments,new A(S)},E=_;E.l=R,E.i=P,E.w=function(b,L){return T(b,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var A=function(){function b(S){this.$L=R(S.locale,null,!0),this.parse(S)}var L=b.prototype;return L.parse=function(S){this.$d=function(I){var k=I.date,D=I.utc;if(k===null)return new Date(NaN);if(E.u(k))return new Date;if(k instanceof Date)return new Date(k);if(typeof k=="string"&&!/Z$/i.test(k)){var F=k.match(y);if(F){var O=F[2]-1||0,H=(F[7]||"0").substring(0,3);return D?new Date(Date.UTC(F[1],O,F[3]||1,F[4]||0,F[5]||0,F[6]||0,H)):new Date(F[1],O,F[3]||1,F[4]||0,F[5]||0,F[6]||0,H)}}return new Date(k)}(S),this.$x=S.x||{},this.init()},L.init=function(){var S=this.$d;this.$y=S.getFullYear(),this.$M=S.getMonth(),this.$D=S.getDate(),this.$W=S.getDay(),this.$H=S.getHours(),this.$m=S.getMinutes(),this.$s=S.getSeconds(),this.$ms=S.getMilliseconds()},L.$utils=function(){return E},L.isValid=function(){return this.$d.toString()!==v},L.isSame=function(S,I){var k=T(S);return this.startOf(I)<=k&&k<=this.endOf(I)},L.isAfter=function(S,I){return T(S)<this.startOf(I)},L.isBefore=function(S,I){return this.endOf(I)<T(S)},L.$g=function(S,I,k){return E.u(S)?this[I]:this.set(k,S)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(S,I){var k=this,D=!!E.u(I)||I,F=E.p(S),O=function(B,W){var z=E.w(k.$u?Date.UTC(k.$y,W,B):new Date(k.$y,W,B),k);return D?z:z.endOf(c)},H=function(B,W){return E.w(k.toDate()[B].apply(k.toDate("s"),(D?[0,0,0,0]:[23,59,59,999]).slice(W)),k)},j=this.$W,U=this.$M,q=this.$D,G="set"+(this.$u?"UTC":"");switch(F){case f:return D?O(1,0):O(31,11);case d:return D?O(1,U):O(0,U+1);case u:var V=this.$locale().weekStart||0,M=(j<V?j+7:j)-V;return O(D?q-M:q+(6-M),U);case c:case g:return H(G+"Hours",0);case l:return H(G+"Minutes",1);case o:return H(G+"Seconds",2);case s:return H(G+"Milliseconds",3);default:return this.clone()}},L.endOf=function(S){return this.startOf(S,!1)},L.$set=function(S,I){var k,D=E.p(S),F="set"+(this.$u?"UTC":""),O=(k={},k[c]=F+"Date",k[g]=F+"Date",k[d]=F+"Month",k[f]=F+"FullYear",k[l]=F+"Hours",k[o]=F+"Minutes",k[s]=F+"Seconds",k[a]=F+"Milliseconds",k)[D],H=D===c?this.$D+(I-this.$W):I;if(D===d||D===f){var j=this.clone().set(g,1);j.$d[O](H),j.init(),this.$d=j.set(g,Math.min(this.$D,j.daysInMonth())).$d}else O&&this.$d[O](H);return this.init(),this},L.set=function(S,I){return this.clone().$set(S,I)},L.get=function(S){return this[E.p(S)]()},L.add=function(S,I){var k,D=this;S=Number(S);var F=E.p(I),O=function(U){var q=T(D);return E.w(q.date(q.date()+Math.round(U*S)),D)};if(F===d)return this.set(d,this.$M+S);if(F===f)return this.set(f,this.$y+S);if(F===c)return O(1);if(F===u)return O(7);var H=(k={},k[o]=r,k[l]=i,k[s]=n,k)[F]||1,j=this.$d.getTime()+S*H;return E.w(j,this)},L.subtract=function(S,I){return this.add(-1*S,I)},L.format=function(S){var I=this,k=this.$locale();if(!this.isValid())return k.invalidDate||v;var D=S||"YYYY-MM-DDTHH:mm:ssZ",F=E.z(this),O=this.$H,H=this.$m,j=this.$M,U=k.weekdays,q=k.months,G=function(W,z,Y,X){return W&&(W[z]||W(I,D))||Y[z].slice(0,X)},V=function(W){return E.s(O%12||12,W,"0")},M=k.meridiem||function(W,z,Y){var X=W<12?"AM":"PM";return Y?X.toLowerCase():X},B={YY:String(this.$y).slice(-2),YYYY:this.$y,M:j+1,MM:E.s(j+1,2,"0"),MMM:G(k.monthsShort,j,q,3),MMMM:G(q,j),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:G(k.weekdaysMin,this.$W,U,2),ddd:G(k.weekdaysShort,this.$W,U,3),dddd:U[this.$W],H:String(O),HH:E.s(O,2,"0"),h:V(1),hh:V(2),a:M(O,H,!0),A:M(O,H,!1),m:String(H),mm:E.s(H,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:F};return D.replace(w,function(W,z){return z||B[W]||F.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(S,I,k){var D,F=E.p(I),O=T(S),H=(O.utcOffset()-this.utcOffset())*r,j=this-O,U=E.m(this,O);return U=(D={},D[f]=U/12,D[d]=U,D[h]=U/3,D[u]=(j-H)/6048e5,D[c]=(j-H)/864e5,D[l]=j/i,D[o]=j/r,D[s]=j/n,D)[F]||j,k?U:E.a(U)},L.daysInMonth=function(){return this.endOf(d).$D},L.$locale=function(){return x[this.$L]},L.locale=function(S,I){if(!S)return this.$L;var k=this.clone(),D=R(S,I,!0);return D&&(k.$L=D),k},L.clone=function(){return E.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},b}(),N=A.prototype;return T.prototype=N,[["$ms",a],["$s",s],["$m",o],["$H",l],["$W",c],["$M",d],["$y",f],["$D",g]].forEach(function(b){N[b[1]]=function(L){return this.$g(L,b[0],b[1])}}),T.extend=function(b,L){return b.$i||(b(L,A,T),b.$i=!0),T},T.locale=R,T.isDayjs=P,T.unix=function(b){return T(1e3*b)},T.en=x[C],T.Ls=x,T.p={},T})}(Pn)),Pn.exports}var rv=nv();const iv=sc(rv),av=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9"],kp=["terminal-ansiYellow","terminal-ansiRed","terminal-ansiCyan","terminal-ansiGreen","terminal-ansiMagenta"],Mp="activePathChanged",ov=new Map;let hr=kp.slice();for(const e of av){hr.length===0&&(hr=kp.slice());const t=hr.shift();ov.set(e,{key:e,color:t})}const Cn="sourceCodeLinkGenerated";function sv({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}function lv(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(sv(),"")}const $e={type:"linebreak",value:`
`},Np={type:"punctuation",value:","},vn={type:"punctuation",value:" "},cv={type:"punctuation",value:"["},uv={type:"punctuation",value:"]"},dv={type:"punctuation",value:"{"},hv={type:"punctuation",value:"}"},zc={type:"punctuation",value:"..."},fv={type:"punctuation",value:"(...)"},gv={type:"type",value:"λ"},pv={type:"type",value:"λ:"},mv={type:"terminator",value:""},vv={type:"terminator",value:"",collapsed:!0};function yv(e,t){var i,a;const n=se.empty(),r=Math.min(((i=e.stack)==null?void 0:i.reduce((s,o)=>o.context&&o.context.length>s?o.context.length:s,0))||0,30);return(a=e.stack)==null||a.forEach((s,o)=>{const l=s.context?$m(s.context,r):"";n.add($e),l&&n.add({type:"function",value:l,tooltip:s.context}),l.length<r&&n.add({type:"punctuation",value:" ".repeat(r-l.length)}),r>0&&n.add(vn),n.add({type:"punctuation",value:"@ "}),n.add({type:"link",value:`${pn(s.source,50)}:${s.line}:${s.column}`,stackEntry:s})}),n}class se{static empty(){return new se([],0)}static from(...t){return t?new se(t,t.reduce((n,r)=>n+fr(r),0)):se.empty()}constructor(t,n){this.tokens=t,this.lengthWithoutMultilineFormatting=n}add(...t){return t.reduce((n,r)=>{const i=r instanceof se;return n.tokens=n.tokens.concat(i?r.tokens:[r]),n.lengthWithoutMultilineFormatting+=i?r.lengthWithoutMultilineFormatting:fr(r),n},this)}removeMultilineFormatting(){const t=[];for(const n of this.tokens)if(n.type!=="indentation"){if(n.type==="linebreak"){t.push(vn);continue}t.push(n)}return this.tokens=t,this}removeLastToken(t){const n=this.tokens[this.tokens.length-1];if(n&&t(n)){const r=this.tokens.pop();r&&(this.lengthWithoutMultilineFormatting-=fr(r))}}}const _v=se.from(vn);function fr(e){var t;return e.type==="indentation"?0:((t=e.value)==null?void 0:t.length)||0}const bv=16,wv=new Map,Cv=new Map,ht=(e,t=!1)=>{const n=t?Cv:wv,r=n.get(e);if(r)return r;const i={type:"indentation",value:" ".repeat(e)};return t&&(i.collapsed=!0),n.set(e,i),i},$l=Object.freeze({maxDepth:1/0,displayPropLimit:1/0,maxLineLength:80,maxStrLength:1/0,omitTypes:!1});function Sv(e,t=$l){return Ev(e,t).tokens.map(n=>n.value).join("")}function Ev(e,t=$l){const n={...$l,...t,indentationLvl:0,currentDepth:0,linePrefixLength:0,map:{}};return{tokens:qp(e,n).tokens,map:n.map}}function qp(e,t){if(e.functionsNode)return se.empty();if(e.getter)return se.from(fv);if(e.type==="function")return e.funcName?se.from(pv,{type:"function",value:e.funcName}):se.from(gv);if(e.error)return se.from({type:"error",value:`❗${e.error}`});if(e.timeNode)return se.from({type:"timepoint",value:`⏱️ ${e.value.toFixed(2)} ms`});if(e.stackNode)return yv(e);const n=(e.type||"unknown").toLowerCase(),r=e.value!==void 0?e.value+"":"";switch(n){case"date":return Av(e);case"regexp":return se.from({type:"regexp",value:r});case"boolean":return se.from({type:"boolean",value:r});case"string":return Rv(e,t);case"number":return se.from({type:"number",value:xv(e)});case"bigint":return se.from({type:"number",value:`${e.value}n`});case"undefined":return se.from({type:"undefined",value:n});case"null":return se.from({type:"null",value:n});case"unknown":return se.from({type:"error",value:`❗${e.error?` ${e.error}`:""}`});case"symbol":return se.from({type:"class",value:r});case"status":return se.from({type:"status",value:r});case"statussuccess":return se.from({type:"statussuccess",value:r});case"statuserror":return se.from({type:"statuserror",value:r});default:if(e.value!==void 0)return se.from({type:"string",value:r});t.currentDepth++;const i=Lv(e,t);return t.currentDepth--,cc(t)>=i.lengthWithoutMultilineFormatting&&i.removeMultilineFormatting(),i}}function xv(e){return e.nan?"NaN":e.positiveInfinity?"Infinity":e.negativeInfinity?"-Infinity":e.negativeZero?"-0":e.value+""}function Lv(e,t){var g,v;const n=e.type==="array",r=n?[cv,uv]:[dv,hv];if(n&&e.length===0)return se.from(...r);const i=Tv(e),a=!t.omitTypes&&i?[{type:"type",value:i+" "}]:[];if(e.capped||t.currentDepth===t.maxDepth||i==="Promise"&&!((g=e.props)!=null&&g.length))return r.splice(1,0,zc),se.from(...a,...r);if(!e.props||!e.props.length)return se.from(...a,...r);const s=t.displayPropLimit,o=se.empty();let l=0;const c=[];t.indentationLvl+=qn,t.linePrefixLength=0;const u=cc(t);let d=0;for(var h=0;h<e.props.length&&l<s;h++){const y=e.props[h];if(y.functionsNode){c.push(...y.props||[]);continue}else if(y.getter||y.type==="function"){c.push(y);continue}const w=jc(y,t,n);if(n){const p=h===0;p&&o.add($e,ht(t.indentationLvl));const m=(v=y.props)==null?void 0:v.length;d+=w.lengthWithoutMultilineFormatting+_v.lengthWithoutMultilineFormatting,m||!p&&d>u?(d=0,w.add($e,ht(t.indentationLvl))):w.add(vn)}o.add(w),l++}if(l<s&&c.length>0){const y=c.slice(0,s-l);for(const w of y)o.add(jc(w,t,!1))}return e.props.length>s||e.cappedProps||e.cappedElements?o.add($e,ht(t.indentationLvl),zc):(n&&(o.removeLastToken(y=>y.type==="indentation"),o.removeLastToken(y=>y===$e)),o.removeLastToken(y=>y===vn),o.removeLastToken(y=>y===Np)),t.indentationLvl-=qn,se.from(...a,r[0]).add(o,$e,ht(t.indentationLvl,e.collapsed),...r.slice(1))}function cc(e){return e.maxLineLength-e.indentationLvl-e.linePrefixLength}function Tv(e){if(e.error)return;if(e.type==="array")return e.length&&e.length>5?"Array("+e.length+")":"";const t=e.type;if(!t)return;const n=t.toLowerCase();return n==="string"||n==="number"||n==="symbol"||n==="object"||n==="function"||n==="null"||n==="undefined"||n==="boolean"||n==="date"||n==="regexp"?void 0:t}function Rv(e,t){let n=(e.value||e.capped||"")+"";n.length>t.maxStrLength?n=`${n.substring(0,t.maxStrLength)}...`:typeof e.capped=="string"&&(n+=` ... (length: ${e.length||"unknown"})`);const r=lv(n).replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/'/g,"\\'"),i=r.split(`
`),a=se.empty(),s=cc(t),o=i[0].length<=s,l=ht(t.indentationLvl+2);if(t.indentationLvl>0&&!o&&a.add($e,l),r.length>bv&&i.length>1&&r.length>s)for(let c=0;c<i.length;c++){const u=c===i.length-1;a.add({type:"string",value:`'${i[c]}${u?"":"\\n"}'`}),u?a.add(e.collapsed?vv:mv):a.add({type:"operator",value:" +"},$e,l)}else a.add({type:"string",value:`'${i.join("\\n")}'`});return a}function Av(e){return se.from({type:"new",value:"new "},{type:"class",value:"Date"},{type:"punctuation",value:"("},{type:"string",value:"'"},{type:"string",value:new Date(e.value).toJSON()},{type:"string",value:"'"},{type:"punctuation",value:")"})}function jc(e,t,n){var o;let r=0;const i=n?se.empty():se.from($e,ht(t.indentationLvl)),a=((o=e.name)==null?void 0:o.toString())||"";if(!n||!Pv(a)){const l=se.from({type:"property",value:`${a}: `});i.add(l),r+=l.lengthWithoutMultilineFormatting}t.linePrefixLength=r;const s=qp(e,t);return i.add(s,Np)}function Pv(e){var t=Math.floor(Number(e));return t!==1/0&&String(t)===e&&t>=0}function Iv(e){return e.map(t=>{const n=new kv(t);return Fn(n)})}class kv{constructor(t){this.tokens=t,this.index=0}peek(){return this.tokens[this.index]}next(){const t=this.tokens[this.index];return this.index++,t}hasMore(){return this.index<this.tokens.length}}function Fn(e){var n,r,i,a,s;for(;e.hasMore();){const o=e.peek();if((o==null?void 0:o.type)==="linebreak"||(o==null?void 0:o.type)==="indentation"){e.next();continue}else break}const t=e.peek();if(!t)return{type:"undefined"};if(t.type==="error")return e.next(),{error:t.value.replace(/^❗\s*/,"")};if(t.type==="timepoint"){e.next();const o=t.value.match(/⏱️\s*([\d.]+)\s*ms/);return{timeNode:!0,value:o?parseFloat(o[1]):0}}if(t.type==="type"&&(t.value==="λ"||t.value.startsWith("λ:"))){e.next();const o={type:"function"};return t.value.startsWith("λ:")&&((n=e.peek())==null?void 0:n.type)==="function"&&(o.funcName=(r=e.next())==null?void 0:r.value),o}switch(t.type){case"boolean":return e.next(),{type:"boolean",value:t.value==="true"};case"number":{e.next();const o={type:"number"};return t.value==="NaN"?o.nan=!0:t.value==="Infinity"?o.positiveInfinity=!0:t.value==="-Infinity"?o.negativeInfinity=!0:t.value==="-0"?(o.negativeZero=!0,o.value=0):t.value.endsWith("n")?(o.type="bigint",o.value=t.value.slice(0,-1)):o.value=parseFloat(t.value),o}case"null":return e.next(),{type:"null",value:null};case"undefined":return e.next(),{type:"undefined",value:void 0};case"string":return Mv(e);case"regexp":return e.next(),{type:"regexp",value:t.value};case"class":{const o=e.next();return(o==null?void 0:o.value)==="Date"?$c(e):{type:"symbol",value:o==null?void 0:o.value}}case"new":return e.next(),((i=e.peek())==null?void 0:i.value)==="Date"?$c(e):{type:"unknown"};case"punctuation":{if(t.value==="{")return Yc(e);if(t.value==="[")return gr(e);if(t.value==="(...)")return e.next(),{getter:!0};break}case"status":return e.next(),{type:"status",value:t.value};case"statussuccess":return e.next(),{type:"statussuccess",value:t.value};case"statuserror":return e.next(),{type:"statuserror",value:t.value}}if(t.type==="type"){const o=t.value.trim();e.next();const l=o.match(/Array\((\d+)\)/);if(l){const u=gr(e);return u.length=parseInt(l[1],10),u}const c=((a=e.peek())==null?void 0:a.value)==="{"?Yc(e):((s=e.peek())==null?void 0:s.value)==="["?gr(e):{type:"unknown"};return c.type=o,c}return e.next(),{type:"unknown",value:t.value}}function Mv(e){let t="",n=!1,r;for(;e.hasMore();){const a=e.peek();if(!a)break;if(a.type==="string"){let s=a.value;s.startsWith("'")&&s.endsWith("'")&&(s=s.slice(1,-1)),t+=s;const o=s.match(/\.\.\. \(length: (\d+|unknown)\)$/);o&&(n=!0,o[1]!=="unknown"&&(r=parseInt(o[1],10))),e.next()}else if(a.type==="operator"&&a.value===" +"){e.next();continue}else if(a.type==="linebreak"||a.type==="indentation"){e.next();continue}else if(a.type==="terminator"){e.next();break}else break}t=t.replace(/\\n/g,`
`).replace(/\\t/g,"	").replace(/\\r/g,"\r").replace(/\\'/g,"'");const i={type:"string",value:t};return n&&(i.capped=!0,r!==void 0&&(i.length=r)),i}function $c(e){e.next(),e.next(),e.next();const t=e.next();let n="";return t&&t.type==="string"&&(n=t.value),e.next(),e.next(),{type:"date",value:new Date(n).getTime()}}function Yc(e){var n,r,i,a;e.next();const t={type:"object",props:[]};if(((n=e.peek())==null?void 0:n.value)==="}")return e.next(),t;if(((r=e.peek())==null?void 0:r.value)==="...")return e.next(),e.next(),t.capped=!0,t;for(;e.hasMore();){const s=e.peek();if(!s||s.type==="linebreak"||s.type==="indentation"){e.next();continue}if(s.value==="..."){for(t.props=t.props||[],t.props.push({loadActionNode:!0}),t.cappedProps=!0,e.next();e.hasMore()&&((i=e.peek())==null?void 0:i.value)!=="}";)e.next();e.next();break}if(s.value==="}"){e.next();break}if(s.type==="property"){const l=s.value.replace(/:\s*$/,"");e.next();const c=Fn(e);c.name=l,t.props||(t.props=[]),t.props.push(c),((a=e.peek())==null?void 0:a.value)===","&&e.next()}else e.next()}return t.props&&t.props.length>0&&(t.expandable=!0),t}function gr(e){var r,i,a,s,o,l,c;e.next();const t={type:"array",props:[]};if(((r=e.peek())==null?void 0:r.value)==="]")return e.next(),t.length=0,t;if(((i=e.peek())==null?void 0:i.value)==="...")return e.next(),e.next(),t.capped=!0,t;let n=0;for(;e.hasMore();){const u=e.peek();if(!u||u.type==="linebreak"||u.type==="indentation"||u.type==="punctuation"&&u.value===" "){e.next();continue}if(u.value==="..."){for(t.cappedElements=!0,t.props=t.props||[],t.props.push({loadActionNode:!0}),e.next();e.hasMore()&&((a=e.peek())==null?void 0:a.value)!=="]";)e.next();e.next();break}if(u.value==="]"){e.next();break}if(u.type==="property"){const f=u.value.replace(/:\s*$/,"");e.next();const g=Fn(e);g.name=f,t.props||(t.props=[]),t.props.push(g),n++,((s=e.peek())==null?void 0:s.value)===","&&e.next(),((o=e.peek())==null?void 0:o.value)===" "&&e.next();continue}const d=Fn(e);d.name=n.toString(),t.props||(t.props=[]),t.props.push(d),n++,((l=e.peek())==null?void 0:l.value)===","&&e.next(),((c=e.peek())==null?void 0:c.value)===" "&&e.next()}return t.props&&(t.length=n),t.props&&t.props.length>0&&(t.expandable=!0),t}const Fp="page",Nv="fullPage",Ue=class Ue{constructor(t,n){ge(this,"_expanded",!0);ge(this,"_children",[]);this._parent=t,this._element=n}static createRoot(t){const n=new Ue;return n.addChild(t),n}addChild(t){const n=new Ue(this,t);this._children.push(n),t.addEventListener(Dp,()=>{let r=this;for(;r;)r._expand(),r=r._parent}),t.addEventListener(Op,()=>{n._toggleExpansionState()}),Ue._reportPath&&(t.addEventListener("click",()=>this._reportActivePath()),t.addEventListener(Gp,()=>this._reportActivePath()))}_reportActivePath(){let t=this;if((t==null?void 0:t._element)===Ue._lastReportedActivePath[Ue._lastReportedActivePath.length-1])return;let n=[];for(;t!==void 0;)t._element&&n.unshift(t._element),t=t._parent;Ue._lastReportedActivePath=n.slice(),document.dispatchEvent(new CustomEvent(Mp,{detail:n}))}getLastChild(){return this._children[this._children.length-1]}_isLeaf(){return this._children.length===0}_expand(){this._expanded||this._toggleExpansionState()}_toggleExpansionState(){if(!this._element||this._isLeaf())return;this._element.classList.toggle("collapsed");const t=!this._expanded;this._expanded=t;for(const n of this._children)n._toggleElementAndChildElementsVisibility(t);t?this._element.removeChild(this._element.lastChild):this._element.appendChild(document.createTextNode(" ...")),document.querySelectorAll(`.${Fp}`).forEach(n=>{Array.from(n.childNodes.values()).every(r=>r.classList.contains("hidden"))?n.classList.add("hidden"):n.classList.remove("hidden")})}_toggleElementAndChildElementsVisibility(t){if(this._element&&(t?this._element.classList.remove("hidden"):this._element.classList.add("hidden"),!this._isLeaf()&&this._expanded))for(const n of this._children)n._toggleElementAndChildElementsVisibility(t)}makeExpandable(t){if(!this._element)return;const n=Array.from(this._element.childNodes.values()).reverse().find(i=>i instanceof HTMLSpanElement&&i.classList.contains("indentation"));if(n){const i=n.textContent;n.textContent="";const a=n.appendChild(document.createElement("span"));a.classList.add("expander"),a.textContent=i}else this._element.classList.add("expandable-line");t&&this._toggleExpansionState();const r=this._element;r.onclick=i=>{const a=document.getSelection(),s=(a==null?void 0:a.type)==="Range",o=this._expandableContentClicked(r,i.clientX,i.clientY);(!s&&o==="content"||o==="indentation")&&(i.preventDefault(),this._toggleExpansionState())}}_expandableContentClicked(t,n,r){var l;let i;const a=t.childNodes,s=document.createRange();for(var o=0;i=a[o],o<a.length;o++)if((i.nodeType===3||i instanceof HTMLSpanElement)&&(s.selectNodeContents(i),this._isInside(n,r,s.getBoundingClientRect())))return(l=i.classList)!=null&&l.contains("indentation")?"indentation":"content";return"none"}_isInside(t,n,r){return n>=r.top&&t<=r.right&&n<=r.bottom}};ge(Ue,"_lastReportedActivePath",[]),ge(Ue,"_reportPath",!1);let yn=Ue;class qv{constructor(t,n){ge(this,"_result");ge(this,"_currentPageElement");ge(this,"_currentLineElement");ge(this,"_currentParentLineTreeNode");ge(this,"_lineTreeNodeStack");ge(this,"_currentIndentationLevel");this._opts=t,this._api=n,this._result=document.createDocumentFragment(),this._currentPageElement=this._createPage(),this._currentLineElement=this._createLine(),this._currentParentLineTreeNode=yn.createRoot(this._currentLineElement),this._lineTreeNodeStack=[],this._currentIndentationLevel=0}addNewLine(){this._currentPageElement.appendChild(this._currentLineElement),this._currentLineElement=this._createLine(),this._currentPageElement.childNodes.length%this._opts.pageSize===0&&(this._currentPageElement.classList.add(Nv),this._result.appendChild(this._currentPageElement),this._currentPageElement=this._createPage())}addNewLineIndentation(t){const n=Math.round(t.value.length/qn);if(this._opts.renderIndentationGuides)this._addIndentationGuides(t,n);else{const r=document.createElement("span");r.textContent=t.value,this._currentLineElement.appendChild(r)}n>this._currentIndentationLevel?(this._lineTreeNodeStack.push(this._currentParentLineTreeNode),this._currentParentLineTreeNode=this._currentParentLineTreeNode.getLastChild()):n<this._currentIndentationLevel&&(this._opts.renderNodeExpansionControls&&this._currentParentLineTreeNode.makeExpandable(t.collapsed),this._currentParentLineTreeNode=this._lineTreeNodeStack.pop()),this._currentParentLineTreeNode.addChild(this._currentLineElement),this._currentIndentationLevel=n}applyExpansionForTerminator(t){this._currentIndentationLevel<1||this._opts.renderNodeExpansionControls&&this._currentParentLineTreeNode.makeExpandable(t.collapsed)}_addIndentationGuides(t,n){for(let r=0;r<n;r++){const i=document.createElement("span");i.className=t.type,i.textContent=" ".repeat(qn),this._currentLineElement.appendChild(i)}}addNodeToCurrentLine(t){const n=Vp(t,this._api);this._currentLineElement.appendChild(n)}getResult(){return this._currentLineElement.childNodes.length>0&&this._currentPageElement.appendChild(this._currentLineElement),this._currentPageElement.childNodes.length>0&&this._result.appendChild(this._currentPageElement),this._result}_createLine(){return document.createElement("p")}_createPage(){const t=document.createElement("div");return t.classList.add(Fp),t}}const Dp="ensureLineVisibilityRequested",Op="toggleLineExpansionRequested",Gp="activePathRequested",Fv=new Event(Dp),Dv=new Event(Op),Ov=new Event(Gp);function Gv(){yn._lastReportedActivePath=[]}function Bp(e,t,n,r={pageSize:100,renderIndentationGuides:!1,renderNodeExpansionControls:!1,renderBreadcrumbs:!1,renderLogEntryActions:!1,renderHighlights:!1,renderWatchView:!1,allowToMergeMultiToolLogs:!1,mergeMultiToolLogs:!1,networkLoggingAvailable:!1,networkLoggingPaused:!1}){if(yn._reportPath=r.renderBreadcrumbs,n==="preview"){const a=document.createDocumentFragment();for(const s of e)if(s.type!=="indentation"){if(s.type==="linebreak"){a.appendChild(document.createTextNode(" "));continue}a.appendChild(Vp(s,t))}return a}const i=new qv(r,t);for(const a of e){if(a.type==="linebreak"){i.addNewLine();continue}else if(a.type==="indentation"){i.addNewLineIndentation(a);continue}else if(a.type==="terminator"){i.applyExpansionForTerminator(a);continue}i.addNodeToCurrentLine(a)}return i.getResult()}function Vp(e,t){let n;if(e.type==="link"){const r=document.createElement("a");r.textContent=e.value,r.href="#";const i=e.stackEntry;i&&(r.onclick=a=>{a.preventDefault(),t.navigate(i.source,i.line,i.column)},document.dispatchEvent(new CustomEvent(Cn,{detail:{link:r,loc:{file:i.source,line:i.line}}}))),n=r}else{const r=document.createElement("span");r.className=e.type,r.textContent=e.value,n=r}return e.tooltip&&(n.title=e.tooltip),n}function Bv(e){try{return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,n,r,i)=>"#"+n+n+r+r+i+i).substring(1).match(/.{2}/g).map(t=>parseInt(t,16))}catch{return}}const Vv=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/,Uv=/^(0|[1-9][0-9]*)$/,Hv=/'([^\\']|\\')*'/;function Up(e){return e.type==="array"?`Array(${e.length!==void 0?e.length:"…"})`:e.type}function Wv(e){return e?e.match(Uv)?"["+e+"]":e.match(Vv)?"."+e:e.match(Hv)?"["+e+"]":"['"+e+"']":""}var In={exports:{}},Ct={},pr={},mr={},Kc;function te(){return Kc||(Kc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof dt<"u"?dt:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.20",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return e.Konva.angleDeg?i*t:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var i;return(i=e.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(i){e.glob.Konva=i}};const r=i=>{e.Konva[i.prototype.getClassName()]=i};e._registerNode=r,e.Konva._injectGlobal(e.Konva)}(mr)),mr}var vr={},Xc;function fe(){return Xc||(Xc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=te();class n{constructor(_=[1,0,0,1,0,0]){this.dirty=!1,this.m=_&&_.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(_){_.m[0]=this.m[0],_.m[1]=this.m[1],_.m[2]=this.m[2],_.m[3]=this.m[3],_.m[4]=this.m[4],_.m[5]=this.m[5]}point(_){const C=this.m;return{x:C[0]*_.x+C[2]*_.y+C[4],y:C[1]*_.x+C[3]*_.y+C[5]}}translate(_,C){return this.m[4]+=this.m[0]*_+this.m[2]*C,this.m[5]+=this.m[1]*_+this.m[3]*C,this}scale(_,C){return this.m[0]*=_,this.m[1]*=_,this.m[2]*=C,this.m[3]*=C,this}rotate(_){const C=Math.cos(_),x=Math.sin(_),P=this.m[0]*C+this.m[2]*x,R=this.m[1]*C+this.m[3]*x,T=this.m[0]*-x+this.m[2]*C,E=this.m[1]*-x+this.m[3]*C;return this.m[0]=P,this.m[1]=R,this.m[2]=T,this.m[3]=E,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(_,C){const x=this.m[0]+this.m[2]*C,P=this.m[1]+this.m[3]*C,R=this.m[2]+this.m[0]*_,T=this.m[3]+this.m[1]*_;return this.m[0]=x,this.m[1]=P,this.m[2]=R,this.m[3]=T,this}multiply(_){const C=this.m[0]*_.m[0]+this.m[2]*_.m[1],x=this.m[1]*_.m[0]+this.m[3]*_.m[1],P=this.m[0]*_.m[2]+this.m[2]*_.m[3],R=this.m[1]*_.m[2]+this.m[3]*_.m[3],T=this.m[0]*_.m[4]+this.m[2]*_.m[5]+this.m[4],E=this.m[1]*_.m[4]+this.m[3]*_.m[5]+this.m[5];return this.m[0]=C,this.m[1]=x,this.m[2]=P,this.m[3]=R,this.m[4]=T,this.m[5]=E,this}invert(){const _=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*_,x=-this.m[1]*_,P=-this.m[2]*_,R=this.m[0]*_,T=_*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),E=_*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=x,this.m[2]=P,this.m[3]=R,this.m[4]=T,this.m[5]=E,this}getMatrix(){return this.m}decompose(){const _=this.m[0],C=this.m[1],x=this.m[2],P=this.m[3],R=this.m[4],T=this.m[5],E=_*P-C*x,A={x:R,y:T,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(_!=0||C!=0){const N=Math.sqrt(_*_+C*C);A.rotation=C>0?Math.acos(_/N):-Math.acos(_/N),A.scaleX=N,A.scaleY=E/N,A.skewX=(_*x+C*P)/E,A.skewY=0}else if(x!=0||P!=0){const N=Math.sqrt(x*x+P*P);A.rotation=Math.PI/2-(P>0?Math.acos(-x/N):-Math.acos(x/N)),A.scaleX=E/N,A.scaleY=N,A.skewX=0,A.skewY=(_*x+C*P)/E}return A.rotation=e.Util._getRotation(A.rotation),A}}e.Transform=n;const r="[object Array]",i="[object Number]",a="[object String]",s="[object Boolean]",o=Math.PI/180,l=180/Math.PI,c="#",u="",d="0",h="Konva warning: ",f="Konva error: ",g="rgb(",v={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},y=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let w=[];const p=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(m){setTimeout(m,60)};e.Util={_isElement(m){return!!(m&&m.nodeType==1)},_isFunction(m){return!!(m&&m.constructor&&m.call&&m.apply)},_isPlainObject(m){return!!m&&m.constructor===Object},_isArray(m){return Object.prototype.toString.call(m)===r},_isNumber(m){return Object.prototype.toString.call(m)===i&&!isNaN(m)&&isFinite(m)},_isString(m){return Object.prototype.toString.call(m)===a},_isBoolean(m){return Object.prototype.toString.call(m)===s},isObject(m){return m instanceof Object},isValidSelector(m){if(typeof m!="string")return!1;const _=m[0];return _==="#"||_==="."||_===_.toUpperCase()},_sign(m){return m===0||m>0?1:-1},requestAnimFrame(m){w.push(m),w.length===1&&p(function(){const _=w;w=[],_.forEach(function(C){C()})})},createCanvasElement(){const m=document.createElement("canvas");try{m.style=m.style||{}}catch{}return m},createImageElement(){return document.createElement("img")},_isInDocument(m){for(;m=m.parentNode;)if(m==document)return!0;return!1},_urlToImage(m,_){const C=e.Util.createImageElement();C.onload=function(){_(C)},C.src=m},_rgbToHex(m,_,C){return((1<<24)+(m<<16)+(_<<8)+C).toString(16).slice(1)},_hexToRgb(m){m=m.replace(c,u);const _=parseInt(m,16);return{r:_>>16&255,g:_>>8&255,b:_&255}},getRandomColor(){let m=(Math.random()*16777215<<0).toString(16);for(;m.length<6;)m=d+m;return c+m},getRGB(m){let _;return m in v?(_=v[m],{r:_[0],g:_[1],b:_[2]}):m[0]===c?this._hexToRgb(m.substring(1)):m.substr(0,4)===g?(_=y.exec(m.replace(/ /g,"")),{r:parseInt(_[1],10),g:parseInt(_[2],10),b:parseInt(_[3],10)}):{r:0,g:0,b:0}},colorToRGBA(m){return m=m||"black",e.Util._namedColorToRBA(m)||e.Util._hex3ColorToRGBA(m)||e.Util._hex4ColorToRGBA(m)||e.Util._hex6ColorToRGBA(m)||e.Util._hex8ColorToRGBA(m)||e.Util._rgbColorToRGBA(m)||e.Util._rgbaColorToRGBA(m)||e.Util._hslColorToRGBA(m)},_namedColorToRBA(m){const _=v[m.toLowerCase()];return _?{r:_[0],g:_[1],b:_[2],a:1}:null},_rgbColorToRGBA(m){if(m.indexOf("rgb(")===0){m=m.match(/rgb\(([^)]+)\)/)[1];const _=m.split(/ *, */).map(Number);return{r:_[0],g:_[1],b:_[2],a:1}}},_rgbaColorToRGBA(m){if(m.indexOf("rgba(")===0){m=m.match(/rgba\(([^)]+)\)/)[1];const _=m.split(/ *, */).map((C,x)=>C.slice(-1)==="%"?x===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:_[0],g:_[1],b:_[2],a:_[3]}}},_hex8ColorToRGBA(m){if(m[0]==="#"&&m.length===9)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:parseInt(m.slice(7,9),16)/255}},_hex6ColorToRGBA(m){if(m[0]==="#"&&m.length===7)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:1}},_hex4ColorToRGBA(m){if(m[0]==="#"&&m.length===5)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:parseInt(m[4]+m[4],16)/255}},_hex3ColorToRGBA(m){if(m[0]==="#"&&m.length===4)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:1}},_hslColorToRGBA(m){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(m)){const[_,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(m),x=Number(C[0])/360,P=Number(C[1])/100,R=Number(C[2])/100;let T,E,A;if(P===0)return A=R*255,{r:Math.round(A),g:Math.round(A),b:Math.round(A),a:1};R<.5?T=R*(1+P):T=R+P-R*P;const N=2*R-T,b=[0,0,0];for(let L=0;L<3;L++)E=x+1/3*-(L-1),E<0&&E++,E>1&&E--,6*E<1?A=N+(T-N)*6*E:2*E<1?A=T:3*E<2?A=N+(T-N)*(2/3-E)*6:A=N,b[L]=A*255;return{r:Math.round(b[0]),g:Math.round(b[1]),b:Math.round(b[2]),a:1}}},haveIntersection(m,_){return!(_.x>m.x+m.width||_.x+_.width<m.x||_.y>m.y+m.height||_.y+_.height<m.y)},cloneObject(m){const _={};for(const C in m)this._isPlainObject(m[C])?_[C]=this.cloneObject(m[C]):this._isArray(m[C])?_[C]=this.cloneArray(m[C]):_[C]=m[C];return _},cloneArray(m){return m.slice(0)},degToRad(m){return m*o},radToDeg(m){return m*l},_degToRad(m){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(m)},_radToDeg(m){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(m)},_getRotation(m){return t.Konva.angleDeg?e.Util.radToDeg(m):m},_capitalize(m){return m.charAt(0).toUpperCase()+m.slice(1)},throw(m){throw new Error(f+m)},error(m){console.error(f+m)},warn(m){t.Konva.showWarnings&&console.warn(h+m)},each(m,_){for(const C in m)_(C,m[C])},_inRange(m,_,C){return _<=m&&m<C},_getProjectionToSegment(m,_,C,x,P,R){let T,E,A;const N=(m-C)*(m-C)+(_-x)*(_-x);if(N==0)T=m,E=_,A=(P-C)*(P-C)+(R-x)*(R-x);else{const b=((P-m)*(C-m)+(R-_)*(x-_))/N;b<0?(T=m,E=_,A=(m-P)*(m-P)+(_-R)*(_-R)):b>1?(T=C,E=x,A=(C-P)*(C-P)+(x-R)*(x-R)):(T=m+b*(C-m),E=_+b*(x-_),A=(T-P)*(T-P)+(E-R)*(E-R))}return[T,E,A]},_getProjectionToLine(m,_,C){const x=e.Util.cloneObject(m);let P=Number.MAX_VALUE;return _.forEach(function(R,T){if(!C&&T===_.length-1)return;const E=_[(T+1)%_.length],A=e.Util._getProjectionToSegment(R.x,R.y,E.x,E.y,m.x,m.y),N=A[0],b=A[1],L=A[2];L<P&&(x.x=N,x.y=b,P=L)}),x},_prepareArrayForTween(m,_,C){const x=[],P=[];if(m.length>_.length){const T=_;_=m,m=T}for(let T=0;T<m.length;T+=2)x.push({x:m[T],y:m[T+1]});for(let T=0;T<_.length;T+=2)P.push({x:_[T],y:_[T+1]});const R=[];return P.forEach(function(T){const E=e.Util._getProjectionToLine(T,x,C);R.push(E.x),R.push(E.y)}),R},_prepareToStringify(m){let _;m.visitedByCircularReferenceRemoval=!0;for(const C in m)if(m.hasOwnProperty(C)&&m[C]&&typeof m[C]=="object"){if(_=Object.getOwnPropertyDescriptor(m,C),m[C].visitedByCircularReferenceRemoval||e.Util._isElement(m[C]))if(_.configurable)delete m[C];else return null;else if(e.Util._prepareToStringify(m[C])===null)if(_.configurable)delete m[C];else return null}return delete m.visitedByCircularReferenceRemoval,m},_assign(m,_){for(const C in _)m[C]=_[C];return m},_getFirstPointerId(m){return m.touches?m.changedTouches[0].identifier:m.pointerId||999},releaseCanvas(...m){t.Konva.releaseCanvasOnDestroy&&m.forEach(_=>{_.width=0,_.height=0})},drawRoundedRectPath(m,_,C,x){let P=0,R=0,T=0,E=0;typeof x=="number"?P=R=T=E=Math.min(x,_/2,C/2):(P=Math.min(x[0]||0,_/2,C/2),R=Math.min(x[1]||0,_/2,C/2),E=Math.min(x[2]||0,_/2,C/2),T=Math.min(x[3]||0,_/2,C/2)),m.moveTo(P,0),m.lineTo(_-R,0),m.arc(_-R,R,R,Math.PI*3/2,0,!1),m.lineTo(_,C-E),m.arc(_-E,C-E,E,0,Math.PI/2,!1),m.lineTo(T,C),m.arc(T,C-T,T,Math.PI/2,Math.PI,!1),m.lineTo(0,P),m.arc(P,P,P,Math.PI,Math.PI*3/2,!1)}}}(vr)),vr}var St={},yr={},Ae={},Jc;function ae(){if(Jc)return Ae;Jc=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.RGBComponent=r,Ae.alphaComponent=i,Ae.getNumberValidator=a,Ae.getNumberOrArrayOfNumbersValidator=s,Ae.getNumberOrAutoValidator=o,Ae.getStringValidator=l,Ae.getStringOrGradientValidator=c,Ae.getFunctionValidator=u,Ae.getNumberArrayValidator=d,Ae.getBooleanValidator=h,Ae.getComponentValidator=f;const e=te(),t=fe();function n(g){return t.Util._isString(g)?'"'+g+'"':Object.prototype.toString.call(g)==="[object Number]"||t.Util._isBoolean(g)?g:Object.prototype.toString.call(g)}function r(g){return g>255?255:g<0?0:Math.round(g)}function i(g){return g>1?1:g<1e-4?1e-4:g}function a(){if(e.Konva.isUnminified)return function(g,v){return t.Util._isNumber(g)||t.Util.warn(n(g)+' is a not valid value for "'+v+'" attribute. The value should be a number.'),g}}function s(g){if(e.Konva.isUnminified)return function(v,y){let w=t.Util._isNumber(v),p=t.Util._isArray(v)&&v.length==g;return!w&&!p&&t.Util.warn(n(v)+' is a not valid value for "'+y+'" attribute. The value should be a number or Array<number>('+g+")"),v}}function o(){if(e.Konva.isUnminified)return function(g,v){var y=t.Util._isNumber(g),w=g==="auto";return y||w||t.Util.warn(n(g)+' is a not valid value for "'+v+'" attribute. The value should be a number or "auto".'),g}}function l(){if(e.Konva.isUnminified)return function(g,v){return t.Util._isString(g)||t.Util.warn(n(g)+' is a not valid value for "'+v+'" attribute. The value should be a string.'),g}}function c(){if(e.Konva.isUnminified)return function(g,v){const y=t.Util._isString(g),w=Object.prototype.toString.call(g)==="[object CanvasGradient]"||g&&g.addColorStop;return y||w||t.Util.warn(n(g)+' is a not valid value for "'+v+'" attribute. The value should be a string or a native gradient.'),g}}function u(){if(e.Konva.isUnminified)return function(g,v){return t.Util._isFunction(g)||t.Util.warn(n(g)+' is a not valid value for "'+v+'" attribute. The value should be a function.'),g}}function d(){if(e.Konva.isUnminified)return function(g,v){const y=Int8Array?Object.getPrototypeOf(Int8Array):null;return y&&g instanceof y||(t.Util._isArray(g)?g.forEach(function(w){t.Util._isNumber(w)||t.Util.warn('"'+v+'" attribute has non numeric element '+w+". Make sure that all elements are numbers.")}):t.Util.warn(n(g)+' is a not valid value for "'+v+'" attribute. The value should be a array of numbers.')),g}}function h(){if(e.Konva.isUnminified)return function(g,v){var y=g===!0||g===!1;return y||t.Util.warn(n(g)+' is a not valid value for "'+v+'" attribute. The value should be a boolean.'),g}}function f(g){if(e.Konva.isUnminified)return function(v,y){return v==null||t.Util.isObject(v)||t.Util.warn(n(v)+' is a not valid value for "'+y+'" attribute. The value should be an object with properties '+g),v}}return Ae}var Zc;function re(){return Zc||(Zc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=fe(),n=ae(),r="get",i="set";e.Factory={addGetterSetter(a,s,o,l,c){e.Factory.addGetter(a,s,o),e.Factory.addSetter(a,s,l,c),e.Factory.addOverloadedGetterSetter(a,s)},addGetter(a,s,o){var l=r+t.Util._capitalize(s);a.prototype[l]=a.prototype[l]||function(){const c=this.attrs[s];return c===void 0?o:c}},addSetter(a,s,o,l){var c=i+t.Util._capitalize(s);a.prototype[c]||e.Factory.overWriteSetter(a,s,o,l)},overWriteSetter(a,s,o,l){var c=i+t.Util._capitalize(s);a.prototype[c]=function(u){return o&&u!==void 0&&u!==null&&(u=o.call(this,u,s)),this._setAttr(s,u),l&&l.call(this),this}},addComponentsGetterSetter(a,s,o,l,c){const u=o.length,d=t.Util._capitalize,h=r+d(s),f=i+d(s);a.prototype[h]=function(){const v={};for(let y=0;y<u;y++){const w=o[y];v[w]=this.getAttr(s+d(w))}return v};const g=(0,n.getComponentValidator)(o);a.prototype[f]=function(v){const y=this.attrs[s];l&&(v=l.call(this,v,s)),g&&g.call(this,v,s);for(const w in v)v.hasOwnProperty(w)&&this._setAttr(s+d(w),v[w]);return v||o.forEach(w=>{this._setAttr(s+d(w),void 0)}),this._fireChangeEvent(s,y,v),c&&c.call(this),this},e.Factory.addOverloadedGetterSetter(a,s)},addOverloadedGetterSetter(a,s){var o=t.Util._capitalize(s),l=i+o,c=r+o;a.prototype[s]=function(){return arguments.length?(this[l](arguments[0]),this):this[c]()}},addDeprecatedGetterSetter(a,s,o,l){t.Util.error("Adding deprecated "+s);const c=r+t.Util._capitalize(s),u=s+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[c]=function(){t.Util.error(u);const d=this.attrs[s];return d===void 0?o:d},e.Factory.addSetter(a,s,l,function(){t.Util.error(u)}),e.Factory.addOverloadedGetterSetter(a,s)},backCompat(a,s){t.Util.each(s,function(o,l){const c=a.prototype[l],u=r+t.Util._capitalize(o),d=i+t.Util._capitalize(o);function h(){c.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}a.prototype[o]=h,a.prototype[u]=h,a.prototype[d]=h})},afterSetFilter(){this._filterUpToDate=!1}}}(yr)),yr}var We={},ze={},Qc;function Hp(){if(Qc)return ze;Qc=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.HitContext=ze.SceneContext=ze.Context=void 0;const e=fe(),t=te();function n(w){const p=[],m=w.length,_=e.Util;for(let C=0;C<m;C++){let x=w[C];_._isNumber(x)?x=Math.round(x*1e3)/1e3:_._isString(x)||(x=x+""),p.push(x)}return p}const r=",",i="(",a=")",s="([",o="])",l=";",c="()",u="=",d=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],h=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],f=100;let g=class{constructor(p){this.canvas=p,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(p){p.fillEnabled()&&this._fill(p)}_fill(p){}strokeShape(p){p.hasStroke()&&this._stroke(p)}_stroke(p){}fillStrokeShape(p){p.attrs.fillAfterStrokeEnabled?(this.strokeShape(p),this.fillShape(p)):(this.fillShape(p),this.strokeShape(p))}getTrace(p,m){let _=this.traceArr,C=_.length,x="",P,R,T,E;for(P=0;P<C;P++)R=_[P],T=R.method,T?(E=R.args,x+=T,p?x+=c:e.Util._isArray(E[0])?x+=s+E.join(r)+o:(m&&(E=E.map(A=>typeof A=="number"?Math.floor(A):A)),x+=i+E.join(r)+a)):(x+=R.property,p||(x+=u+R.val)),x+=l;return x}clearTrace(){this.traceArr=[]}_trace(p){let m=this.traceArr,_;m.push(p),_=m.length,_>=f&&m.shift()}reset(){const p=this.getCanvas().getPixelRatio();this.setTransform(1*p,0,0,1*p,0,0)}getCanvas(){return this.canvas}clear(p){const m=this.getCanvas();p?this.clearRect(p.x||0,p.y||0,p.width||0,p.height||0):this.clearRect(0,0,m.getWidth()/m.pixelRatio,m.getHeight()/m.pixelRatio)}_applyLineCap(p){const m=p.attrs.lineCap;m&&this.setAttr("lineCap",m)}_applyOpacity(p){const m=p.getAbsoluteOpacity();m!==1&&this.setAttr("globalAlpha",m)}_applyLineJoin(p){const m=p.attrs.lineJoin;m&&this.setAttr("lineJoin",m)}setAttr(p,m){this._context[p]=m}arc(p,m,_,C,x,P){this._context.arc(p,m,_,C,x,P)}arcTo(p,m,_,C,x){this._context.arcTo(p,m,_,C,x)}beginPath(){this._context.beginPath()}bezierCurveTo(p,m,_,C,x,P){this._context.bezierCurveTo(p,m,_,C,x,P)}clearRect(p,m,_,C){this._context.clearRect(p,m,_,C)}clip(...p){this._context.clip.apply(this._context,p)}closePath(){this._context.closePath()}createImageData(p,m){const _=arguments;if(_.length===2)return this._context.createImageData(p,m);if(_.length===1)return this._context.createImageData(p)}createLinearGradient(p,m,_,C){return this._context.createLinearGradient(p,m,_,C)}createPattern(p,m){return this._context.createPattern(p,m)}createRadialGradient(p,m,_,C,x,P){return this._context.createRadialGradient(p,m,_,C,x,P)}drawImage(p,m,_,C,x,P,R,T,E){const A=arguments,N=this._context;A.length===3?N.drawImage(p,m,_):A.length===5?N.drawImage(p,m,_,C,x):A.length===9&&N.drawImage(p,m,_,C,x,P,R,T,E)}ellipse(p,m,_,C,x,P,R,T){this._context.ellipse(p,m,_,C,x,P,R,T)}isPointInPath(p,m,_,C){return _?this._context.isPointInPath(_,p,m,C):this._context.isPointInPath(p,m,C)}fill(...p){this._context.fill.apply(this._context,p)}fillRect(p,m,_,C){this._context.fillRect(p,m,_,C)}strokeRect(p,m,_,C){this._context.strokeRect(p,m,_,C)}fillText(p,m,_,C){C?this._context.fillText(p,m,_,C):this._context.fillText(p,m,_)}measureText(p){return this._context.measureText(p)}getImageData(p,m,_,C){return this._context.getImageData(p,m,_,C)}lineTo(p,m){this._context.lineTo(p,m)}moveTo(p,m){this._context.moveTo(p,m)}rect(p,m,_,C){this._context.rect(p,m,_,C)}roundRect(p,m,_,C,x){this._context.roundRect(p,m,_,C,x)}putImageData(p,m,_){this._context.putImageData(p,m,_)}quadraticCurveTo(p,m,_,C){this._context.quadraticCurveTo(p,m,_,C)}restore(){this._context.restore()}rotate(p){this._context.rotate(p)}save(){this._context.save()}scale(p,m){this._context.scale(p,m)}setLineDash(p){this._context.setLineDash?this._context.setLineDash(p):"mozDash"in this._context?this._context.mozDash=p:"webkitLineDash"in this._context&&(this._context.webkitLineDash=p)}getLineDash(){return this._context.getLineDash()}setTransform(p,m,_,C,x,P){this._context.setTransform(p,m,_,C,x,P)}stroke(p){p?this._context.stroke(p):this._context.stroke()}strokeText(p,m,_,C){this._context.strokeText(p,m,_,C)}transform(p,m,_,C,x,P){this._context.transform(p,m,_,C,x,P)}translate(p,m){this._context.translate(p,m)}_enableTrace(){let p=this,m=d.length,_=this.setAttr,C,x;const P=function(R){let T=p[R],E;p[R]=function(){return x=n(Array.prototype.slice.call(arguments,0)),E=T.apply(p,arguments),p._trace({method:R,args:x}),E}};for(C=0;C<m;C++)P(d[C]);p.setAttr=function(){_.apply(p,arguments);const R=arguments[0];let T=arguments[1];(R==="shadowOffsetX"||R==="shadowOffsetY"||R==="shadowBlur")&&(T=T/this.canvas.getPixelRatio()),p._trace({property:R,val:T})}}_applyGlobalCompositeOperation(p){const m=p.attrs.globalCompositeOperation;!m||m==="source-over"||this.setAttr("globalCompositeOperation",m)}};ze.Context=g,h.forEach(function(w){Object.defineProperty(g.prototype,w,{get(){return this._context[w]},set(p){this._context[w]=p}})});class v extends g{constructor(p,{willReadFrequently:m=!1}={}){super(p),this._context=p._canvas.getContext("2d",{willReadFrequently:m})}_fillColor(p){const m=p.fill();this.setAttr("fillStyle",m),p._fillFunc(this)}_fillPattern(p){this.setAttr("fillStyle",p._getFillPattern()),p._fillFunc(this)}_fillLinearGradient(p){const m=p._getLinearGradient();m&&(this.setAttr("fillStyle",m),p._fillFunc(this))}_fillRadialGradient(p){const m=p._getRadialGradient();m&&(this.setAttr("fillStyle",m),p._fillFunc(this))}_fill(p){const m=p.fill(),_=p.getFillPriority();if(m&&_==="color"){this._fillColor(p);return}const C=p.getFillPatternImage();if(C&&_==="pattern"){this._fillPattern(p);return}const x=p.getFillLinearGradientColorStops();if(x&&_==="linear-gradient"){this._fillLinearGradient(p);return}const P=p.getFillRadialGradientColorStops();if(P&&_==="radial-gradient"){this._fillRadialGradient(p);return}m?this._fillColor(p):C?this._fillPattern(p):x?this._fillLinearGradient(p):P&&this._fillRadialGradient(p)}_strokeLinearGradient(p){const m=p.getStrokeLinearGradientStartPoint(),_=p.getStrokeLinearGradientEndPoint(),C=p.getStrokeLinearGradientColorStops(),x=this.createLinearGradient(m.x,m.y,_.x,_.y);if(C){for(let P=0;P<C.length;P+=2)x.addColorStop(C[P],C[P+1]);this.setAttr("strokeStyle",x)}}_stroke(p){const m=p.dash(),_=p.getStrokeScaleEnabled();if(p.hasStroke()){if(!_){this.save();const x=this.getCanvas().getPixelRatio();this.setTransform(x,0,0,x,0,0)}this._applyLineCap(p),m&&p.dashEnabled()&&(this.setLineDash(m),this.setAttr("lineDashOffset",p.dashOffset())),this.setAttr("lineWidth",p.strokeWidth()),p.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),p.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(p):this.setAttr("strokeStyle",p.stroke()),p._strokeFunc(this),_||this.restore()}}_applyShadow(p){var m,_,C;const x=(m=p.getShadowRGBA())!==null&&m!==void 0?m:"black",P=(_=p.getShadowBlur())!==null&&_!==void 0?_:5,R=(C=p.getShadowOffset())!==null&&C!==void 0?C:{x:0,y:0},T=p.getAbsoluteScale(),E=this.canvas.getPixelRatio(),A=T.x*E,N=T.y*E;this.setAttr("shadowColor",x),this.setAttr("shadowBlur",P*Math.min(Math.abs(A),Math.abs(N))),this.setAttr("shadowOffsetX",R.x*A),this.setAttr("shadowOffsetY",R.y*N)}}ze.SceneContext=v;class y extends g{constructor(p){super(p),this._context=p._canvas.getContext("2d",{willReadFrequently:!0})}_fill(p){this.save(),this.setAttr("fillStyle",p.colorKey),p._fillFuncHit(this),this.restore()}strokeShape(p){p.hasHitStroke()&&this._stroke(p)}_stroke(p){if(p.hasHitStroke()){const m=p.getStrokeScaleEnabled();if(!m){this.save();const x=this.getCanvas().getPixelRatio();this.setTransform(x,0,0,x,0,0)}this._applyLineCap(p);const _=p.hitStrokeWidth(),C=_==="auto"?p.strokeWidth():_;this.setAttr("lineWidth",C),this.setAttr("strokeStyle",p.colorKey),p._strokeFuncHit(this),m||this.restore()}}}return ze.HitContext=y,ze}var eu;function Un(){if(eu)return We;eu=1,Object.defineProperty(We,"__esModule",{value:!0}),We.HitCanvas=We.SceneCanvas=We.Canvas=void 0;const e=fe(),t=Hp(),n=te();let r;function i(){if(r)return r;const l=e.Util.createCanvasElement(),c=l.getContext("2d");return r=function(){const u=n.Konva._global.devicePixelRatio||1,d=c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1;return u/d}(),e.Util.releaseCanvas(l),r}let a=class{constructor(c){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const d=(c||{}).pixelRatio||n.Konva.pixelRatio||i();this.pixelRatio=d,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(c){const u=this.pixelRatio;this.pixelRatio=c,this.setSize(this.getWidth()/u,this.getHeight()/u)}setWidth(c){this.width=this._canvas.width=c*this.pixelRatio,this._canvas.style.width=c+"px";const u=this.pixelRatio;this.getContext()._context.scale(u,u)}setHeight(c){this.height=this._canvas.height=c*this.pixelRatio,this._canvas.style.height=c+"px";const u=this.pixelRatio;this.getContext()._context.scale(u,u)}getWidth(){return this.width}getHeight(){return this.height}setSize(c,u){this.setWidth(c||0),this.setHeight(u||0)}toDataURL(c,u){try{return this._canvas.toDataURL(c,u)}catch{try{return this._canvas.toDataURL()}catch(h){return e.Util.error("Unable to get data URL. "+h.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};We.Canvas=a;class s extends a{constructor(c={width:0,height:0,willReadFrequently:!1}){super(c),this.context=new t.SceneContext(this,{willReadFrequently:c.willReadFrequently}),this.setSize(c.width,c.height)}}We.SceneCanvas=s;class o extends a{constructor(c={width:0,height:0}){super(c),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(c.width,c.height)}}return We.HitCanvas=o,We}var _r={},tu;function uc(){return tu||(tu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=te(),n=fe();e.DD={get isDragging(){let r=!1;return e.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return e.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];e.DD._dragElements.forEach((a,s)=>{const{node:o}=a,l=o.getStage();l.setPointersPositions(r),a.pointerId===void 0&&(a.pointerId=n.Util._getFirstPointerId(r));const c=l._changedPointerPositions.find(u=>u.id===a.pointerId);if(c){if(a.dragStatus!=="dragging"){const u=o.dragDistance();if(Math.max(Math.abs(c.x-a.startPointerPos.x),Math.abs(c.y-a.startPointerPos.y))<u||(o.startDrag({evt:r}),!o.isDragging()))return}o._setDragPosition(r,a),i.push(o)}}),i.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:r},!0)})},_endDragBefore(r){const i=[];e.DD._dragElements.forEach(a=>{const{node:s}=a,o=s.getStage();if(r&&o.setPointersPositions(r),!o._changedPointerPositions.find(u=>u.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const c=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;c&&i.indexOf(c)===-1&&i.push(c)}),i.forEach(a=>{a.draw()})},_endDragAfter(r){e.DD._dragElements.forEach((i,a)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))}(_r)),_r}var nu;function me(){if(nu)return St;nu=1,Object.defineProperty(St,"__esModule",{value:!0}),St.Node=void 0;const e=fe(),t=re(),n=Un(),r=te(),i=uc(),a=ae(),s="absoluteOpacity",o="allEventListeners",l="absoluteTransform",c="absoluteScale",u="canvas",d="Change",h="children",f="konva",g="listening",v="mouseenter",y="mouseleave",w="set",p="Shape",m=" ",_="stage",C="transform",x="Stage",P="visible",R=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(m);let T=1;class E{constructor(b){this._id=T++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(b),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(b){(b===C||b===l)&&this._cache.get(b)?this._cache.get(b).dirty=!0:b?this._cache.delete(b):this._cache.clear()}_getCache(b,L){let S=this._cache.get(b);return(S===void 0||(b===C||b===l)&&S.dirty===!0)&&(S=L.call(this),this._cache.set(b,S)),S}_calculate(b,L,S){if(!this._attachedDepsListeners.get(b)){const I=L.map(k=>k+"Change.konva").join(m);this.on(I,()=>{this._clearCache(b)}),this._attachedDepsListeners.set(b,!0)}return this._getCache(b,S)}_getCanvasCache(){return this._cache.get(u)}_clearSelfAndDescendantCache(b){this._clearCache(b),b===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(u)){const{scene:b,filter:L,hit:S}=this._cache.get(u);e.Util.releaseCanvas(b,L,S),this._cache.delete(u)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(b){const L=b||{};let S={};(L.x===void 0||L.y===void 0||L.width===void 0||L.height===void 0)&&(S=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let I=Math.ceil(L.width||S.width),k=Math.ceil(L.height||S.height),D=L.pixelRatio,F=L.x===void 0?Math.floor(S.x):L.x,O=L.y===void 0?Math.floor(S.y):L.y,H=L.offset||0,j=L.drawBorder||!1,U=L.hitCanvasPixelRatio||1;if(!I||!k){e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const q=Math.abs(Math.round(S.x)-F)>.5?1:0,G=Math.abs(Math.round(S.y)-O)>.5?1:0;I+=H*2+q,k+=H*2+G,F-=H,O-=H;const V=new n.SceneCanvas({pixelRatio:D,width:I,height:k}),M=new n.SceneCanvas({pixelRatio:D,width:0,height:0,willReadFrequently:!0}),B=new n.HitCanvas({pixelRatio:U,width:I,height:k}),W=V.getContext(),z=B.getContext();return B.isCache=!0,V.isCache=!0,this._cache.delete(u),this._filterUpToDate=!1,L.imageSmoothingEnabled===!1&&(V.getContext()._context.imageSmoothingEnabled=!1,M.getContext()._context.imageSmoothingEnabled=!1),W.save(),z.save(),W.translate(-F,-O),z.translate(-F,-O),this._isUnderCache=!0,this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(c),this.drawScene(V,this),this.drawHit(B,this),this._isUnderCache=!1,W.restore(),z.restore(),j&&(W.save(),W.beginPath(),W.rect(0,0,I,k),W.closePath(),W.setAttr("strokeStyle","red"),W.setAttr("lineWidth",5),W.stroke(),W.restore()),this._cache.set(u,{scene:V,filter:M,hit:B,x:F,y:O}),this._requestDraw(),this}isCached(){return this._cache.has(u)}getClientRect(b){throw new Error('abstract "getClientRect" method call')}_transformedRect(b,L){const S=[{x:b.x,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width,y:b.y+b.height},{x:b.x,y:b.y+b.height}];let I=1/0,k=1/0,D=-1/0,F=-1/0;const O=this.getAbsoluteTransform(L);return S.forEach(function(H){const j=O.point(H);I===void 0&&(I=D=j.x,k=F=j.y),I=Math.min(I,j.x),k=Math.min(k,j.y),D=Math.max(D,j.x),F=Math.max(F,j.y)}),{x:I,y:k,width:D-I,height:F-k}}_drawCachedSceneCanvas(b){b.save(),b._applyOpacity(this),b._applyGlobalCompositeOperation(this);const L=this._getCanvasCache();b.translate(L.x,L.y);const S=this._getCachedSceneCanvas(),I=S.pixelRatio;b.drawImage(S._canvas,0,0,S.width/I,S.height/I),b.restore()}_drawCachedHitCanvas(b){const L=this._getCanvasCache(),S=L.hit;b.save(),b.translate(L.x,L.y),b.drawImage(S._canvas,0,0,S.width/S.pixelRatio,S.height/S.pixelRatio),b.restore()}_getCachedSceneCanvas(){let b=this.filters(),L=this._getCanvasCache(),S=L.scene,I=L.filter,k=I.getContext(),D,F,O,H;if(b){if(!this._filterUpToDate){const j=S.pixelRatio;I.setSize(S.width/S.pixelRatio,S.height/S.pixelRatio);try{for(D=b.length,k.clear(),k.drawImage(S._canvas,0,0,S.getWidth()/j,S.getHeight()/j),F=k.getImageData(0,0,I.getWidth(),I.getHeight()),O=0;O<D;O++){if(H=b[O],typeof H!="function"){e.Util.error("Filter should be type of function, but got "+typeof H+" instead. Please check correct filters");continue}H.call(this,F),k.putImageData(F,0,0)}}catch(U){e.Util.error("Unable to apply filter. "+U.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return I}return S}on(b,L){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);let S=b.split(m),I=S.length,k,D,F,O,H;for(k=0;k<I;k++)D=S[k],F=D.split("."),O=F[0],H=F[1]||"",this.eventListeners[O]||(this.eventListeners[O]=[]),this.eventListeners[O].push({name:H,handler:L});return this}off(b,L){let S=(b||"").split(m),I=S.length,k,D,F,O,H,j;if(this._cache&&this._cache.delete(o),!b)for(D in this.eventListeners)this._off(D);for(k=0;k<I;k++)if(F=S[k],O=F.split("."),H=O[0],j=O[1],H)this.eventListeners[H]&&this._off(H,j,L);else for(D in this.eventListeners)this._off(D,j,L);return this}dispatchEvent(b){const L={target:this,type:b.type,evt:b};return this.fire(b.type,L),this}addEventListener(b,L){return this.on(b,function(S){L.call(this,S.evt)}),this}removeEventListener(b){return this.off(b),this}_delegate(b,L,S){const I=this;this.on(b,function(k){const D=k.target.findAncestors(L,!0,I);for(let F=0;F<D.length;F++)k=e.Util.cloneObject(k),k.currentTarget=D[F],S.call(D[F],k)})}remove(){return this.isDragging()&&this.stopDrag(),i.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(P),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();const b=this.getParent();b&&b.children&&(b.children.splice(this.index,1),b._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(b){const L="get"+e.Util._capitalize(b);return e.Util._isFunction(this[L])?this[L]():this.attrs[b]}getAncestors(){let b=this.getParent(),L=[];for(;b;)L.push(b),b=b.getParent();return L}getAttrs(){return this.attrs||{}}setAttrs(b){return this._batchTransformChanges(()=>{let L,S;if(!b)return this;for(L in b)L!==h&&(S=w+e.Util._capitalize(L),e.Util._isFunction(this[S])?this[S](b[L]):this._setAttr(L,b[L]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(b){if(!this.listening())return!1;const S=this.getParent();return S&&S!==b&&this!==b?S._isListening(b):!0}isVisible(){return this._getCache(P,this._isVisible)}_isVisible(b){if(!this.visible())return!1;const S=this.getParent();return S&&S!==b&&this!==b?S._isVisible(b):!0}shouldDrawHit(b,L=!1){if(b)return this._isVisible(b)&&this._isListening(b);const S=this.getLayer();let I=!1;i.DD._dragElements.forEach(D=>{D.dragStatus==="dragging"&&(D.node.nodeType==="Stage"||D.node.getLayer()===S)&&(I=!0)});const k=!L&&!r.Konva.hitOnDragEnabled&&(I||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!k}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let b=this.getDepth(),L=this,S=0,I,k,D,F;function O(j){for(I=[],k=j.length,D=0;D<k;D++)F=j[D],S++,F.nodeType!==p&&(I=I.concat(F.getChildren().slice())),F._id===L._id&&(D=k);I.length>0&&I[0].getDepth()<=b&&O(I)}const H=this.getStage();return L.nodeType!==x&&H&&O(H.getChildren()),S}getDepth(){let b=0,L=this.parent;for(;L;)b++,L=L.parent;return b}_batchTransformChanges(b){this._batchingTransformChange=!0,b(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(C),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(b){return this._batchTransformChanges(()=>{this.x(b.x),this.y(b.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const b=this.getStage();if(!b)return null;const L=b.getPointerPosition();if(!L)return null;const S=this.getAbsoluteTransform().copy();return S.invert(),S.point(L)}getAbsolutePosition(b){let L=!1,S=this.parent;for(;S;){if(S.isCached()){L=!0;break}S=S.parent}L&&!b&&(b=!0);const I=this.getAbsoluteTransform(b).getMatrix(),k=new e.Transform,D=this.offset();return k.m=I.slice(),k.translate(D.x,D.y),k.getTranslation()}setAbsolutePosition(b){const{x:L,y:S,...I}=this._clearTransform();this.attrs.x=L,this.attrs.y=S,this._clearCache(C);const k=this._getAbsoluteTransform().copy();return k.invert(),k.translate(b.x,b.y),b={x:this.attrs.x+k.getTranslation().x,y:this.attrs.y+k.getTranslation().y},this._setTransform(I),this.setPosition({x:b.x,y:b.y}),this._clearCache(C),this._clearSelfAndDescendantCache(l),this}_setTransform(b){let L;for(L in b)this.attrs[L]=b[L]}_clearTransform(){const b={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,b}move(b){let L=b.x,S=b.y,I=this.x(),k=this.y();return L!==void 0&&(I+=L),S!==void 0&&(k+=S),this.setPosition({x:I,y:k}),this}_eachAncestorReverse(b,L){let S=[],I=this.getParent(),k,D;if(!(L&&L._id===this._id)){for(S.unshift(this);I&&(!L||I._id!==L._id);)S.unshift(I),I=I.parent;for(k=S.length,D=0;D<k;D++)b(S[D])}}rotate(b){return this.rotation(this.rotation()+b),this}moveToTop(){if(!this.parent)return e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const b=this.index,L=this.parent.getChildren().length;return b<L-1?(this.parent.children.splice(b,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return e.Util.warn("Node has no parent. moveUp function is ignored."),!1;const b=this.index,L=this.parent.getChildren().length;return b<L-1?(this.parent.children.splice(b,1),this.parent.children.splice(b+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return e.Util.warn("Node has no parent. moveDown function is ignored."),!1;const b=this.index;return b>0?(this.parent.children.splice(b,1),this.parent.children.splice(b-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const b=this.index;return b>0?(this.parent.children.splice(b,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(b){if(!this.parent)return e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(b<0||b>=this.parent.children.length)&&e.Util.warn("Unexpected value "+b+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const L=this.index;return this.parent.children.splice(L,1),this.parent.children.splice(b,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(s,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let b=this.opacity();const L=this.getParent();return L&&!L._isUnderCache&&(b*=L.getAbsoluteOpacity()),b}moveTo(b){return this.getParent()!==b&&(this._remove(),b.add(this)),this}toObject(){let b=this.getAttrs(),L,S,I,k,D;const F={attrs:{},className:this.getClassName()};for(L in b)S=b[L],D=e.Util.isObject(S)&&!e.Util._isPlainObject(S)&&!e.Util._isArray(S),!D&&(I=typeof this[L]=="function"&&this[L],delete b[L],k=I?I.call(this):null,b[L]=S,k!==S&&(F.attrs[L]=S));return e.Util._prepareToStringify(F)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(b,L,S){const I=[];L&&this._isMatch(b)&&I.push(this);let k=this.parent;for(;k;){if(k===S)return I;k._isMatch(b)&&I.push(k),k=k.parent}return I}isAncestorOf(b){return!1}findAncestor(b,L,S){return this.findAncestors(b,L,S)[0]}_isMatch(b){if(!b)return!1;if(typeof b=="function")return b(this);let L=b.replace(/ /g,"").split(","),S=L.length,I,k;for(I=0;I<S;I++)if(k=L[I],e.Util.isValidSelector(k)||(e.Util.warn('Selector "'+k+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),e.Util.warn("Konva is awesome, right?")),k.charAt(0)==="#"){if(this.id()===k.slice(1))return!0}else if(k.charAt(0)==="."){if(this.hasName(k.slice(1)))return!0}else if(this.className===k||this.nodeType===k)return!0;return!1}getLayer(){const b=this.getParent();return b?b.getLayer():null}getStage(){return this._getCache(_,this._getStage)}_getStage(){const b=this.getParent();return b?b.getStage():null}fire(b,L={},S){return L.target=L.target||this,S?this._fireAndBubble(b,L):this._fire(b,L),this}getAbsoluteTransform(b){return b?this._getAbsoluteTransform(b):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(b){let L;if(b)return L=new e.Transform,this._eachAncestorReverse(function(S){const I=S.transformsEnabled();I==="all"?L.multiply(S.getTransform()):I==="position"&&L.translate(S.x()-S.offsetX(),S.y()-S.offsetY())},b),L;{L=this._cache.get(l)||new e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(L):L.reset();const S=this.transformsEnabled();if(S==="all")L.multiply(this.getTransform());else if(S==="position"){const I=this.attrs.x||0,k=this.attrs.y||0,D=this.attrs.offsetX||0,F=this.attrs.offsetY||0;L.translate(I-D,k-F)}return L.dirty=!1,L}}getAbsoluteScale(b){let L=this;for(;L;)L._isUnderCache&&(b=L),L=L.getParent();const I=this.getAbsoluteTransform(b).decompose();return{x:I.scaleX,y:I.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(C,this._getTransform)}_getTransform(){var b,L;const S=this._cache.get(C)||new e.Transform;S.reset();const I=this.x(),k=this.y(),D=r.Konva.getAngle(this.rotation()),F=(b=this.attrs.scaleX)!==null&&b!==void 0?b:1,O=(L=this.attrs.scaleY)!==null&&L!==void 0?L:1,H=this.attrs.skewX||0,j=this.attrs.skewY||0,U=this.attrs.offsetX||0,q=this.attrs.offsetY||0;return(I!==0||k!==0)&&S.translate(I,k),D!==0&&S.rotate(D),(H!==0||j!==0)&&S.skew(H,j),(F!==1||O!==1)&&S.scale(F,O),(U!==0||q!==0)&&S.translate(-1*U,-1*q),S.dirty=!1,S}clone(b){let L=e.Util.cloneObject(this.attrs),S,I,k,D,F;for(S in b)L[S]=b[S];const O=new this.constructor(L);for(S in this.eventListeners)for(I=this.eventListeners[S],k=I.length,D=0;D<k;D++)F=I[D],F.name.indexOf(f)<0&&(O.eventListeners[S]||(O.eventListeners[S]=[]),O.eventListeners[S].push(F));return O}_toKonvaCanvas(b){b=b||{};const L=this.getClientRect(),S=this.getStage(),I=b.x!==void 0?b.x:Math.floor(L.x),k=b.y!==void 0?b.y:Math.floor(L.y),D=b.pixelRatio||1,F=new n.SceneCanvas({width:b.width||Math.ceil(L.width)||(S?S.width():0),height:b.height||Math.ceil(L.height)||(S?S.height():0),pixelRatio:D}),O=F.getContext(),H=new n.SceneCanvas({width:F.width/F.pixelRatio+Math.abs(I),height:F.height/F.pixelRatio+Math.abs(k),pixelRatio:F.pixelRatio});return b.imageSmoothingEnabled===!1&&(O._context.imageSmoothingEnabled=!1),O.save(),(I||k)&&O.translate(-1*I,-1*k),this.drawScene(F,void 0,H),O.restore(),F}toCanvas(b){return this._toKonvaCanvas(b)._canvas}toDataURL(b){b=b||{};const L=b.mimeType||null,S=b.quality||null,I=this._toKonvaCanvas(b).toDataURL(L,S);return b.callback&&b.callback(I),I}toImage(b){return new Promise((L,S)=>{try{const I=b==null?void 0:b.callback;I&&delete b.callback,e.Util._urlToImage(this.toDataURL(b),function(k){L(k),I==null||I(k)})}catch(I){S(I)}})}toBlob(b){return new Promise((L,S)=>{try{const I=b==null?void 0:b.callback;I&&delete b.callback,this.toCanvas(b).toBlob(k=>{L(k),I==null||I(k)},b==null?void 0:b.mimeType,b==null?void 0:b.quality)}catch(I){S(I)}})}setSize(b){return this.width(b.width),this.height(b.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(b,L,S){let I=this.eventListeners[b],k,D,F;for(k=0;k<I.length;k++)if(D=I[k].name,F=I[k].handler,(D!=="konva"||L==="konva")&&(!L||D===L)&&(!S||S===F)){if(I.splice(k,1),I.length===0){delete this.eventListeners[b];break}k--}}_fireChangeEvent(b,L,S){this._fire(b+d,{oldVal:L,newVal:S})}addName(b){if(!this.hasName(b)){const L=this.name(),S=L?L+" "+b:b;this.name(S)}return this}hasName(b){if(!b)return!1;const L=this.name();return L?(L||"").split(/\s/g).indexOf(b)!==-1:!1}removeName(b){const L=(this.name()||"").split(/\s/g),S=L.indexOf(b);return S!==-1&&(L.splice(S,1),this.name(L.join(" "))),this}setAttr(b,L){const S=this[w+e.Util._capitalize(b)];return e.Util._isFunction(S)?S.call(this,L):this._setAttr(b,L),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const b=this.getLayer()||this.getStage();b==null||b.batchDraw()}}_setAttr(b,L){const S=this.attrs[b];S===L&&!e.Util.isObject(L)||(L==null?delete this.attrs[b]:this.attrs[b]=L,this._shouldFireChangeEvents&&this._fireChangeEvent(b,S,L),this._requestDraw())}_setComponentAttr(b,L,S){let I;S!==void 0&&(I=this.attrs[b],I||(this.attrs[b]=this.getAttr(b)),this.attrs[b][L]=S,this._fireChangeEvent(b,I,S))}_fireAndBubble(b,L,S){if(L&&this.nodeType===p&&(L.target=this),!((b===v||b===y)&&(S&&(this===S||this.isAncestorOf&&this.isAncestorOf(S))||this.nodeType==="Stage"&&!S))){this._fire(b,L);const k=(b===v||b===y)&&S&&S.isAncestorOf&&S.isAncestorOf(this)&&!S.isAncestorOf(this.parent);(L&&!L.cancelBubble||!L)&&this.parent&&this.parent.isListening()&&!k&&(S&&S.parent?this._fireAndBubble.call(this.parent,b,L,S):this._fireAndBubble.call(this.parent,b,L))}}_getProtoListeners(b){var L,S,I;const k=(L=this._cache.get(o))!==null&&L!==void 0?L:{};let D=k==null?void 0:k[b];if(D===void 0){D=[];let F=Object.getPrototypeOf(this);for(;F;){const O=(I=(S=F.eventListeners)===null||S===void 0?void 0:S[b])!==null&&I!==void 0?I:[];D.push(...O),F=Object.getPrototypeOf(F)}k[b]=D,this._cache.set(o,k)}return D}_fire(b,L){L=L||{},L.currentTarget=this,L.type=b;const S=this._getProtoListeners(b);if(S)for(var I=0;I<S.length;I++)S[I].handler.call(this,L);const k=this.eventListeners[b];if(k)for(var I=0;I<k.length;I++)k[I].handler.call(this,L)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(b){const L=b?b.pointerId:void 0,S=this.getStage(),I=this.getAbsolutePosition();if(!S)return;const k=S._getPointerById(L)||S._changedPointerPositions[0]||I;i.DD._dragElements.set(this._id,{node:this,startPointerPos:k,offset:{x:k.x-I.x,y:k.y-I.y},dragStatus:"ready",pointerId:L})}startDrag(b,L=!0){i.DD._dragElements.has(this._id)||this._createDragElement(b);const S=i.DD._dragElements.get(this._id);S.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:b&&b.evt},L)}_setDragPosition(b,L){const S=this.getStage()._getPointerById(L.pointerId);if(!S)return;let I={x:S.x-L.offset.x,y:S.y-L.offset.y};const k=this.dragBoundFunc();if(k!==void 0){const D=k.call(this,I,b);D?I=D:e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==I.x||this._lastPos.y!==I.y)&&(this.setAbsolutePosition(I),this._requestDraw()),this._lastPos=I}stopDrag(b){const L=i.DD._dragElements.get(this._id);L&&(L.dragStatus="stopped"),i.DD._endDragBefore(b),i.DD._endDragAfter(b)}setDraggable(b){this._setAttr("draggable",b),this._dragChange()}isDragging(){const b=i.DD._dragElements.get(this._id);return b?b.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(b){if(!(!(b.evt.button!==void 0)||r.Konva.dragButtons.indexOf(b.evt.button)>=0)||this.isDragging())return;let I=!1;i.DD._dragElements.forEach(k=>{this.isAncestorOf(k.node)&&(I=!0)}),I||this._createDragElement(b)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const L=i.DD._dragElements.get(this._id),S=L&&L.dragStatus==="dragging",I=L&&L.dragStatus==="ready";S?this.stopDrag():I&&i.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(b={x:0,y:0}){const L=this.getStage();if(!L)return!1;const S={x:-b.x,y:-b.y,width:L.width()+2*b.x,height:L.height()+2*b.y};return e.Util.haveIntersection(S,this.getClientRect())}static create(b,L){return e.Util._isString(b)&&(b=JSON.parse(b)),this._createNode(b,L)}static _createNode(b,L){let S=E.prototype.getClassName.call(b),I=b.children,k,D,F;L&&(b.attrs.container=L),r.Konva[S]||(e.Util.warn('Can not find a node with class name "'+S+'". Fallback to "Shape".'),S="Shape");const O=r.Konva[S];if(k=new O(b.attrs),I)for(D=I.length,F=0;F<D;F++)k.add(E._createNode(I[F]));return k}}St.Node=E,E.prototype.nodeType="Node",E.prototype._attrsAffectingSize=[],E.prototype.eventListeners={},E.prototype.on.call(E.prototype,R,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(C),this._clearSelfAndDescendantCache(l)}),E.prototype.on.call(E.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(P)}),E.prototype.on.call(E.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),E.prototype.on.call(E.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(s)});const A=t.Factory.addGetterSetter;return A(E,"zIndex"),A(E,"absolutePosition"),A(E,"position"),A(E,"x",0,(0,a.getNumberValidator)()),A(E,"y",0,(0,a.getNumberValidator)()),A(E,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),A(E,"opacity",1,(0,a.getNumberValidator)()),A(E,"name","",(0,a.getStringValidator)()),A(E,"id","",(0,a.getStringValidator)()),A(E,"rotation",0,(0,a.getNumberValidator)()),t.Factory.addComponentsGetterSetter(E,"scale",["x","y"]),A(E,"scaleX",1,(0,a.getNumberValidator)()),A(E,"scaleY",1,(0,a.getNumberValidator)()),t.Factory.addComponentsGetterSetter(E,"skew",["x","y"]),A(E,"skewX",0,(0,a.getNumberValidator)()),A(E,"skewY",0,(0,a.getNumberValidator)()),t.Factory.addComponentsGetterSetter(E,"offset",["x","y"]),A(E,"offsetX",0,(0,a.getNumberValidator)()),A(E,"offsetY",0,(0,a.getNumberValidator)()),A(E,"dragDistance",void 0,(0,a.getNumberValidator)()),A(E,"width",0,(0,a.getNumberValidator)()),A(E,"height",0,(0,a.getNumberValidator)()),A(E,"listening",!0,(0,a.getBooleanValidator)()),A(E,"preventDefault",!0,(0,a.getBooleanValidator)()),A(E,"filters",void 0,function(N){return this._filterUpToDate=!1,N}),A(E,"visible",!0,(0,a.getBooleanValidator)()),A(E,"transformsEnabled","all",(0,a.getStringValidator)()),A(E,"size"),A(E,"dragBoundFunc"),A(E,"draggable",!1,(0,a.getBooleanValidator)()),t.Factory.backCompat(E,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),St}var Et={},ru;function Hn(){if(ru)return Et;ru=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.Container=void 0;const e=re(),t=me(),n=ae();let r=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){if(!a)return this.children||[];const s=this.children||[],o=[];return s.forEach(function(l){a(l)&&o.push(l)}),o}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(let o=0;o<a.length;o++)this.add(a[o]);return this}const s=a[0];return s.getParent()?(s.moveTo(this),this):(this._validateAdd(s),s.index=this.getChildren().length,s.parent=this,s._clearCaches(),this.getChildren().push(s),this._fire("add",{child:s}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){const s=this._generalFind(a,!0);return s.length>0?s[0]:void 0}_generalFind(a,s){const o=[];return this._descendants(l=>{const c=l._isMatch(a);return c&&o.push(l),!!(c&&s)}),o}_descendants(a){let s=!1;const o=this.getChildren();for(const l of o){if(s=a(l),s)return!0;if(l.hasChildren()&&(s=l._descendants(a),s))return!0}return!1}toObject(){const a=t.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(s=>{a.children.push(s.toObject())}),a}isAncestorOf(a){let s=a.getParent();for(;s;){if(s._id===this._id)return!0;s=s.getParent()}return!1}clone(a){const s=t.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(o){s.add(o.clone())}),s}getAllIntersections(a){const s=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(a)&&s.push(o)}),s}_clearSelfAndDescendantCache(a){var s;super._clearSelfAndDescendantCache(a),!this.isCached()&&((s=this.children)===null||s===void 0||s.forEach(function(o){o._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(s,o){s.index=o}),this._requestDraw()}drawScene(a,s,o){const l=this.getLayer(),c=a||l&&l.getCanvas(),u=c&&c.getContext(),d=this._getCanvasCache(),h=d&&d.scene,f=c&&c.isCache;if(!this.isVisible()&&!f)return this;if(h){u.save();const g=this.getAbsoluteTransform(s).getMatrix();u.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(u),u.restore()}else this._drawChildren("drawScene",c,s,o);return this}drawHit(a,s){if(!this.shouldDrawHit(s))return this;const o=this.getLayer(),l=a||o&&o.hitCanvas,c=l&&l.getContext(),u=this._getCanvasCache();if(u&&u.hit){c.save();const h=this.getAbsoluteTransform(s).getMatrix();c.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(c),c.restore()}else this._drawChildren("drawHit",l,s);return this}_drawChildren(a,s,o,l){var c;const u=s&&s.getContext(),d=this.clipWidth(),h=this.clipHeight(),f=this.clipFunc(),g=typeof d=="number"&&typeof h=="number"||f,v=o===this;if(g){u.save();const w=this.getAbsoluteTransform(o);let p=w.getMatrix();u.transform(p[0],p[1],p[2],p[3],p[4],p[5]),u.beginPath();let m;if(f)m=f.call(this,u,this);else{const _=this.clipX(),C=this.clipY();u.rect(_||0,C||0,d,h)}u.clip.apply(u,m),p=w.copy().invert().getMatrix(),u.transform(p[0],p[1],p[2],p[3],p[4],p[5])}const y=!v&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";y&&(u.save(),u._applyGlobalCompositeOperation(this)),(c=this.children)===null||c===void 0||c.forEach(function(w){w[a](s,o,l)}),y&&u.restore(),g&&u.restore()}getClientRect(a={}){var s;const o=a.skipTransform,l=a.relativeTo;let c,u,d,h,f={x:1/0,y:1/0,width:0,height:0};const g=this;(s=this.children)===null||s===void 0||s.forEach(function(w){if(!w.visible())return;const p=w.getClientRect({relativeTo:g,skipShadow:a.skipShadow,skipStroke:a.skipStroke});p.width===0&&p.height===0||(c===void 0?(c=p.x,u=p.y,d=p.x+p.width,h=p.y+p.height):(c=Math.min(c,p.x),u=Math.min(u,p.y),d=Math.max(d,p.x+p.width),h=Math.max(h,p.y+p.height)))});const v=this.find("Shape");let y=!1;for(let w=0;w<v.length;w++)if(v[w]._isVisible(this)){y=!0;break}return y&&c!==void 0?f={x:c,y:u,width:d-c,height:h-u}:f={x:0,y:0,width:0,height:0},o?f:this._transformedRect(f,l)}};return Et.Container=r,e.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(r,"clipX",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipY",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipWidth",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipHeight",void 0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"clipFunc"),Et}var br={},Je={},iu;function Wp(){if(iu)return Je;iu=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.getCapturedShape=r,Je.createEvent=i,Je.hasPointerCapture=a,Je.setPointerCapture=s,Je.releaseCapture=o;const e=te(),t=new Map,n=e.Konva._global.PointerEvent!==void 0;function r(l){return t.get(l)}function i(l){return{evt:l,pointerId:l.pointerId}}function a(l,c){return t.get(l)===c}function s(l,c){o(l),c.getStage()&&(t.set(l,c),n&&c._fire("gotpointercapture",i(new PointerEvent("gotpointercapture"))))}function o(l,c){const u=t.get(l);if(!u)return;const d=u.getStage();d&&d.content,t.delete(l),n&&u._fire("lostpointercapture",i(new PointerEvent("lostpointercapture")))}return Je}var au;function zv(){return au||(au=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=fe(),n=re(),r=Hn(),i=te(),a=Un(),s=uc(),o=te(),l=Wp(),c="Stage",u="string",d="px",h="mouseout",f="mouseleave",g="mouseover",v="mouseenter",y="mousemove",w="mousedown",p="mouseup",m="pointermove",_="pointerdown",C="pointerup",x="pointercancel",P="lostpointercapture",R="pointerout",T="pointerleave",E="pointerover",A="pointerenter",N="contextmenu",b="touchstart",L="touchend",S="touchmove",I="touchcancel",k="wheel",D=5,F=[[v,"_pointerenter"],[w,"_pointerdown"],[y,"_pointermove"],[p,"_pointerup"],[f,"_pointerleave"],[b,"_pointerdown"],[S,"_pointermove"],[L,"_pointerup"],[I,"_pointercancel"],[g,"_pointerover"],[k,"_wheel"],[N,"_contextmenu"],[_,"_pointerdown"],[m,"_pointermove"],[C,"_pointerup"],[x,"_pointercancel"],[P,"_lostpointercapture"]],O={mouse:{[R]:h,[T]:f,[E]:g,[A]:v,[m]:y,[_]:w,[C]:p,[x]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[R]:"touchout",[T]:"touchleave",[E]:"touchover",[A]:"touchenter",[m]:S,[_]:b,[C]:L,[x]:I,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[R]:R,[T]:T,[E]:E,[A]:A,[m]:m,[_]:_,[C]:C,[x]:x,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},H=V=>V.indexOf("pointer")>=0?"pointer":V.indexOf("touch")>=0?"touch":"mouse",j=V=>{const M=H(V);if(M==="pointer")return i.Konva.pointerEventsEnabled&&O.pointer;if(M==="touch")return O.touch;if(M==="mouse")return O.mouse};function U(V={}){return(V.clipFunc||V.clipWidth||V.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),V}const q="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class G extends r.Container{constructor(M){super(U(M)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{U(this.attrs)}),this._checkVisibility()}_validateAdd(M){const B=M.getType()==="Layer",W=M.getType()==="FastLayer";B||W||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const M=this.visible()?"":"none";this.content.style.display=M}setContainer(M){if(typeof M===u){if(M.charAt(0)==="."){const W=M.slice(1);M=document.getElementsByClassName(W)[0]}else{var B;M.charAt(0)!=="#"?B=M:B=M.slice(1),M=document.getElementById(B)}if(!M)throw"Can not find container in document with id "+B}return this._setAttr("container",M),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),M.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const M=this.children,B=M.length;for(let W=0;W<B;W++)M[W].clear();return this}clone(M){return M||(M={}),M.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,M)}destroy(){super.destroy();const M=this.content;M&&t.Util._isInDocument(M)&&this.container().removeChild(M);const B=e.stages.indexOf(this);return B>-1&&e.stages.splice(B,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const M=this._pointerPositions[0]||this._changedPointerPositions[0];return M?{x:M.x,y:M.y}:(t.Util.warn(q),null)}_getPointerById(M){return this._pointerPositions.find(B=>B.id===M)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(M){M=M||{},M.x=M.x||0,M.y=M.y||0,M.width=M.width||this.width(),M.height=M.height||this.height();const B=new a.SceneCanvas({width:M.width,height:M.height,pixelRatio:M.pixelRatio||1}),W=B.getContext()._context,z=this.children;return(M.x||M.y)&&W.translate(-1*M.x,-1*M.y),z.forEach(function(Y){if(!Y.isVisible())return;const X=Y._toKonvaCanvas(M);W.drawImage(X._canvas,M.x,M.y,X.getWidth()/X.getPixelRatio(),X.getHeight()/X.getPixelRatio())}),B}getIntersection(M){if(!M)return null;const B=this.children,W=B.length,z=W-1;for(let Y=z;Y>=0;Y--){const X=B[Y].getIntersection(M);if(X)return X}return null}_resizeDOM(){const M=this.width(),B=this.height();this.content&&(this.content.style.width=M+d,this.content.style.height=B+d),this.bufferCanvas.setSize(M,B),this.bufferHitCanvas.setSize(M,B),this.children.forEach(W=>{W.setSize({width:M,height:B}),W.draw()})}add(M,...B){if(arguments.length>1){for(let z=0;z<arguments.length;z++)this.add(arguments[z]);return this}super.add(M);const W=this.children.length;return W>D&&t.Util.warn("The stage has "+W+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),M.setSize({width:this.width(),height:this.height()}),M.draw(),i.Konva.isBrowser&&this.content.appendChild(M.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(M){return l.hasPointerCapture(M,this)}setPointerCapture(M){l.setPointerCapture(M,this)}releaseCapture(M){l.releaseCapture(M,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&F.forEach(([M,B])=>{this.content.addEventListener(M,W=>{this[B](W)},{passive:!1})})}_pointerenter(M){this.setPointersPositions(M);const B=j(M.type);B&&this._fire(B.pointerenter,{evt:M,target:this,currentTarget:this})}_pointerover(M){this.setPointersPositions(M);const B=j(M.type);B&&this._fire(B.pointerover,{evt:M,target:this,currentTarget:this})}_getTargetShape(M){let B=this[M+"targetShape"];return B&&!B.getStage()&&(B=null),B}_pointerleave(M){const B=j(M.type),W=H(M.type);if(!B)return;this.setPointersPositions(M);const z=this._getTargetShape(W),Y=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;z&&Y?(z._fireAndBubble(B.pointerout,{evt:M}),z._fireAndBubble(B.pointerleave,{evt:M}),this._fire(B.pointerleave,{evt:M,target:this,currentTarget:this}),this[W+"targetShape"]=null):Y&&(this._fire(B.pointerleave,{evt:M,target:this,currentTarget:this}),this._fire(B.pointerout,{evt:M,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(M){const B=j(M.type),W=H(M.type);if(!B)return;this.setPointersPositions(M);let z=!1;this._changedPointerPositions.forEach(Y=>{const X=this.getIntersection(Y);if(s.DD.justDragged=!1,i.Konva["_"+W+"ListenClick"]=!0,!X||!X.isListening()){this[W+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&X.setPointerCapture(Y.id),this[W+"ClickStartShape"]=X,X._fireAndBubble(B.pointerdown,{evt:M,pointerId:Y.id}),z=!0;const Z=M.type.indexOf("touch")>=0;X.preventDefault()&&M.cancelable&&Z&&M.preventDefault()}),z||this._fire(B.pointerdown,{evt:M,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(M){const B=j(M.type),W=H(M.type);if(!B||(i.Konva.isDragging()&&s.DD.node.preventDefault()&&M.cancelable&&M.preventDefault(),this.setPointersPositions(M),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const Y={};let X=!1;const Z=this._getTargetShape(W);this._changedPointerPositions.forEach(Q=>{const K=l.getCapturedShape(Q.id)||this.getIntersection(Q),de=Q.id,J={evt:M,pointerId:de},ie=Z!==K;if(ie&&Z&&(Z._fireAndBubble(B.pointerout,{...J},K),Z._fireAndBubble(B.pointerleave,{...J},K)),K){if(Y[K._id])return;Y[K._id]=!0}K&&K.isListening()?(X=!0,ie&&(K._fireAndBubble(B.pointerover,{...J},Z),K._fireAndBubble(B.pointerenter,{...J},Z),this[W+"targetShape"]=K),K._fireAndBubble(B.pointermove,{...J})):Z&&(this._fire(B.pointerover,{evt:M,target:this,currentTarget:this,pointerId:de}),this[W+"targetShape"]=null)}),X||this._fire(B.pointermove,{evt:M,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(M){const B=j(M.type),W=H(M.type);if(!B)return;this.setPointersPositions(M);const z=this[W+"ClickStartShape"],Y=this[W+"ClickEndShape"],X={};let Z=!1;this._changedPointerPositions.forEach(Q=>{const K=l.getCapturedShape(Q.id)||this.getIntersection(Q);if(K){if(K.releaseCapture(Q.id),X[K._id])return;X[K._id]=!0}const de=Q.id,J={evt:M,pointerId:de};let ie=!1;i.Konva["_"+W+"InDblClickWindow"]?(ie=!0,clearTimeout(this[W+"DblTimeout"])):s.DD.justDragged||(i.Konva["_"+W+"InDblClickWindow"]=!0,clearTimeout(this[W+"DblTimeout"])),this[W+"DblTimeout"]=setTimeout(function(){i.Konva["_"+W+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),K&&K.isListening()?(Z=!0,this[W+"ClickEndShape"]=K,K._fireAndBubble(B.pointerup,{...J}),i.Konva["_"+W+"ListenClick"]&&z&&z===K&&(K._fireAndBubble(B.pointerclick,{...J}),ie&&Y&&Y===K&&K._fireAndBubble(B.pointerdblclick,{...J}))):(this[W+"ClickEndShape"]=null,i.Konva["_"+W+"ListenClick"]&&this._fire(B.pointerclick,{evt:M,target:this,currentTarget:this,pointerId:de}),ie&&this._fire(B.pointerdblclick,{evt:M,target:this,currentTarget:this,pointerId:de}))}),Z||this._fire(B.pointerup,{evt:M,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+W+"ListenClick"]=!1,M.cancelable&&W!=="touch"&&W!=="pointer"&&M.preventDefault()}_contextmenu(M){this.setPointersPositions(M);const B=this.getIntersection(this.getPointerPosition());B&&B.isListening()?B._fireAndBubble(N,{evt:M}):this._fire(N,{evt:M,target:this,currentTarget:this})}_wheel(M){this.setPointersPositions(M);const B=this.getIntersection(this.getPointerPosition());B&&B.isListening()?B._fireAndBubble(k,{evt:M}):this._fire(k,{evt:M,target:this,currentTarget:this})}_pointercancel(M){this.setPointersPositions(M);const B=l.getCapturedShape(M.pointerId)||this.getIntersection(this.getPointerPosition());B&&B._fireAndBubble(C,l.createEvent(M)),l.releaseCapture(M.pointerId)}_lostpointercapture(M){l.releaseCapture(M.pointerId)}setPointersPositions(M){const B=this._getContentPosition();let W=null,z=null;M=M||window.event,M.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(M.touches,Y=>{this._pointerPositions.push({id:Y.identifier,x:(Y.clientX-B.left)/B.scaleX,y:(Y.clientY-B.top)/B.scaleY})}),Array.prototype.forEach.call(M.changedTouches||M.touches,Y=>{this._changedPointerPositions.push({id:Y.identifier,x:(Y.clientX-B.left)/B.scaleX,y:(Y.clientY-B.top)/B.scaleY})})):(W=(M.clientX-B.left)/B.scaleX,z=(M.clientY-B.top)/B.scaleY,this.pointerPos={x:W,y:z},this._pointerPositions=[{x:W,y:z,id:t.Util._getFirstPointerId(M)}],this._changedPointerPositions=[{x:W,y:z,id:t.Util._getFirstPointerId(M)}])}_setPointerPosition(M){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(M)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const M=this.content.getBoundingClientRect();return{top:M.top,left:M.left,scaleX:M.width/this.content.clientWidth||1,scaleY:M.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const M=this.container();if(!M)throw"Stage has no container. A container is required.";M.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),M.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(M){M.batchDraw()}),this}}e.Stage=G,G.prototype.nodeType=c,(0,o._registerNode)(G),n.Factory.addGetterSetter(G,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(V=>{V.batchDraw()})})}(br)),br}var xt={},wr={},ou;function Ce(){return ou||(ou=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=te(),n=fe(),r=re(),i=me(),a=ae(),s=te(),o=Wp(),l="hasShadow",c="shadowRGBA",u="patternImage",d="linearGradient",h="radialGradient";let f;function g(){return f||(f=n.Util.createCanvasElement().getContext("2d"),f)}e.shapes={};function v(T){const E=this.attrs.fillRule;E?T.fill(E):T.fill()}function y(T){T.stroke()}function w(T){const E=this.attrs.fillRule;E?T.fill(E):T.fill()}function p(T){T.stroke()}function m(){this._clearCache(l)}function _(){this._clearCache(c)}function C(){this._clearCache(u)}function x(){this._clearCache(d)}function P(){this._clearCache(h)}class R extends i.Node{constructor(E){super(E);let A;for(;A=n.Util.getRandomColor(),!(A&&!(A in e.shapes)););this.colorKey=A,e.shapes[A]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(u,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const A=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(A&&A.setTransform){const N=new n.Transform;N.translate(this.fillPatternX(),this.fillPatternY()),N.rotate(t.Konva.getAngle(this.fillPatternRotation())),N.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),N.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const b=N.getMatrix(),L=typeof DOMMatrix>"u"?{a:b[0],b:b[1],c:b[2],d:b[3],e:b[4],f:b[5]}:new DOMMatrix(b);A.setTransform(L)}return A}}_getLinearGradient(){return this._getCache(d,this.__getLinearGradient)}__getLinearGradient(){const E=this.fillLinearGradientColorStops();if(E){const A=g(),N=this.fillLinearGradientStartPoint(),b=this.fillLinearGradientEndPoint(),L=A.createLinearGradient(N.x,N.y,b.x,b.y);for(let S=0;S<E.length;S+=2)L.addColorStop(E[S],E[S+1]);return L}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const E=this.fillRadialGradientColorStops();if(E){const A=g(),N=this.fillRadialGradientStartPoint(),b=this.fillRadialGradientEndPoint(),L=A.createRadialGradient(N.x,N.y,this.fillRadialGradientStartRadius(),b.x,b.y,this.fillRadialGradientEndRadius());for(let S=0;S<E.length;S+=2)L.addColorStop(E[S],E[S+1]);return L}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const E=n.Util.colorToRGBA(this.shadowColor());if(E)return"rgba("+E.r+","+E.g+","+E.b+","+E.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const E=this.hitStrokeWidth();return E==="auto"?this.hasStroke():this.strokeEnabled()&&!!E}intersects(E){const A=this.getStage();if(!A)return!1;const N=A.bufferHitCanvas;return N.getContext().clear(),this.drawHit(N,void 0,!0),N.context.getImageData(Math.round(E.x),Math.round(E.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(E){var A;if(!((A=this.attrs.perfectDrawEnabled)!==null&&A!==void 0?A:!0))return!1;const b=E||this.hasFill(),L=this.hasStroke(),S=this.getAbsoluteOpacity()!==1;if(b&&L&&S)return!0;const I=this.hasShadow(),k=this.shadowForStrokeEnabled();return!!(b&&L&&I&&k)}setStrokeHitEnabled(E){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),E?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const E=this.size();return{x:this._centroid?-E.width/2:0,y:this._centroid?-E.height/2:0,width:E.width,height:E.height}}getClientRect(E={}){let A=!1,N=this.getParent();for(;N;){if(N.isCached()){A=!0;break}N=N.getParent()}const b=E.skipTransform,L=E.relativeTo||A&&this.getStage()||void 0,S=this.getSelfRect(),k=!E.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,D=S.width+k,F=S.height+k,O=!E.skipShadow&&this.hasShadow(),H=O?this.shadowOffsetX():0,j=O?this.shadowOffsetY():0,U=D+Math.abs(H),q=F+Math.abs(j),G=O&&this.shadowBlur()||0,V=U+G*2,M=q+G*2,B={width:V,height:M,x:-(k/2+G)+Math.min(H,0)+S.x,y:-(k/2+G)+Math.min(j,0)+S.y};return b?B:this._transformedRect(B,L)}drawScene(E,A,N){const b=this.getLayer();let L=E||b.getCanvas(),S=L.getContext(),I=this._getCanvasCache(),k=this.getSceneFunc(),D=this.hasShadow(),F,O;const H=L.isCache,j=A===this;if(!this.isVisible()&&!j)return this;if(I){S.save();const q=this.getAbsoluteTransform(A).getMatrix();return S.transform(q[0],q[1],q[2],q[3],q[4],q[5]),this._drawCachedSceneCanvas(S),S.restore(),this}if(!k)return this;if(S.save(),this._useBufferCanvas()&&!H){F=this.getStage();const q=N||F.bufferCanvas;O=q.getContext(),O.clear(),O.save(),O._applyLineJoin(this);var U=this.getAbsoluteTransform(A).getMatrix();O.transform(U[0],U[1],U[2],U[3],U[4],U[5]),k.call(this,O,this),O.restore();const G=q.pixelRatio;D&&S._applyShadow(this),S._applyOpacity(this),S._applyGlobalCompositeOperation(this),S.drawImage(q._canvas,0,0,q.width/G,q.height/G)}else{if(S._applyLineJoin(this),!j){var U=this.getAbsoluteTransform(A).getMatrix();S.transform(U[0],U[1],U[2],U[3],U[4],U[5]),S._applyOpacity(this),S._applyGlobalCompositeOperation(this)}D&&S._applyShadow(this),k.call(this,S,this)}return S.restore(),this}drawHit(E,A,N=!1){if(!this.shouldDrawHit(A,N))return this;const b=this.getLayer(),L=E||b.hitCanvas,S=L&&L.getContext(),I=this.hitFunc()||this.sceneFunc(),k=this._getCanvasCache(),D=k&&k.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),D){S.save();const O=this.getAbsoluteTransform(A).getMatrix();return S.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._drawCachedHitCanvas(S),S.restore(),this}if(!I)return this;if(S.save(),S._applyLineJoin(this),!(this===A)){const O=this.getAbsoluteTransform(A).getMatrix();S.transform(O[0],O[1],O[2],O[3],O[4],O[5])}return I.call(this,S,this),S.restore(),this}drawHitFromCache(E=0){const A=this._getCanvasCache(),N=this._getCachedSceneCanvas(),b=A.hit,L=b.getContext(),S=b.getWidth(),I=b.getHeight();L.clear(),L.drawImage(N._canvas,0,0,S,I);try{const k=L.getImageData(0,0,S,I),D=k.data,F=D.length,O=n.Util._hexToRgb(this.colorKey);for(let H=0;H<F;H+=4)D[H+3]>E?(D[H]=O.r,D[H+1]=O.g,D[H+2]=O.b,D[H+3]=255):D[H+3]=0;L.putImageData(k,0,0)}catch(k){n.Util.error("Unable to draw hit graph from cached scene canvas. "+k.message)}return this}hasPointerCapture(E){return o.hasPointerCapture(E,this)}setPointerCapture(E){o.setPointerCapture(E,this)}releaseCapture(E){o.releaseCapture(E,this)}}e.Shape=R,R.prototype._fillFunc=v,R.prototype._strokeFunc=y,R.prototype._fillFuncHit=w,R.prototype._strokeFuncHit=p,R.prototype._centroid=!1,R.prototype.nodeType="Shape",(0,s._registerNode)(R),R.prototype.eventListeners={},R.prototype.on.call(R.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),R.prototype.on.call(R.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",x),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",P),r.Factory.addGetterSetter(R,"stroke",void 0,(0,a.getStringOrGradientValidator)()),r.Factory.addGetterSetter(R,"strokeWidth",2,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(R,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(R,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),r.Factory.addGetterSetter(R,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),r.Factory.addGetterSetter(R,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),r.Factory.addGetterSetter(R,"lineJoin"),r.Factory.addGetterSetter(R,"lineCap"),r.Factory.addGetterSetter(R,"sceneFunc"),r.Factory.addGetterSetter(R,"hitFunc"),r.Factory.addGetterSetter(R,"dash"),r.Factory.addGetterSetter(R,"dashOffset",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(R,"shadowColor",void 0,(0,a.getStringValidator)()),r.Factory.addGetterSetter(R,"shadowBlur",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(R,"shadowOpacity",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(R,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(R,"shadowOffsetX",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(R,"shadowOffsetY",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternImage"),r.Factory.addGetterSetter(R,"fill",void 0,(0,a.getStringOrGradientValidator)()),r.Factory.addGetterSetter(R,"fillPatternX",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternY",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(R,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(R,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(R,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(R,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(R,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(R,"fillEnabled",!0),r.Factory.addGetterSetter(R,"strokeEnabled",!0),r.Factory.addGetterSetter(R,"shadowEnabled",!0),r.Factory.addGetterSetter(R,"dashEnabled",!0),r.Factory.addGetterSetter(R,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(R,"fillPriority","color"),r.Factory.addComponentsGetterSetter(R,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(R,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(R,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(R,"fillPatternScaleX",1,(0,a.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternScaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(R,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(R,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(R,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(R,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(R,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(R,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(R,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(R,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(R,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(R,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(R,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(R,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(R,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(R,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(R,"fillPatternRotation",0),r.Factory.addGetterSetter(R,"fillRule",void 0,(0,a.getStringValidator)()),r.Factory.backCompat(R,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(wr)),wr}var su;function zp(){if(su)return xt;su=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.Layer=void 0;const e=fe(),t=Hn(),n=me(),r=re(),i=Un(),a=ae(),s=Ce(),o=te(),l="#",c="beforeDraw",u="draw",d=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],h=d.length;let f=class extends t.Container{constructor(v){super(v),this.canvas=new i.SceneCanvas,this.hitCanvas=new i.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(v){return this.getContext().clear(v),this.getHitCanvas().getContext().clear(v),this}setZIndex(v){super.setZIndex(v);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),v<y.children.length-1?y.content.insertBefore(this.getNativeCanvasElement(),y.children[v+1].getCanvas()._canvas):y.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const y=this.getStage();return!y||!y.content?!1:(y.content.removeChild(this.getNativeCanvasElement()),this.index<y.children.length-1?y.content.insertBefore(this.getNativeCanvasElement(),y.children[this.index+1].getCanvas()._canvas):y.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const v=this.getStage();if(v){const y=v.children;v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.insertBefore(this.getNativeCanvasElement(),y[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const v=this.getStage();if(v){const y=v.children;v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.insertBefore(this.getNativeCanvasElement(),y[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const v=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),v&&v.parentNode&&e.Util._isInDocument(v)&&v.parentNode.removeChild(v),this}getStage(){return this.parent}setSize({width:v,height:y}){return this.canvas.setSize(v,y),this.hitCanvas.setSize(v,y),this._setSmoothEnabled(),this}_validateAdd(v){const y=v.getType();y!=="Group"&&y!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(v){return v=v||{},v.width=v.width||this.getWidth(),v.height=v.height||this.getHeight(),v.x=v.x!==void 0?v.x:this.x(),v.y=v.y!==void 0?v.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,v)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(v){if(!this.isListening()||!this.isVisible())return null;let y=1,w=!1;for(;;){for(let p=0;p<h;p++){const m=d[p],_=this._getIntersection({x:v.x+m.x*y,y:v.y+m.y*y}),C=_.shape;if(C)return C;if(w=!!_.antialiased,!_.antialiased)break}if(w)y+=1;else return null}}_getIntersection(v){const y=this.hitCanvas.pixelRatio,w=this.hitCanvas.context.getImageData(Math.round(v.x*y),Math.round(v.y*y),1,1).data,p=w[3];if(p===255){const m=e.Util._rgbToHex(w[0],w[1],w[2]),_=s.shapes[l+m];return _?{shape:_}:{antialiased:!0}}else if(p>0)return{antialiased:!0};return{}}drawScene(v,y){const w=this.getLayer(),p=v||w&&w.getCanvas();return this._fire(c,{node:this}),this.clearBeforeDraw()&&p.getContext().clear(),t.Container.prototype.drawScene.call(this,p,y),this._fire(u,{node:this}),this}drawHit(v,y){const w=this.getLayer(),p=v||w&&w.hitCanvas;return w&&w.clearBeforeDraw()&&w.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,p,y),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(v){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(v)}getHitGraphEnabled(v){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const v=this.parent;!!this.hitCanvas._canvas.parentNode?v.content.removeChild(this.hitCanvas._canvas):v.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return xt.Layer=f,f.prototype.nodeType="Layer",(0,o._registerNode)(f),r.Factory.addGetterSetter(f,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(f,"clearBeforeDraw",!0),r.Factory.addGetterSetter(f,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),xt}var Lt={},lu;function jv(){if(lu)return Lt;lu=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.FastLayer=void 0;const e=fe(),t=zp(),n=te();let r=class extends t.Layer{constructor(a){super(a),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Lt.FastLayer=r,r.prototype.nodeType="FastLayer",(0,n._registerNode)(r),Lt}var Tt={},cu;function dc(){if(cu)return Tt;cu=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.Group=void 0;const e=fe(),t=Hn(),n=te();let r=class extends t.Container{_validateAdd(a){const s=a.getType();s!=="Group"&&s!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}};return Tt.Group=r,r.prototype.nodeType="Group",(0,n._registerNode)(r),Tt}var Rt={},uu;function hc(){if(uu)return Rt;uu=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.Animation=void 0;const e=te(),t=fe(),n=function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}}();let r=class ut{constructor(a,s){this.id=ut.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=a,this.setLayers(s)}setLayers(a){let s=[];return a&&(s=Array.isArray(a)?a:[a]),this.layers=s,this}getLayers(){return this.layers}addLayer(a){const s=this.layers,o=s.length;for(let l=0;l<o;l++)if(s[l]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const s=ut.animations,o=s.length;for(let l=0;l<o;l++)if(s[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),ut._addAnimation(this),this}stop(){return ut._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const s=a.id,o=this.animations,l=o.length;for(let c=0;c<l;c++)if(o[c].id===s){this.animations.splice(c,1);break}}static _runFrames(){const a={},s=this.animations;for(let o=0;o<s.length;o++){const l=s[o],c=l.layers,u=l.func;l._updateFrameObject(n());const d=c.length;let h;if(u?h=u.call(l,l.frame)!==!1:h=!0,!!h)for(let f=0;f<d;f++){const g=c[f];g._id!==void 0&&(a[g._id]=g)}}for(const o in a)a.hasOwnProperty(o)&&a[o].batchDraw()}static _animationLoop(){const a=ut;a.animations.length?(a._runFrames(),t.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return Rt.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,Rt}var Cr={},du;function $v(){return du||(du=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=fe(),n=hc(),r=me(),i=te(),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},s=1,o=2,l=3,c=["fill","stroke","shadowColor"];let u=0;class d{constructor(g,v,y,w,p,m,_){this.prop=g,this.propFunc=v,this.begin=w,this._pos=w,this.duration=m,this._change=0,this.prevPos=0,this.yoyo=_,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=y,this._change=p-this.begin,this.pause()}fire(g){const v=this[g];v&&v()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===o?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=s,this.fire("onPause")}getTimer(){return new Date().getTime()}}class h{constructor(g){const v=this,y=g.node,w=y._id,p=g.easing||e.Easings.Linear,m=!!g.yoyo;let _,C;typeof g.duration>"u"?_=.3:g.duration===0?_=.001:_=g.duration,this.node=y,this._id=u++;const x=y.getLayer()||(y instanceof i.Konva.Stage?y.getLayers():null);x||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){v.tween.onEnterFrame()},x),this.tween=new d(C,function(P){v._tweenFunc(P)},p,0,1,_*1e3,m),this._addListeners(),h.attrs[w]||(h.attrs[w]={}),h.attrs[w][this._id]||(h.attrs[w][this._id]={}),h.tweens[w]||(h.tweens[w]={});for(C in g)a[C]===void 0&&this._addAttr(C,g[C]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,v){const y=this.node,w=y._id;let p,m,_,C,x;const P=h.tweens[w][g];P&&delete h.attrs[w][P][g];let R=y.getAttr(g);if(t.Util._isArray(v))if(p=[],m=Math.max(v.length,R.length),g==="points"&&v.length!==R.length&&(v.length>R.length?(C=R,R=t.Util._prepareArrayForTween(R,v,y.closed())):(_=v,v=t.Util._prepareArrayForTween(v,R,y.closed()))),g.indexOf("fill")===0)for(let T=0;T<m;T++)if(T%2===0)p.push(v[T]-R[T]);else{const E=t.Util.colorToRGBA(R[T]);x=t.Util.colorToRGBA(v[T]),R[T]=E,p.push({r:x.r-E.r,g:x.g-E.g,b:x.b-E.b,a:x.a-E.a})}else for(let T=0;T<m;T++)p.push(v[T]-R[T]);else c.indexOf(g)!==-1?(R=t.Util.colorToRGBA(R),x=t.Util.colorToRGBA(v),p={r:x.r-R.r,g:x.g-R.g,b:x.b-R.b,a:x.a-R.a}):p=v-R;h.attrs[w][this._id][g]={start:R,diff:p,end:v,trueEnd:_,trueStart:C},h.tweens[w][g]=this._id}_tweenFunc(g){const v=this.node,y=h.attrs[v._id][this._id];let w,p,m,_,C,x,P,R;for(w in y){if(p=y[w],m=p.start,_=p.diff,R=p.end,t.Util._isArray(m))if(C=[],P=Math.max(m.length,R.length),w.indexOf("fill")===0)for(x=0;x<P;x++)x%2===0?C.push((m[x]||0)+_[x]*g):C.push("rgba("+Math.round(m[x].r+_[x].r*g)+","+Math.round(m[x].g+_[x].g*g)+","+Math.round(m[x].b+_[x].b*g)+","+(m[x].a+_[x].a*g)+")");else for(x=0;x<P;x++)C.push((m[x]||0)+_[x]*g);else c.indexOf(w)!==-1?C="rgba("+Math.round(m.r+_.r*g)+","+Math.round(m.g+_.g*g)+","+Math.round(m.b+_.b*g)+","+(m.a+_.a*g)+")":C=m+_*g;v.setAttr(w,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,v=h.attrs[g._id][this._id];v.points&&v.points.trueEnd&&g.setAttr("points",v.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,v=h.attrs[g._id][this._id];v.points&&v.points.trueStart&&g.points(v.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,v=this._id,y=h.tweens[g];this.pause();for(const w in y)delete h.tweens[g][w];delete h.attrs[g][v]}}e.Tween=h,h.attrs={},h.tweens={},r.Node.prototype.to=function(f){const g=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),g&&g()},new h(f).play()},e.Easings={BackEaseIn(f,g,v,y){return v*(f/=y)*f*((1.70158+1)*f-1.70158)+g},BackEaseOut(f,g,v,y){return v*((f=f/y-1)*f*((1.70158+1)*f+1.70158)+1)+g},BackEaseInOut(f,g,v,y){let w=1.70158;return(f/=y/2)<1?v/2*(f*f*(((w*=1.525)+1)*f-w))+g:v/2*((f-=2)*f*(((w*=1.525)+1)*f+w)+2)+g},ElasticEaseIn(f,g,v,y,w,p){let m=0;return f===0?g:(f/=y)===1?g+v:(p||(p=y*.3),!w||w<Math.abs(v)?(w=v,m=p/4):m=p/(2*Math.PI)*Math.asin(v/w),-(w*Math.pow(2,10*(f-=1))*Math.sin((f*y-m)*(2*Math.PI)/p))+g)},ElasticEaseOut(f,g,v,y,w,p){let m=0;return f===0?g:(f/=y)===1?g+v:(p||(p=y*.3),!w||w<Math.abs(v)?(w=v,m=p/4):m=p/(2*Math.PI)*Math.asin(v/w),w*Math.pow(2,-10*f)*Math.sin((f*y-m)*(2*Math.PI)/p)+v+g)},ElasticEaseInOut(f,g,v,y,w,p){let m=0;return f===0?g:(f/=y/2)===2?g+v:(p||(p=y*(.3*1.5)),!w||w<Math.abs(v)?(w=v,m=p/4):m=p/(2*Math.PI)*Math.asin(v/w),f<1?-.5*(w*Math.pow(2,10*(f-=1))*Math.sin((f*y-m)*(2*Math.PI)/p))+g:w*Math.pow(2,-10*(f-=1))*Math.sin((f*y-m)*(2*Math.PI)/p)*.5+v+g)},BounceEaseOut(f,g,v,y){return(f/=y)<1/2.75?v*(7.5625*f*f)+g:f<2/2.75?v*(7.5625*(f-=1.5/2.75)*f+.75)+g:f<2.5/2.75?v*(7.5625*(f-=2.25/2.75)*f+.9375)+g:v*(7.5625*(f-=2.625/2.75)*f+.984375)+g},BounceEaseIn(f,g,v,y){return v-e.Easings.BounceEaseOut(y-f,0,v,y)+g},BounceEaseInOut(f,g,v,y){return f<y/2?e.Easings.BounceEaseIn(f*2,0,v,y)*.5+g:e.Easings.BounceEaseOut(f*2-y,0,v,y)*.5+v*.5+g},EaseIn(f,g,v,y){return v*(f/=y)*f+g},EaseOut(f,g,v,y){return-v*(f/=y)*(f-2)+g},EaseInOut(f,g,v,y){return(f/=y/2)<1?v/2*f*f+g:-v/2*(--f*(f-2)-1)+g},StrongEaseIn(f,g,v,y){return v*(f/=y)*f*f*f*f+g},StrongEaseOut(f,g,v,y){return v*((f=f/y-1)*f*f*f*f+1)+g},StrongEaseInOut(f,g,v,y){return(f/=y/2)<1?v/2*f*f*f*f*f+g:v/2*((f-=2)*f*f*f*f+2)+g},Linear(f,g,v,y){return v*f/y+g}}}(Cr)),Cr}var hu;function Yv(){return hu||(hu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=te(),n=fe(),r=me(),i=Hn(),a=zv(),s=zp(),o=jv(),l=dc(),c=uc(),u=Ce(),d=hc(),h=$v(),f=Hp(),g=Un();e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:a.Stage,stages:a.stages,Layer:s.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:c.DD,Shape:u.Shape,shapes:u.shapes,Animation:d.Animation,Tween:h.Tween,Easings:h.Easings,Context:f.Context,Canvas:g.Canvas}),e.default=e.Konva}(pr)),pr}var At={},fu;function Kv(){if(fu)return At;fu=1,Object.defineProperty(At,"__esModule",{value:!0}),At.Arc=void 0;const e=re(),t=Ce(),n=te(),r=ae(),i=te();let a=class extends t.Shape{_sceneFunc(o){const l=n.Konva.getAngle(this.angle()),c=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,c),o.arc(0,0,this.innerRadius(),l,0,!c),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),c=this.clockwise(),u=n.Konva.getAngle(c?360-this.angle():this.angle()),d=Math.cos(Math.min(u,Math.PI)),h=1,f=Math.sin(Math.min(Math.max(Math.PI,u),3*Math.PI/2)),g=Math.sin(Math.min(u,Math.PI/2)),v=d*(d>0?o:l),y=h*l,w=f*(f>0?o:l),p=g*(g>0?l:o);return{x:v,y:c?-1*p:w,width:y-v,height:p-w}}};return At.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,i._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1,(0,r.getBooleanValidator)()),At}var Pt={},It={},gu;function jp(){if(gu)return It;gu=1,Object.defineProperty(It,"__esModule",{value:!0}),It.Line=void 0;const e=re(),t=te(),n=Ce(),r=ae();function i(o,l,c,u,d,h,f){const g=Math.sqrt(Math.pow(c-o,2)+Math.pow(u-l,2)),v=Math.sqrt(Math.pow(d-c,2)+Math.pow(h-u,2)),y=f*g/(g+v),w=f*v/(g+v),p=c-y*(d-o),m=u-y*(h-l),_=c+w*(d-o),C=u+w*(h-l);return[p,m,_,C]}function a(o,l){const c=o.length,u=[];for(let d=2;d<c-2;d+=2){const h=i(o[d-2],o[d-1],o[d],o[d+1],o[d+2],o[d+3],l);isNaN(h[0])||(u.push(h[0]),u.push(h[1]),u.push(o[d]),u.push(o[d+1]),u.push(h[2]),u.push(h[3]))}return u}let s=class extends n.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){let c=this.points(),u=c.length,d=this.tension(),h=this.closed(),f=this.bezier(),g,v,y;if(u){if(l.beginPath(),l.moveTo(c[0],c[1]),d!==0&&u>4){for(g=this.getTensionPoints(),v=g.length,y=h?0:4,h||l.quadraticCurveTo(g[0],g[1],g[2],g[3]);y<v-2;)l.bezierCurveTo(g[y++],g[y++],g[y++],g[y++],g[y++],g[y++]);h||l.quadraticCurveTo(g[v-2],g[v-1],c[u-2],c[u-1])}else if(f)for(y=2;y<u;)l.bezierCurveTo(c[y++],c[y++],c[y++],c[y++],c[y++],c[y++]);else for(y=2;y<u;y+=2)l.lineTo(c[y],c[y+1]);h?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),c=l.length,u=this.tension(),d=i(l[c-2],l[c-1],l[0],l[1],l[2],l[3],u),h=i(l[c-4],l[c-3],l[c-2],l[c-1],l[0],l[1],u),f=a(l,u);return[d[2],d[3]].concat(f).concat([h[0],h[1],l[c-2],l[c-1],h[2],h[3],d[0],d[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let c=l[0],u=l[0],d=l[1],h=l[1],f,g;for(let v=0;v<l.length/2;v++)f=l[v*2],g=l[v*2+1],c=Math.min(c,f),u=Math.max(u,f),d=Math.min(d,g),h=Math.max(h,g);return{x:c,y:d,width:u-c,height:h-d}}};return It.Line=s,s.prototype.className="Line",s.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"closed",!1),e.Factory.addGetterSetter(s,"bezier",!1),e.Factory.addGetterSetter(s,"tension",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"points",[],(0,r.getNumberArrayValidator)()),It}var kt={},Sr={},pu;function Xv(){return pu||(pu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(s,o,l)=>{let c,u;const h=l/2;c=0;for(let f=0;f<20;f++)u=h*e.tValues[20][f]+h,c+=e.cValues[20][f]*r(s,o,u);return h*c};e.getCubicArcLength=t;const n=(s,o,l)=>{l===void 0&&(l=1);const c=s[0]-2*s[1]+s[2],u=o[0]-2*o[1]+o[2],d=2*s[1]-2*s[0],h=2*o[1]-2*o[0],f=4*(c*c+u*u),g=4*(c*d+u*h),v=d*d+h*h;if(f===0)return l*Math.sqrt(Math.pow(s[2]-s[0],2)+Math.pow(o[2]-o[0],2));const y=g/(2*f),w=v/f,p=l+y,m=w-y*y,_=p*p+m>0?Math.sqrt(p*p+m):0,C=y*y+m>0?Math.sqrt(y*y+m):0,x=y+Math.sqrt(y*y+m)!==0?m*Math.log(Math.abs((p+_)/(y+C))):0;return Math.sqrt(f)/2*(p*_-y*C+x)};e.getQuadraticArcLength=n;function r(s,o,l){const c=i(1,l,s),u=i(1,l,o),d=c*c+u*u;return Math.sqrt(d)}const i=(s,o,l)=>{const c=l.length-1;let u,d;if(c===0)return 0;if(s===0){d=0;for(let h=0;h<=c;h++)d+=e.binomialCoefficients[c][h]*Math.pow(1-o,c-h)*Math.pow(o,h)*l[h];return d}else{u=new Array(c);for(let h=0;h<c;h++)u[h]=c*(l[h+1]-l[h]);return i(s-1,o,u)}},a=(s,o,l)=>{let c=1,u=s/o,d=(s-l(u))/o,h=0;for(;c>.001;){const f=l(u+d),g=Math.abs(s-f)/o;if(g<c)c=g,u+=d;else{const v=l(u-d),y=Math.abs(s-v)/o;y<c?(c=y,u-=d):d/=2}if(h++,h>500)break}return u};e.t2length=a}(Sr)),Sr}var mu;function fc(){if(mu)return kt;mu=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.Path=void 0;const e=re(),t=Ce(),n=te(),r=Xv();let i=class Pe extends t.Shape{constructor(s){super(s),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Pe.parsePathData(this.data()),this.pathLength=Pe.getPathLength(this.dataArray)}_sceneFunc(s){const o=this.dataArray;s.beginPath();let l=!1;for(let _=0;_<o.length;_++){const C=o[_].command,x=o[_].points;switch(C){case"L":s.lineTo(x[0],x[1]);break;case"M":s.moveTo(x[0],x[1]);break;case"C":s.bezierCurveTo(x[0],x[1],x[2],x[3],x[4],x[5]);break;case"Q":s.quadraticCurveTo(x[0],x[1],x[2],x[3]);break;case"A":var c=x[0],u=x[1],d=x[2],h=x[3],f=x[4],g=x[5],v=x[6],y=x[7],w=d>h?d:h,p=d>h?1:d/h,m=d>h?h/d:1;s.translate(c,u),s.rotate(v),s.scale(p,m),s.arc(0,0,w,f,f+g,1-y),s.scale(1/p,1/m),s.rotate(-v),s.translate(-c,-u);break;case"z":l=!0,s.closePath();break}}!l&&!this.hasFill()?s.strokeShape(this):s.fillStrokeShape(this)}getSelfRect(){let s=[];this.dataArray.forEach(function(f){if(f.command==="A"){const g=f.points[4],v=f.points[5],y=f.points[4]+v;let w=Math.PI/180;if(Math.abs(g-y)<w&&(w=Math.abs(g-y)),v<0)for(let p=g-w;p>y;p-=w){const m=Pe.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],p,0);s.push(m.x,m.y)}else for(let p=g+w;p<y;p+=w){const m=Pe.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],p,0);s.push(m.x,m.y)}}else if(f.command==="C")for(let g=0;g<=1;g+=.01){const v=Pe.getPointOnCubicBezier(g,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);s.push(v.x,v.y)}else s=s.concat(f.points)});let o=s[0],l=s[0],c=s[1],u=s[1],d,h;for(let f=0;f<s.length/2;f++)d=s[f*2],h=s[f*2+1],isNaN(d)||(o=Math.min(o,d),l=Math.max(l,d)),isNaN(h)||(c=Math.min(c,h),u=Math.max(u,h));return{x:o,y:c,width:l-o,height:u-c}}getLength(){return this.pathLength}getPointAtLength(s){return Pe.getPointAtLengthOfDataArray(s,this.dataArray)}static getLineLength(s,o,l,c){return Math.sqrt((l-s)*(l-s)+(c-o)*(c-o))}static getPathLength(s){let o=0;for(let l=0;l<s.length;++l)o+=s[l].pathLength;return o}static getPointAtLengthOfDataArray(s,o){let l,c=0,u=o.length;if(!u)return null;for(;c<u&&s>o[c].pathLength;)s-=o[c].pathLength,++c;if(c===u)return l=o[c-1].points.slice(-2),{x:l[0],y:l[1]};if(s<.01)return l=o[c].points.slice(0,2),{x:l[0],y:l[1]};const d=o[c],h=d.points;switch(d.command){case"L":return Pe.getPointOnLine(s,d.start.x,d.start.y,h[0],h[1]);case"C":return Pe.getPointOnCubicBezier((0,r.t2length)(s,Pe.getPathLength(o),_=>(0,r.getCubicArcLength)([d.start.x,h[0],h[2],h[4]],[d.start.y,h[1],h[3],h[5]],_)),d.start.x,d.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return Pe.getPointOnQuadraticBezier((0,r.t2length)(s,Pe.getPathLength(o),_=>(0,r.getQuadraticArcLength)([d.start.x,h[0],h[2]],[d.start.y,h[1],h[3]],_)),d.start.x,d.start.y,h[0],h[1],h[2],h[3]);case"A":var f=h[0],g=h[1],v=h[2],y=h[3],w=h[4],p=h[5],m=h[6];return w+=p*s/d.pathLength,Pe.getPointOnEllipticalArc(f,g,v,y,w,m)}return null}static getPointOnLine(s,o,l,c,u,d,h){d=d??o,h=h??l;const f=this.getLineLength(o,l,c,u);if(f<1e-10)return{x:o,y:l};if(c===o)return{x:d,y:h+(u>l?s:-s)};const g=(u-l)/(c-o),v=Math.sqrt(s*s/(1+g*g))*(c<o?-1:1),y=g*v;if(Math.abs(h-l-g*(d-o))<1e-10)return{x:d+v,y:h+y};const w=((d-o)*(c-o)+(h-l)*(u-l))/(f*f),p=o+w*(c-o),m=l+w*(u-l),_=this.getLineLength(d,h,p,m),C=Math.sqrt(s*s-_*_),x=Math.sqrt(C*C/(1+g*g))*(c<o?-1:1),P=g*x;return{x:p+x,y:m+P}}static getPointOnCubicBezier(s,o,l,c,u,d,h,f,g){function v(C){return C*C*C}function y(C){return 3*C*C*(1-C)}function w(C){return 3*C*(1-C)*(1-C)}function p(C){return(1-C)*(1-C)*(1-C)}const m=f*v(s)+d*y(s)+c*w(s)+o*p(s),_=g*v(s)+h*y(s)+u*w(s)+l*p(s);return{x:m,y:_}}static getPointOnQuadraticBezier(s,o,l,c,u,d,h){function f(p){return p*p}function g(p){return 2*p*(1-p)}function v(p){return(1-p)*(1-p)}const y=d*f(s)+c*g(s)+o*v(s),w=h*f(s)+u*g(s)+l*v(s);return{x:y,y:w}}static getPointOnEllipticalArc(s,o,l,c,u,d){const h=Math.cos(d),f=Math.sin(d),g={x:l*Math.cos(u),y:c*Math.sin(u)};return{x:s+(g.x*h-g.y*f),y:o+(g.x*f+g.y*h)}}static parsePathData(s){if(!s)return[];let o=s;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(var c=0;c<l.length;c++)o=o.replace(new RegExp(l[c],"g"),"|"+l[c]);const u=o.split("|"),d=[],h=[];let f=0,g=0;const v=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(c=1;c<u.length;c++){let b=u[c],L=b.charAt(0);for(b=b.slice(1),h.length=0;y=v.exec(b);)h.push(y[0]);const S=[];for(let I=0,k=h.length;I<k;I++){if(h[I]==="00"){S.push(0,0);continue}const D=parseFloat(h[I]);isNaN(D)?S.push(0):S.push(D)}for(;S.length>0&&!isNaN(S[0]);){let I="",k=[];const D=f,F=g;var w,p,m,_,C,x,P,R,T,E;switch(L){case"l":f+=S.shift(),g+=S.shift(),I="L",k.push(f,g);break;case"L":f=S.shift(),g=S.shift(),k.push(f,g);break;case"m":var A=S.shift(),N=S.shift();if(f+=A,g+=N,I="M",d.length>2&&d[d.length-1].command==="z"){for(let O=d.length-2;O>=0;O--)if(d[O].command==="M"){f=d[O].points[0]+A,g=d[O].points[1]+N;break}}k.push(f,g),L="l";break;case"M":f=S.shift(),g=S.shift(),I="M",k.push(f,g),L="L";break;case"h":f+=S.shift(),I="L",k.push(f,g);break;case"H":f=S.shift(),I="L",k.push(f,g);break;case"v":g+=S.shift(),I="L",k.push(f,g);break;case"V":g=S.shift(),I="L",k.push(f,g);break;case"C":k.push(S.shift(),S.shift(),S.shift(),S.shift()),f=S.shift(),g=S.shift(),k.push(f,g);break;case"c":k.push(f+S.shift(),g+S.shift(),f+S.shift(),g+S.shift()),f+=S.shift(),g+=S.shift(),I="C",k.push(f,g);break;case"S":p=f,m=g,w=d[d.length-1],w.command==="C"&&(p=f+(f-w.points[2]),m=g+(g-w.points[3])),k.push(p,m,S.shift(),S.shift()),f=S.shift(),g=S.shift(),I="C",k.push(f,g);break;case"s":p=f,m=g,w=d[d.length-1],w.command==="C"&&(p=f+(f-w.points[2]),m=g+(g-w.points[3])),k.push(p,m,f+S.shift(),g+S.shift()),f+=S.shift(),g+=S.shift(),I="C",k.push(f,g);break;case"Q":k.push(S.shift(),S.shift()),f=S.shift(),g=S.shift(),k.push(f,g);break;case"q":k.push(f+S.shift(),g+S.shift()),f+=S.shift(),g+=S.shift(),I="Q",k.push(f,g);break;case"T":p=f,m=g,w=d[d.length-1],w.command==="Q"&&(p=f+(f-w.points[0]),m=g+(g-w.points[1])),f=S.shift(),g=S.shift(),I="Q",k.push(p,m,f,g);break;case"t":p=f,m=g,w=d[d.length-1],w.command==="Q"&&(p=f+(f-w.points[0]),m=g+(g-w.points[1])),f+=S.shift(),g+=S.shift(),I="Q",k.push(p,m,f,g);break;case"A":_=S.shift(),C=S.shift(),x=S.shift(),P=S.shift(),R=S.shift(),T=f,E=g,f=S.shift(),g=S.shift(),I="A",k=this.convertEndpointToCenterParameterization(T,E,f,g,P,R,_,C,x);break;case"a":_=S.shift(),C=S.shift(),x=S.shift(),P=S.shift(),R=S.shift(),T=f,E=g,f+=S.shift(),g+=S.shift(),I="A",k=this.convertEndpointToCenterParameterization(T,E,f,g,P,R,_,C,x);break}d.push({command:I||L,points:k,start:{x:D,y:F},pathLength:this.calcLength(D,F,I||L,k)})}(L==="z"||L==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(s,o,l,c){let u,d,h,f;const g=Pe;switch(l){case"L":return g.getLineLength(s,o,c[0],c[1]);case"C":return(0,r.getCubicArcLength)([s,c[0],c[2],c[4]],[o,c[1],c[3],c[5]],1);case"Q":return(0,r.getQuadraticArcLength)([s,c[0],c[2]],[o,c[1],c[3]],1);case"A":u=0;var v=c[4],y=c[5],w=c[4]+y,p=Math.PI/180;if(Math.abs(v-w)<p&&(p=Math.abs(v-w)),d=g.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],v,0),y<0)for(f=v-p;f>w;f-=p)h=g.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],f,0),u+=g.getLineLength(d.x,d.y,h.x,h.y),d=h;else for(f=v+p;f<w;f+=p)h=g.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],f,0),u+=g.getLineLength(d.x,d.y,h.x,h.y),d=h;return h=g.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],w,0),u+=g.getLineLength(d.x,d.y,h.x,h.y),u}return 0}static convertEndpointToCenterParameterization(s,o,l,c,u,d,h,f,g){const v=g*(Math.PI/180),y=Math.cos(v)*(s-l)/2+Math.sin(v)*(o-c)/2,w=-1*Math.sin(v)*(s-l)/2+Math.cos(v)*(o-c)/2,p=y*y/(h*h)+w*w/(f*f);p>1&&(h*=Math.sqrt(p),f*=Math.sqrt(p));let m=Math.sqrt((h*h*(f*f)-h*h*(w*w)-f*f*(y*y))/(h*h*(w*w)+f*f*(y*y)));u===d&&(m*=-1),isNaN(m)&&(m=0);const _=m*h*w/f,C=m*-f*y/h,x=(s+l)/2+Math.cos(v)*_-Math.sin(v)*C,P=(o+c)/2+Math.sin(v)*_+Math.cos(v)*C,R=function(S){return Math.sqrt(S[0]*S[0]+S[1]*S[1])},T=function(S,I){return(S[0]*I[0]+S[1]*I[1])/(R(S)*R(I))},E=function(S,I){return(S[0]*I[1]<S[1]*I[0]?-1:1)*Math.acos(T(S,I))},A=E([1,0],[(y-_)/h,(w-C)/f]),N=[(y-_)/h,(w-C)/f],b=[(-1*y-_)/h,(-1*w-C)/f];let L=E(N,b);return T(N,b)<=-1&&(L=Math.PI),T(N,b)>=1&&(L=0),d===0&&L>0&&(L=L-2*Math.PI),d===1&&L<0&&(L=L+2*Math.PI),[x,P,h,f,A,L,v,d]}};return kt.Path=i,i.prototype.className="Path",i.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(i),e.Factory.addGetterSetter(i,"data"),kt}var vu;function Jv(){if(vu)return Pt;vu=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Arrow=void 0;const e=re(),t=jp(),n=ae(),r=te(),i=fc();let a=class extends t.Line{_sceneFunc(o){super._sceneFunc(o);const l=Math.PI*2,c=this.points();let u=c;const d=this.tension()!==0&&c.length>4;d&&(u=this.getTensionPoints());const h=this.pointerLength(),f=c.length;let g,v;if(d){const p=[u[u.length-4],u[u.length-3],u[u.length-2],u[u.length-1],c[f-2],c[f-1]],m=i.Path.calcLength(u[u.length-4],u[u.length-3],"C",p),_=i.Path.getPointOnQuadraticBezier(Math.min(1,1-h/m),p[0],p[1],p[2],p[3],p[4],p[5]);g=c[f-2]-_.x,v=c[f-1]-_.y}else g=c[f-2]-c[f-4],v=c[f-1]-c[f-3];const y=(Math.atan2(v,g)+l)%l,w=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(c[f-2],c[f-1]),o.rotate(y),o.moveTo(0,0),o.lineTo(-h,w/2),o.lineTo(-h,-w/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(c[0],c[1]),d?(g=(u[0]+u[2])/2-c[0],v=(u[1]+u[3])/2-c[1]):(g=c[2]-c[0],v=c[3]-c[1]),o.rotate((Math.atan2(-v,-g)+l)%l),o.moveTo(0,0),o.lineTo(-h,w/2),o.lineTo(-h,-w/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x,y:o.y-l,width:o.width,height:o.height+l*2}}};return Pt.Arrow=a,a.prototype.className="Arrow",(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"pointerLength",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerWidth",10,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerAtBeginning",!1),e.Factory.addGetterSetter(a,"pointerAtEnding",!0),Pt}var Mt={},yu;function Zv(){if(yu)return Mt;yu=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.Circle=void 0;const e=re(),t=Ce(),n=ae(),r=te();let i=class extends t.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius()!==s/2&&this.radius(s/2)}setHeight(s){this.radius()!==s/2&&this.radius(s/2)}};return Mt.Circle=i,i.prototype._centroid=!0,i.prototype.className="Circle",i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),Mt}var Nt={},_u;function Qv(){if(_u)return Nt;_u=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.Ellipse=void 0;const e=re(),t=Ce(),n=ae(),r=te();let i=class extends t.Shape{_sceneFunc(s){const o=this.radiusX(),l=this.radiusY();s.beginPath(),s.save(),o!==l&&s.scale(1,l/o),s.arc(0,0,o,0,Math.PI*2,!1),s.restore(),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(s){this.radiusX(s/2)}setHeight(s){this.radiusY(s/2)}};return Nt.Ellipse=i,i.prototype.className="Ellipse",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(i),e.Factory.addComponentsGetterSetter(i,"radius",["x","y"]),e.Factory.addGetterSetter(i,"radiusX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"radiusY",0,(0,n.getNumberValidator)()),Nt}var qt={},bu;function ey(){if(bu)return qt;bu=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.Image=void 0;const e=fe(),t=re(),n=Ce(),r=te(),i=ae();let a=class $p extends n.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),l=this.hasShadow();return o&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),c=this.getHeight(),u=this.cornerRadius(),d=this.attrs.image;let h;if(d){const f=this.attrs.cropWidth,g=this.attrs.cropHeight;f&&g?h=[d,this.cropX(),this.cropY(),f,g,0,0,l,c]:h=[d,0,0,l,c]}(this.hasFill()||this.hasStroke()||u)&&(o.beginPath(),u?e.Util.drawRoundedRectPath(o,l,c,u):o.rect(0,0,l,c),o.closePath(),o.fillStrokeShape(this)),d&&(u&&o.clip(),o.drawImage.apply(o,h))}_hitFunc(o){const l=this.width(),c=this.height(),u=this.cornerRadius();o.beginPath(),u?e.Util.drawRoundedRectPath(o,l,c,u):o.rect(0,0,l,c),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return(o=this.attrs.width)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var o,l;return(o=this.attrs.height)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(o,l,c=null){const u=e.Util.createImageElement();u.onload=function(){const d=new $p({image:u});l(d)},u.onerror=c,u.crossOrigin="Anonymous",u.src=o}};return qt.Image=a,a.prototype.className="Image",(0,r._registerNode)(a),t.Factory.addGetterSetter(a,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(a,"image"),t.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(a,"cropX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropY",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropWidth",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropHeight",0,(0,i.getNumberValidator)()),qt}var tt={},wu;function ty(){if(wu)return tt;wu=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.Tag=tt.Label=void 0;const e=re(),t=Ce(),n=dc(),r=ae(),i=te(),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],s="Change.konva",o="none",l="up",c="right",u="down",d="left",h=a.length;let f=class extends n.Group{constructor(y){super(y),this.on("add.konva",function(w){this._addListeners(w.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(y){let w=this,p;const m=function(){w._sync()};for(p=0;p<h;p++)y.on(a[p]+s,m)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let y=this.getText(),w=this.getTag(),p,m,_,C,x,P,R;if(y&&w){switch(p=y.width(),m=y.height(),_=w.pointerDirection(),C=w.pointerWidth(),R=w.pointerHeight(),x=0,P=0,_){case l:x=p/2,P=-1*R;break;case c:x=p+C,P=m/2;break;case u:x=p/2,P=m+R;break;case d:x=-1*C,P=m/2;break}w.setAttrs({x:-1*x,y:-1*P,width:p,height:m}),y.setAttrs({x:-1*x,y:-1*P})}}};tt.Label=f,f.prototype.className="Label",(0,i._registerNode)(f);class g extends t.Shape{_sceneFunc(y){const w=this.width(),p=this.height(),m=this.pointerDirection(),_=this.pointerWidth(),C=this.pointerHeight(),x=this.cornerRadius();let P=0,R=0,T=0,E=0;typeof x=="number"?P=R=T=E=Math.min(x,w/2,p/2):(P=Math.min(x[0]||0,w/2,p/2),R=Math.min(x[1]||0,w/2,p/2),E=Math.min(x[2]||0,w/2,p/2),T=Math.min(x[3]||0,w/2,p/2)),y.beginPath(),y.moveTo(P,0),m===l&&(y.lineTo((w-_)/2,0),y.lineTo(w/2,-1*C),y.lineTo((w+_)/2,0)),y.lineTo(w-R,0),y.arc(w-R,R,R,Math.PI*3/2,0,!1),m===c&&(y.lineTo(w,(p-C)/2),y.lineTo(w+_,p/2),y.lineTo(w,(p+C)/2)),y.lineTo(w,p-E),y.arc(w-E,p-E,E,0,Math.PI/2,!1),m===u&&(y.lineTo((w+_)/2,p),y.lineTo(w/2,p+C),y.lineTo((w-_)/2,p)),y.lineTo(T,p),y.arc(T,p-T,T,Math.PI/2,Math.PI,!1),m===d&&(y.lineTo(0,(p+C)/2),y.lineTo(-1*_,p/2),y.lineTo(0,(p-C)/2)),y.lineTo(0,P),y.arc(P,P,P,Math.PI,Math.PI*3/2,!1),y.closePath(),y.fillStrokeShape(this)}getSelfRect(){let y=0,w=0,p=this.pointerWidth(),m=this.pointerHeight(),_=this.pointerDirection(),C=this.width(),x=this.height();return _===l?(w-=m,x+=m):_===u?x+=m:_===d?(y-=p*1.5,C+=p):_===c&&(C+=p*1.5),{x:y,y:w,width:C,height:x}}}return tt.Tag=g,g.prototype.className="Tag",(0,i._registerNode)(g),e.Factory.addGetterSetter(g,"pointerDirection",o),e.Factory.addGetterSetter(g,"pointerWidth",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(g,"pointerHeight",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(g,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),tt}var Ft={},Cu;function Yp(){if(Cu)return Ft;Cu=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.Rect=void 0;const e=re(),t=Ce(),n=te(),r=fe(),i=ae();let a=class extends t.Shape{_sceneFunc(o){const l=this.cornerRadius(),c=this.width(),u=this.height();o.beginPath(),l?r.Util.drawRoundedRectPath(o,c,u,l):o.rect(0,0,c,u),o.closePath(),o.fillStrokeShape(this)}};return Ft.Rect=a,a.prototype.className="Rect",(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),Ft}var Dt={},Su;function ny(){if(Su)return Dt;Su=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.RegularPolygon=void 0;const e=re(),t=Ce(),n=ae(),r=te();let i=class extends t.Shape{_sceneFunc(s){const o=this._getPoints();s.beginPath(),s.moveTo(o[0].x,o[0].y);for(let l=1;l<o.length;l++)s.lineTo(o[l].x,o[l].y);s.closePath(),s.fillStrokeShape(this)}_getPoints(){const s=this.attrs.sides,o=this.attrs.radius||0,l=[];for(let c=0;c<s;c++)l.push({x:o*Math.sin(c*2*Math.PI/s),y:-1*o*Math.cos(c*2*Math.PI/s)});return l}getSelfRect(){const s=this._getPoints();let o=s[0].x,l=s[0].y,c=s[0].x,u=s[0].y;return s.forEach(d=>{o=Math.min(o,d.x),l=Math.max(l,d.x),c=Math.min(c,d.y),u=Math.max(u,d.y)}),{x:o,y:c,width:l-o,height:u-c}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius(s/2)}setHeight(s){this.radius(s/2)}};return Dt.RegularPolygon=i,i.prototype.className="RegularPolygon",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"sides",0,(0,n.getNumberValidator)()),Dt}var Ot={},Eu;function ry(){if(Eu)return Ot;Eu=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.Ring=void 0;const e=re(),t=Ce(),n=ae(),r=te(),i=Math.PI*2;let a=class extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,i,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),i,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return Ot.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),Ot}var Gt={},xu;function iy(){if(xu)return Gt;xu=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.Sprite=void 0;const e=re(),t=Ce(),n=hc(),r=ae(),i=te();let a=class extends t.Shape{constructor(o){super(o),this._updated=!0,this.anim=new n.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const l=this.animation(),c=this.frameIndex(),u=c*4,d=this.animations()[l],h=this.frameOffsets(),f=d[u+0],g=d[u+1],v=d[u+2],y=d[u+3],w=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,v,y),o.closePath(),o.fillStrokeShape(this)),w)if(h){const p=h[l],m=c*2;o.drawImage(w,f,g,v,y,p[m+0],p[m+1],v,y)}else o.drawImage(w,f,g,v,y,0,0,v,y)}_hitFunc(o){const l=this.animation(),c=this.frameIndex(),u=c*4,d=this.animations()[l],h=this.frameOffsets(),f=d[u+2],g=d[u+3];if(o.beginPath(),h){const v=h[l],y=c*2;o.rect(v[y+0],v[y+1],f,g)}else o.rect(0,0,f,g);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),l=this.animation(),c=this.animations(),u=c[l],d=u.length/4;o<d-1?this.frameIndex(o+1):this.frameIndex(0)}};return Gt.Sprite=a,a.prototype.className="Sprite",(0,i._registerNode)(a),e.Factory.addGetterSetter(a,"animation"),e.Factory.addGetterSetter(a,"animations"),e.Factory.addGetterSetter(a,"frameOffsets"),e.Factory.addGetterSetter(a,"image"),e.Factory.addGetterSetter(a,"frameIndex",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"frameRate",17,(0,r.getNumberValidator)()),e.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Gt}var Bt={},Lu;function ay(){if(Lu)return Bt;Lu=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.Star=void 0;const e=re(),t=Ce(),n=ae(),r=te();let i=class extends t.Shape{_sceneFunc(s){const o=this.innerRadius(),l=this.outerRadius(),c=this.numPoints();s.beginPath(),s.moveTo(0,0-l);for(let u=1;u<c*2;u++){const d=u%2===0?l:o,h=d*Math.sin(u*Math.PI/c),f=-1*d*Math.cos(u*Math.PI/c);s.lineTo(h,f)}s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}};return Bt.Star=i,i.prototype.className="Star",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(i),e.Factory.addGetterSetter(i,"numPoints",5,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"outerRadius",0,(0,n.getNumberValidator)()),Bt}var ct={},Tu;function Kp(){if(Tu)return ct;Tu=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.Text=void 0,ct.stringToArray=s;const e=fe(),t=re(),n=Ce(),r=te(),i=ae(),a=te();function s(j){return[...j].reduce((U,q,G,V)=>{if(new RegExp("\\p{Emoji}","u").test(q)){const M=V[G+1];M&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(M)?(U.push(q+M),V[G+1]=""):U.push(q)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(q+(V[G+1]||""))?U.push(q+V[G+1]):G>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(q)?U[U.length-1]+=q:q&&U.push(q);return U},[])}const o="auto",l="center",c="inherit",u="justify",d="Change.konva",h="2d",f="-",g="left",v="text",y="Text",w="top",p="bottom",m="middle",_="normal",C="px ",x=" ",P="right",R="rtl",T="word",E="char",A="none",N="…",b=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],L=b.length;function S(j){return j.split(",").map(U=>{U=U.trim();const q=U.indexOf(" ")>=0,G=U.indexOf('"')>=0||U.indexOf("'")>=0;return q&&!G&&(U=`"${U}"`),U}).join(", ")}let I;function k(){return I||(I=e.Util.createCanvasElement().getContext(h),I)}function D(j){j.fillText(this._partialText,this._partialTextX,this._partialTextY)}function F(j){j.setAttr("miterLimit",2),j.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function O(j){return j=j||{},!j.fillLinearGradientColorStops&&!j.fillRadialGradientColorStops&&!j.fillPatternImage&&(j.fill=j.fill||"black"),j}let H=class extends n.Shape{constructor(U){super(O(U)),this._partialTextX=0,this._partialTextY=0;for(let q=0;q<L;q++)this.on(b[q]+d,this._setTextData);this._setTextData()}_sceneFunc(U){const q=this.textArr,G=q.length;if(!this.text())return;let V=this.padding(),M=this.fontSize(),B=this.lineHeight()*M,W=this.verticalAlign(),z=this.direction(),Y=0,X=this.align(),Z=this.getWidth(),Q=this.letterSpacing(),K=this.fill(),de=this.textDecoration(),J=de.indexOf("underline")!==-1,ie=de.indexOf("line-through")!==-1,le;z=z===c?U.direction:z;let ne=B/2,Se=m;if(r.Konva._fixTextRendering){const De=this.measureSize("M");Se="alphabetic",ne=(De.fontBoundingBoxAscent-De.fontBoundingBoxDescent)/2+B/2}var oe=0,ce=0;for(z===R&&U.setAttr("direction",z),U.setAttr("font",this._getContextFont()),U.setAttr("textBaseline",Se),U.setAttr("textAlign",g),W===m?Y=(this.getHeight()-G*B-V*2)/2:W===p&&(Y=this.getHeight()-G*B-V*2),U.translate(V,Y+V),le=0;le<G;le++){var oe=0,ce=0,ve=q[le],Te=ve.text,Ee=ve.width,Fe=ve.lastInParagraph,xe,Be;if(U.save(),X===P?oe+=Z-Ee-V*2:X===l&&(oe+=(Z-Ee-V*2)/2),J){U.save(),U.beginPath();const Re=r.Konva._fixTextRendering?Math.round(M/4):Math.round(M/2),ye=oe,be=ne+ce+Re;U.moveTo(ye,be),xe=Te.split(" ").length-1,Be=X===u&&!Fe?Z-V*2:Ee,U.lineTo(ye+Math.round(Be),be),U.lineWidth=M/15;const dr=this._getLinearGradient();U.strokeStyle=dr||K,U.stroke(),U.restore()}if(ie){U.save(),U.beginPath();const Re=r.Konva._fixTextRendering?-Math.round(M/4):0;U.moveTo(oe,ne+ce+Re),xe=Te.split(" ").length-1,Be=X===u&&!Fe?Z-V*2:Ee,U.lineTo(oe+Math.round(Be),ne+ce+Re),U.lineWidth=M/15;const ye=this._getLinearGradient();U.strokeStyle=ye||K,U.stroke(),U.restore()}if(z!==R&&(Q!==0||X===u)){xe=Te.split(" ").length-1;const Re=s(Te);for(let ye=0;ye<Re.length;ye++){const be=Re[ye];be===" "&&!Fe&&X===u&&(oe+=(Z-V*2-Ee)/xe),this._partialTextX=oe,this._partialTextY=ne+ce,this._partialText=be,U.fillStrokeShape(this),oe+=this.measureSize(be).width+Q}}else Q!==0&&U.setAttr("letterSpacing",`${Q}px`),this._partialTextX=oe,this._partialTextY=ne+ce,this._partialText=Te,U.fillStrokeShape(this);U.restore(),G>1&&(ne+=B)}}_hitFunc(U){const q=this.getWidth(),G=this.getHeight();U.beginPath(),U.rect(0,0,q,G),U.closePath(),U.fillStrokeShape(this)}setText(U){const q=e.Util._isString(U)?U:U==null?"":U+"";return this._setAttr(v,q),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(U){var q,G,V,M,B,W,z,Y,X,Z,Q;let K=k(),de=this.fontSize(),J;K.save(),K.font=this._getContextFont(),J=K.measureText(U),K.restore();const ie=de/100;return{actualBoundingBoxAscent:(q=J.actualBoundingBoxAscent)!==null&&q!==void 0?q:71.58203125*ie,actualBoundingBoxDescent:(G=J.actualBoundingBoxDescent)!==null&&G!==void 0?G:0,actualBoundingBoxLeft:(V=J.actualBoundingBoxLeft)!==null&&V!==void 0?V:-7.421875*ie,actualBoundingBoxRight:(M=J.actualBoundingBoxRight)!==null&&M!==void 0?M:75.732421875*ie,alphabeticBaseline:(B=J.alphabeticBaseline)!==null&&B!==void 0?B:0,emHeightAscent:(W=J.emHeightAscent)!==null&&W!==void 0?W:100*ie,emHeightDescent:(z=J.emHeightDescent)!==null&&z!==void 0?z:-20*ie,fontBoundingBoxAscent:(Y=J.fontBoundingBoxAscent)!==null&&Y!==void 0?Y:91*ie,fontBoundingBoxDescent:(X=J.fontBoundingBoxDescent)!==null&&X!==void 0?X:21*ie,hangingBaseline:(Z=J.hangingBaseline)!==null&&Z!==void 0?Z:72.80000305175781*ie,ideographicBaseline:(Q=J.ideographicBaseline)!==null&&Q!==void 0?Q:-21*ie,width:J.width,height:de}}_getContextFont(){return this.fontStyle()+x+this.fontVariant()+x+(this.fontSize()+C)+S(this.fontFamily())}_addTextLine(U){this.align()===u&&(U=U.trim());const G=this._getTextWidth(U);return this.textArr.push({text:U,width:G,lastInParagraph:!1})}_getTextWidth(U){const q=this.letterSpacing(),G=U.length;return k().measureText(U).width+q*G}_setTextData(){let U=this.text().split(`
`),q=+this.fontSize(),G=0,V=this.lineHeight()*q,M=this.attrs.width,B=this.attrs.height,W=M!==o&&M!==void 0,z=B!==o&&B!==void 0,Y=this.padding(),X=M-Y*2,Z=B-Y*2,Q=0,K=this.wrap(),de=K!==A,J=K!==E&&de,ie=this.ellipsis();this.textArr=[],k().font=this._getContextFont();const le=ie?this._getTextWidth(N):0;for(let ne=0,Se=U.length;ne<Se;++ne){let oe=U[ne],ce=this._getTextWidth(oe);if(W&&ce>X)for(;oe.length>0;){let ve=0,Te=s(oe).length,Ee="",Fe=0;for(;ve<Te;){const xe=ve+Te>>>1,Be=s(oe),De=Be.slice(0,xe+1).join(""),Ve=this._getTextWidth(De);(ie&&z&&Q+V>Z?Ve+le:Ve)<=X?(ve=xe+1,Ee=De,Fe=Ve):Te=xe}if(Ee){if(J){const De=s(oe),Ve=s(Ee),Re=De[Ve.length],ye=Re===x||Re===f;let be;if(ye&&Fe<=X)be=Ve.length;else{const dr=Ve.lastIndexOf(x),Wm=Ve.lastIndexOf(f);be=Math.max(dr,Wm)+1}be>0&&(ve=be,Ee=De.slice(0,ve).join(""),Fe=this._getTextWidth(Ee))}if(Ee=Ee.trimRight(),this._addTextLine(Ee),G=Math.max(G,Fe),Q+=V,this._shouldHandleEllipsis(Q)){this._tryToAddEllipsisToLastLine();break}if(oe=s(oe).slice(ve).join("").trimLeft(),oe.length>0&&(ce=this._getTextWidth(oe),ce<=X)){this._addTextLine(oe),Q+=V,G=Math.max(G,ce);break}}else break}else this._addTextLine(oe),Q+=V,G=Math.max(G,ce),this._shouldHandleEllipsis(Q)&&ne<Se-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),z&&Q+V>Z)break}this.textHeight=q,this.textWidth=G}_shouldHandleEllipsis(U){const q=+this.fontSize(),G=this.lineHeight()*q,V=this.attrs.height,M=V!==o&&V!==void 0,B=this.padding(),W=V-B*2;return!(this.wrap()!==A)||M&&U+G>W}_tryToAddEllipsisToLastLine(){const U=this.attrs.width,q=U!==o&&U!==void 0,G=this.padding(),V=U-G*2,M=this.ellipsis(),B=this.textArr[this.textArr.length-1];!B||!M||(q&&(this._getTextWidth(B.text+N)<V||(B.text=B.text.slice(0,B.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(B.text+N))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const U=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,q=this.hasShadow();return U&&q?!0:super._useBufferCanvas()}};return ct.Text=H,H.prototype._fillFunc=D,H.prototype._strokeFunc=F,H.prototype.className=y,H.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(H),t.Factory.overWriteSetter(H,"width",(0,i.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(H,"height",(0,i.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(H,"direction",c),t.Factory.addGetterSetter(H,"fontFamily","Arial"),t.Factory.addGetterSetter(H,"fontSize",12,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(H,"fontStyle",_),t.Factory.addGetterSetter(H,"fontVariant",_),t.Factory.addGetterSetter(H,"padding",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(H,"align",g),t.Factory.addGetterSetter(H,"verticalAlign",w),t.Factory.addGetterSetter(H,"lineHeight",1,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(H,"wrap",T),t.Factory.addGetterSetter(H,"ellipsis",!1,(0,i.getBooleanValidator)()),t.Factory.addGetterSetter(H,"letterSpacing",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(H,"text","",(0,i.getStringValidator)()),t.Factory.addGetterSetter(H,"textDecoration",""),ct}var Vt={},Ru;function oy(){if(Ru)return Vt;Ru=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.TextPath=void 0;const e=fe(),t=re(),n=Ce(),r=fc(),i=Kp(),a=ae(),s=te(),o="",l="normal";function c(h){h.fillText(this.partialText,0,0)}function u(h){h.strokeText(this.partialText,0,0)}let d=class extends n.Shape{constructor(f){super(f),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(f){if(!this.attrs.data)return null;const g=this.pathLength;return f-1>g?null:r.Path.getPointAtLengthOfDataArray(f,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(f){f.setAttr("font",this._getContextFont()),f.setAttr("textBaseline",this.textBaseline()),f.setAttr("textAlign","left"),f.save();const g=this.textDecoration(),v=this.fill(),y=this.fontSize(),w=this.glyphInfo;g==="underline"&&f.beginPath();for(let p=0;p<w.length;p++){f.save();const m=w[p].p0;f.translate(m.x,m.y),f.rotate(w[p].rotation),this.partialText=w[p].text,f.fillStrokeShape(this),g==="underline"&&(p===0&&f.moveTo(0,y/2+1),f.lineTo(y,y/2+1)),f.restore()}g==="underline"&&(f.strokeStyle=v,f.lineWidth=y/20,f.stroke()),f.restore()}_hitFunc(f){f.beginPath();const g=this.glyphInfo;if(g.length>=1){const v=g[0].p0;f.moveTo(v.x,v.y)}for(let v=0;v<g.length;v++){const y=g[v].p1;f.lineTo(y.x,y.y)}f.setAttr("lineWidth",this.fontSize()),f.setAttr("strokeStyle",this.colorKey),f.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(f){return i.Text.prototype.setText.call(this,f)}_getContextFont(){return i.Text.prototype._getContextFont.call(this)}_getTextSize(f){const v=this.dummyCanvas.getContext("2d");v.save(),v.font=this._getContextFont();const y=v.measureText(f);return v.restore(),{width:y.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:f,height:g}=this._getTextSize(this.attrs.text);if(this.textWidth=f,this.textHeight=g,this.glyphInfo=[],!this.attrs.data)return null;const v=this.letterSpacing(),y=this.align(),w=this.kerningFunc(),p=Math.max(this.textWidth+((this.attrs.text||"").length-1)*v,0);let m=0;y==="center"&&(m=Math.max(0,this.pathLength/2-p/2)),y==="right"&&(m=Math.max(0,this.pathLength-p));const _=(0,i.stringToArray)(this.text());let C=m;for(let x=0;x<_.length;x++){const P=this._getPointAtLength(C);if(!P)return;let R=this._getTextSize(_[x]).width+v;if(_[x]===" "&&y==="justify"){const L=this.text().split(" ").length-1;R+=(this.pathLength-p)/L}const T=this._getPointAtLength(C+R);if(!T)return;const E=r.Path.getLineLength(P.x,P.y,T.x,T.y);let A=0;if(w)try{A=w(_[x-1],_[x])*this.fontSize()}catch{A=0}P.x+=A,T.x+=A,this.textWidth+=A;const N=r.Path.getPointOnLine(A+E/2,P.x,P.y,T.x,T.y),b=Math.atan2(T.y-P.y,T.x-P.x);this.glyphInfo.push({transposeX:N.x,transposeY:N.y,text:_[x],rotation:b,p0:P,p1:T}),C+=R}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const f=[];this.glyphInfo.forEach(function(C){f.push(C.p0.x),f.push(C.p0.y),f.push(C.p1.x),f.push(C.p1.y)});let g=f[0]||0,v=f[0]||0,y=f[1]||0,w=f[1]||0,p,m;for(let C=0;C<f.length/2;C++)p=f[C*2],m=f[C*2+1],g=Math.min(g,p),v=Math.max(v,p),y=Math.min(y,m),w=Math.max(w,m);const _=this.fontSize();return{x:g-_/2,y:y-_/2,width:v-g+_,height:w-y+_}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Vt.TextPath=d,d.prototype._fillFunc=c,d.prototype._strokeFunc=u,d.prototype._fillFuncHit=c,d.prototype._strokeFuncHit=u,d.prototype.className="TextPath",d.prototype._attrsAffectingSize=["text","fontSize","data"],(0,s._registerNode)(d),t.Factory.addGetterSetter(d,"data"),t.Factory.addGetterSetter(d,"fontFamily","Arial"),t.Factory.addGetterSetter(d,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(d,"fontStyle",l),t.Factory.addGetterSetter(d,"align","left"),t.Factory.addGetterSetter(d,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(d,"textBaseline","middle"),t.Factory.addGetterSetter(d,"fontVariant",l),t.Factory.addGetterSetter(d,"text",o),t.Factory.addGetterSetter(d,"textDecoration",""),t.Factory.addGetterSetter(d,"kerningFunc",void 0),Vt}var Ut={},Au;function sy(){if(Au)return Ut;Au=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.Transformer=void 0;const e=fe(),t=re(),n=me(),r=Ce(),i=Yp(),a=dc(),s=te(),o=ae(),l=te(),c="tr-konva",u=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(R=>R+`.${c}`).join(" "),d="nodesRect",h=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],f={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in s.Konva._global;function v(R,T,E){if(R==="rotater")return E;T+=e.Util.degToRad(f[R]||0);const A=(e.Util.radToDeg(T)%360+360)%360;return e.Util._inRange(A,315+22.5,360)||e.Util._inRange(A,0,22.5)?"ns-resize":e.Util._inRange(A,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(A,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(A,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(A,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(A,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(A,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(A,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+A),"pointer")}const y=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function w(R){return{x:R.x+R.width/2*Math.cos(R.rotation)+R.height/2*Math.sin(-R.rotation),y:R.y+R.height/2*Math.cos(R.rotation)+R.width/2*Math.sin(R.rotation)}}function p(R,T,E){const A=E.x+(R.x-E.x)*Math.cos(T)-(R.y-E.y)*Math.sin(T),N=E.y+(R.x-E.x)*Math.sin(T)+(R.y-E.y)*Math.cos(T);return{...R,rotation:R.rotation+T,x:A,y:N}}function m(R,T){const E=w(R);return p(R,T,E)}function _(R,T,E){let A=T;for(let N=0;N<R.length;N++){const b=s.Konva.getAngle(R[N]),L=Math.abs(b-T)%(Math.PI*2);Math.min(L,Math.PI*2-L)<E&&(A=b)}return A}let C=0,x=class extends a.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(u,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return c+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const E=T.filter(N=>N.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=T=E,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(N=>{const b=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(N._attrsAffectingSize.length){const L=N._attrsAffectingSize.map(S=>S+"Change."+this._getEventNamespace()).join(" ");N.on(L,b)}N.on(h.map(L=>L+`.${this._getEventNamespace()}`).join(" "),b),N.on(`absoluteTransformChange.${this._getEventNamespace()}`,b),this._proxyDrag(N)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(T){let E;T.on(`dragstart.${this._getEventNamespace()}`,A=>{E=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(A,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,A=>{if(!E)return;const N=T.getAbsolutePosition(),b=N.x-E.x,L=N.y-E.y;this.nodes().forEach(S=>{if(S===T||S.isDragging())return;const I=S.getAbsolutePosition();S.setAbsolutePosition({x:I.x+b,y:I.y+L}),S.startDrag(A)}),E=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(d),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(d,this.__getNodeRect)}__getNodeShape(T,E=this.rotation(),A){const N=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),b=T.getAbsoluteScale(A),L=T.getAbsolutePosition(A),S=N.x*b.x-T.offsetX()*b.x,I=N.y*b.y-T.offsetY()*b.y,k=(s.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),D={x:L.x+S*Math.cos(k)+I*Math.sin(-k),y:L.y+I*Math.cos(k)+S*Math.sin(k),width:N.width*b.x,height:N.height*b.y,rotation:k};return p(D,-s.Konva.getAngle(E),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const E=[];this.nodes().map(k=>{const D=k.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),F=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}],O=k.getAbsoluteTransform();F.forEach(function(H){const j=O.point(H);E.push(j)})});const A=new e.Transform;A.rotate(-s.Konva.getAngle(this.rotation()));let N=1/0,b=1/0,L=-1/0,S=-1/0;E.forEach(function(k){const D=A.point(k);N===void 0&&(N=L=D.x,b=S=D.y),N=Math.min(N,D.x),b=Math.min(b,D.y),L=Math.max(L,D.x),S=Math.max(S,D.y)}),A.invert();const I=A.point({x:N,y:b});return{x:I.x,y:I.y,width:L-N,height:S-b,rotation:s.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),y.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){const E=new i.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),A=this;E.on("mousedown touchstart",function(N){A._handleMouseDown(N)}),E.on("dragstart",N=>{E.stopDrag(),N.cancelBubble=!0}),E.on("dragend",N=>{N.cancelBubble=!0}),E.on("mouseenter",()=>{const N=s.Konva.getAngle(this.rotation()),b=this.rotateAnchorCursor(),L=v(T,N,b);E.getStage().content&&(E.getStage().content.style.cursor=L),this._cursorChange=!0}),E.on("mouseout",()=>{E.getStage().content&&(E.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(E)}_createBack(){const T=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(E,A){const N=A.getParent(),b=N.padding();E.beginPath(),E.rect(-b,-b,A.width()+b*2,A.height()+b*2),E.moveTo(A.width()/2,-b),N.rotateEnabled()&&N.rotateLineVisible()&&E.lineTo(A.width()/2,-N.rotateAnchorOffset()*e.Util._sign(A.height())-b),E.fillStrokeShape(A)},hitFunc:(E,A)=>{if(!this.shouldOverdrawWholeArea())return;const N=this.padding();E.beginPath(),E.rect(-N,-N,A.width()+N*2,A.height()+N*2),E.fillStrokeShape(A)}});this.add(T),this._proxyDrag(T),T.on("dragstart",E=>{E.cancelBubble=!0}),T.on("dragmove",E=>{E.cancelBubble=!0}),T.on("dragend",E=>{E.cancelBubble=!0}),this.on("dragmove",E=>{this.update()})}_handleMouseDown(T){if(this._transforming)return;this._movingAnchorName=T.target.name().split(" ")[0];const E=this._getNodeRect(),A=E.width,N=E.height,b=Math.sqrt(Math.pow(A,2)+Math.pow(N,2));this.sin=Math.abs(N/b),this.cos=Math.abs(A/b),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const L=T.target.getAbsolutePosition(),S=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:S.x-L.x,y:S.y-L.y},C++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(I=>{I._fire("transformstart",{evt:T.evt,target:I})})}_handleMouseMove(T){let E,A,N;const b=this.findOne("."+this._movingAnchorName),L=b.getStage();L.setPointersPositions(T);const S=L.getPointerPosition();let I={x:S.x-this._anchorDragOffset.x,y:S.y-this._anchorDragOffset.y};const k=b.getAbsolutePosition();this.anchorDragBoundFunc()&&(I=this.anchorDragBoundFunc()(k,I,T)),b.setAbsolutePosition(I);const D=b.getAbsolutePosition();if(k.x===D.x&&k.y===D.y)return;if(this._movingAnchorName==="rotater"){const W=this._getNodeRect();E=b.x()-W.width/2,A=-b.y()+W.height/2;let z=Math.atan2(-A,E)+Math.PI/2;W.height<0&&(z-=Math.PI);const X=s.Konva.getAngle(this.rotation())+z,Z=s.Konva.getAngle(this.rotationSnapTolerance()),K=_(this.rotationSnaps(),X,Z)-W.rotation,de=m(W,K);this._fitNodesInto(de,T);return}const F=this.shiftBehavior();let O;F==="inverted"?O=this.keepRatio()&&!T.shiftKey:F==="none"?O=this.keepRatio():O=this.keepRatio()||T.shiftKey;var G=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(O){var H=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};N=Math.sqrt(Math.pow(H.x-b.x(),2)+Math.pow(H.y-b.y(),2));var j=this.findOne(".top-left").x()>H.x?-1:1,U=this.findOne(".top-left").y()>H.y?-1:1;E=N*this.cos*j,A=N*this.sin*U,this.findOne(".top-left").x(H.x-E),this.findOne(".top-left").y(H.y-A)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(b.y());else if(this._movingAnchorName==="top-right"){if(O){var H=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};N=Math.sqrt(Math.pow(b.x()-H.x,2)+Math.pow(H.y-b.y(),2));var j=this.findOne(".top-right").x()<H.x?-1:1,U=this.findOne(".top-right").y()>H.y?-1:1;E=N*this.cos*j,A=N*this.sin*U,this.findOne(".top-right").x(H.x+E),this.findOne(".top-right").y(H.y-A)}var q=b.position();this.findOne(".top-left").y(q.y),this.findOne(".bottom-right").x(q.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(b.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(b.x());else if(this._movingAnchorName==="bottom-left"){if(O){var H=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};N=Math.sqrt(Math.pow(H.x-b.x(),2)+Math.pow(b.y()-H.y,2));var j=H.x<b.x()?-1:1,U=b.y()<H.y?-1:1;E=N*this.cos*j,A=N*this.sin*U,b.x(H.x-E),b.y(H.y+A)}q=b.position(),this.findOne(".top-left").x(q.x),this.findOne(".bottom-right").y(q.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(b.y());else if(this._movingAnchorName==="bottom-right"){if(O){var H=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};N=Math.sqrt(Math.pow(b.x()-H.x,2)+Math.pow(b.y()-H.y,2));var j=this.findOne(".bottom-right").x()<H.x?-1:1,U=this.findOne(".bottom-right").y()<H.y?-1:1;E=N*this.cos*j,A=N*this.sin*U,this.findOne(".bottom-right").x(H.x+E),this.findOne(".bottom-right").y(H.y+A)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var G=this.centeredScaling()||T.altKey;if(G){const W=this.findOne(".top-left"),z=this.findOne(".bottom-right"),Y=W.x(),X=W.y(),Z=this.getWidth()-z.x(),Q=this.getHeight()-z.y();z.move({x:-Y,y:-X}),W.move({x:Z,y:Q})}const V=this.findOne(".top-left").getAbsolutePosition();E=V.x,A=V.y;const M=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),B=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:E,y:A,width:M,height:B,rotation:s.Konva.getAngle(this.rotation())},T)}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var E;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const A=this.getNode();C--,this._fire("transformend",{evt:T,target:A}),(E=this.getLayer())===null||E===void 0||E.batchDraw(),A&&this._nodes.forEach(N=>{var b;N._fire("transformend",{evt:T,target:N}),(b=N.getLayer())===null||b===void 0||b.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,E){const A=this._getNodeRect(),N=1;if(e.Util._inRange(T.width,-this.padding()*2-N,N)){this.update();return}if(e.Util._inRange(T.height,-this.padding()*2-N,N)){this.update();return}const b=new e.Transform;if(b.rotate(s.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const O=b.point({x:-this.padding()*2,y:0});T.x+=O.x,T.y+=O.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=O.x,this._anchorDragOffset.y-=O.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const O=b.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=O.x,this._anchorDragOffset.y-=O.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const O=b.point({x:0,y:-this.padding()*2});T.x+=O.x,T.y+=O.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=O.x,this._anchorDragOffset.y-=O.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const O=b.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=O.x,this._anchorDragOffset.y-=O.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const O=this.boundBoxFunc()(A,T);O?T=O:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const L=1e7,S=new e.Transform;S.translate(A.x,A.y),S.rotate(A.rotation),S.scale(A.width/L,A.height/L);const I=new e.Transform,k=T.width/L,D=T.height/L;this.flipEnabled()===!1?(I.translate(T.x,T.y),I.rotate(T.rotation),I.translate(T.width<0?T.width:0,T.height<0?T.height:0),I.scale(Math.abs(k),Math.abs(D))):(I.translate(T.x,T.y),I.rotate(T.rotation),I.scale(k,D));const F=I.multiply(S.invert());this._nodes.forEach(O=>{var H;const j=O.getParent().getAbsoluteTransform(),U=O.getTransform().copy();U.translate(O.offsetX(),O.offsetY());const q=new e.Transform;q.multiply(j.copy().invert()).multiply(F).multiply(j).multiply(U);const G=q.decompose();O.setAttrs(G),(H=O.getLayer())===null||H===void 0||H.batchDraw()}),this.rotation(e.Util._getRotation(T.rotation)),this._nodes.forEach(O=>{this._fire("transform",{evt:E,target:O}),O._fire("transform",{evt:E,target:O})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,E){this.findOne(T).setAttrs(E)}update(){var T;const E=this._getNodeRect();this.rotation(e.Util._getRotation(E.rotation));const A=E.width,N=E.height,b=this.enabledAnchors(),L=this.resizeEnabled(),S=this.padding(),I=this.anchorSize(),k=this.find("._anchor");k.forEach(F=>{F.setAttrs({width:I,height:I,offsetX:I/2,offsetY:I/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:I/2+S,offsetY:I/2+S,visible:L&&b.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:A/2,y:0,offsetY:I/2+S,visible:L&&b.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:A,y:0,offsetX:I/2-S,offsetY:I/2+S,visible:L&&b.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:N/2,offsetX:I/2+S,visible:L&&b.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:A,y:N/2,offsetX:I/2-S,visible:L&&b.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:N,offsetX:I/2+S,offsetY:I/2-S,visible:L&&b.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:A/2,y:N,offsetY:I/2-S,visible:L&&b.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:A,y:N,offsetX:I/2-S,offsetY:I/2-S,visible:L&&b.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:A/2,y:-this.rotateAnchorOffset()*e.Util._sign(N)-S,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:A,height:N,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const D=this.anchorStyleFunc();D&&k.forEach(F=>{D(F)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(T){return n.Node.prototype.clone.call(this,T)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ut.Transformer=x,x.isTransforming=()=>C>0;function P(R){return R instanceof Array||e.Util.warn("enabledAnchors value should be an array"),R instanceof Array&&R.forEach(function(T){y.indexOf(T)===-1&&e.Util.warn("Unknown anchor name: "+T+". Available names are: "+y.join(", "))}),R||[]}return x.prototype.className="Transformer",(0,l._registerNode)(x),t.Factory.addGetterSetter(x,"enabledAnchors",y,P),t.Factory.addGetterSetter(x,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(x,"resizeEnabled",!0),t.Factory.addGetterSetter(x,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(x,"rotateEnabled",!0),t.Factory.addGetterSetter(x,"rotateLineVisible",!0),t.Factory.addGetterSetter(x,"rotationSnaps",[]),t.Factory.addGetterSetter(x,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(x,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(x,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(x,"borderEnabled",!0),t.Factory.addGetterSetter(x,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(x,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(x,"anchorFill","white"),t.Factory.addGetterSetter(x,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(x,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(x,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(x,"borderDash"),t.Factory.addGetterSetter(x,"keepRatio",!0),t.Factory.addGetterSetter(x,"shiftBehavior","default"),t.Factory.addGetterSetter(x,"centeredScaling",!1),t.Factory.addGetterSetter(x,"ignoreStroke",!1),t.Factory.addGetterSetter(x,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(x,"nodes"),t.Factory.addGetterSetter(x,"node"),t.Factory.addGetterSetter(x,"boundBoxFunc"),t.Factory.addGetterSetter(x,"anchorDragBoundFunc"),t.Factory.addGetterSetter(x,"anchorStyleFunc"),t.Factory.addGetterSetter(x,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(x,"useSingleNodeRotation",!0),t.Factory.backCompat(x,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Ut}var Ht={},Pu;function ly(){if(Pu)return Ht;Pu=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.Wedge=void 0;const e=re(),t=Ce(),n=te(),r=ae(),i=te();let a=class extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return Ht.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1),e.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Ht}var Wt={},Iu;function cy(){if(Iu)return Wt;Iu=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.Blur=void 0;const e=re(),t=me(),n=ae();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s(l,c){const u=l.data,d=l.width,h=l.height;let f,g,v,y,w,p,m,_,C,x,P,R,T,E,A,N,b,L,S,I,k,D,F,O;const H=c+c+1,j=d-1,U=h-1,q=c+1,G=q*(q+1)/2,V=new r,M=i[c],B=a[c];let W=null,z=V,Y=null,X=null;for(v=1;v<H;v++)z=z.next=new r,v===q&&(W=z);for(z.next=V,m=p=0,g=0;g<h;g++){for(N=b=L=S=_=C=x=P=0,R=q*(I=u[p]),T=q*(k=u[p+1]),E=q*(D=u[p+2]),A=q*(F=u[p+3]),_+=G*I,C+=G*k,x+=G*D,P+=G*F,z=V,v=0;v<q;v++)z.r=I,z.g=k,z.b=D,z.a=F,z=z.next;for(v=1;v<q;v++)y=p+((j<v?j:v)<<2),_+=(z.r=I=u[y])*(O=q-v),C+=(z.g=k=u[y+1])*O,x+=(z.b=D=u[y+2])*O,P+=(z.a=F=u[y+3])*O,N+=I,b+=k,L+=D,S+=F,z=z.next;for(Y=V,X=W,f=0;f<d;f++)u[p+3]=F=P*M>>B,F!==0?(F=255/F,u[p]=(_*M>>B)*F,u[p+1]=(C*M>>B)*F,u[p+2]=(x*M>>B)*F):u[p]=u[p+1]=u[p+2]=0,_-=R,C-=T,x-=E,P-=A,R-=Y.r,T-=Y.g,E-=Y.b,A-=Y.a,y=m+((y=f+c+1)<j?y:j)<<2,N+=Y.r=u[y],b+=Y.g=u[y+1],L+=Y.b=u[y+2],S+=Y.a=u[y+3],_+=N,C+=b,x+=L,P+=S,Y=Y.next,R+=I=X.r,T+=k=X.g,E+=D=X.b,A+=F=X.a,N-=I,b-=k,L-=D,S-=F,X=X.next,p+=4;m+=d}for(f=0;f<d;f++){for(b=L=S=N=C=x=P=_=0,p=f<<2,R=q*(I=u[p]),T=q*(k=u[p+1]),E=q*(D=u[p+2]),A=q*(F=u[p+3]),_+=G*I,C+=G*k,x+=G*D,P+=G*F,z=V,v=0;v<q;v++)z.r=I,z.g=k,z.b=D,z.a=F,z=z.next;for(w=d,v=1;v<=c;v++)p=w+f<<2,_+=(z.r=I=u[p])*(O=q-v),C+=(z.g=k=u[p+1])*O,x+=(z.b=D=u[p+2])*O,P+=(z.a=F=u[p+3])*O,N+=I,b+=k,L+=D,S+=F,z=z.next,v<U&&(w+=d);for(p=f,Y=V,X=W,g=0;g<h;g++)y=p<<2,u[y+3]=F=P*M>>B,F>0?(F=255/F,u[y]=(_*M>>B)*F,u[y+1]=(C*M>>B)*F,u[y+2]=(x*M>>B)*F):u[y]=u[y+1]=u[y+2]=0,_-=R,C-=T,x-=E,P-=A,R-=Y.r,T-=Y.g,E-=Y.b,A-=Y.a,y=f+((y=g+q)<U?y:U)*d<<2,_+=N+=Y.r=u[y],C+=b+=Y.g=u[y+1],x+=L+=Y.b=u[y+2],P+=S+=Y.a=u[y+3],Y=Y.next,R+=I=X.r,T+=k=X.g,E+=D=X.b,A+=F=X.a,N-=I,b-=k,L-=D,S-=F,X=X.next,p+=d}}const o=function(c){const u=Math.round(this.blurRadius());u>0&&s(c,u)};return Wt.Blur=o,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),Wt}var zt={},ku;function uy(){if(ku)return zt;ku=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.Brighten=void 0;const e=re(),t=me(),n=ae(),r=function(i){const a=this.brightness()*255,s=i.data,o=s.length;for(let l=0;l<o;l+=4)s[l]+=a,s[l+1]+=a,s[l+2]+=a};return zt.Brighten=r,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),zt}var jt={},Mu;function dy(){if(Mu)return jt;Mu=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.Contrast=void 0;const e=re(),t=me(),n=ae(),r=function(i){const a=Math.pow((this.contrast()+100)/100,2),s=i.data,o=s.length;let l=150,c=150,u=150;for(let d=0;d<o;d+=4)l=s[d],c=s[d+1],u=s[d+2],l/=255,l-=.5,l*=a,l+=.5,l*=255,c/=255,c-=.5,c*=a,c+=.5,c*=255,u/=255,u-=.5,u*=a,u+=.5,u*=255,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,u=u<0?0:u>255?255:u,s[d]=l,s[d+1]=c,s[d+2]=u};return jt.Contrast=r,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),jt}var $t={},Nu;function hy(){if(Nu)return $t;Nu=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.Emboss=void 0;const e=re(),t=me(),n=fe(),r=ae(),i=function(a){const s=this.embossStrength()*10,o=this.embossWhiteLevel()*255,l=this.embossDirection(),c=this.embossBlend(),u=a.data,d=a.width,h=a.height,f=d*4;let g=0,v=0,y=h;switch(l){case"top-left":g=-1,v=-1;break;case"top":g=-1,v=0;break;case"top-right":g=-1,v=1;break;case"right":g=0,v=1;break;case"bottom-right":g=1,v=1;break;case"bottom":g=1,v=0;break;case"bottom-left":g=1,v=-1;break;case"left":g=0,v=-1;break;default:n.Util.error("Unknown emboss direction: "+l)}do{const w=(y-1)*f;let p=g;y+p<1&&(p=0),y+p>h&&(p=0);const m=(y-1+p)*d*4;let _=d;do{const C=w+(_-1)*4;let x=v;_+x<1&&(x=0),_+x>d&&(x=0);const P=m+(_-1+x)*4,R=u[C]-u[P],T=u[C+1]-u[P+1],E=u[C+2]-u[P+2];let A=R;const N=A>0?A:-A,b=T>0?T:-T,L=E>0?E:-E;if(b>N&&(A=T),L>N&&(A=E),A*=s,c){const S=u[C]+A,I=u[C+1]+A,k=u[C+2]+A;u[C]=S>255?255:S<0?0:S,u[C+1]=I>255?255:I<0?0:I,u[C+2]=k>255?255:k<0?0:k}else{let S=o-A;S<0?S=0:S>255&&(S=255),u[C]=u[C+1]=u[C+2]=S}}while(--_)}while(--y)};return $t.Emboss=i,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),$t}var Yt={},qu;function fy(){if(qu)return Yt;qu=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.Enhance=void 0;const e=re(),t=me(),n=ae();function r(a,s,o,l,c){const u=o-s,d=c-l;if(u===0)return l+d/2;if(d===0)return l;let h=(a-s)/u;return h=d*h+l,h}const i=function(a){const s=a.data,o=s.length;let l=s[0],c=l,u,d=s[1],h=d,f,g=s[2],v=g,y;const w=this.enhance();if(w===0)return;for(let A=0;A<o;A+=4)u=s[A+0],u<l?l=u:u>c&&(c=u),f=s[A+1],f<d?d=f:f>h&&(h=f),y=s[A+2],y<g?g=y:y>v&&(v=y);c===l&&(c=255,l=0),h===d&&(h=255,d=0),v===g&&(v=255,g=0);let p,m,_,C,x,P,R,T,E;w>0?(m=c+w*(255-c),_=l-w*(l-0),x=h+w*(255-h),P=d-w*(d-0),T=v+w*(255-v),E=g-w*(g-0)):(p=(c+l)*.5,m=c+w*(c-p),_=l+w*(l-p),C=(h+d)*.5,x=h+w*(h-C),P=d+w*(d-C),R=(v+g)*.5,T=v+w*(v-R),E=g+w*(g-R));for(let A=0;A<o;A+=4)s[A+0]=r(s[A+0],l,c,_,m),s[A+1]=r(s[A+1],d,h,P,x),s[A+2]=r(s[A+2],g,v,E,T)};return Yt.Enhance=i,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),Yt}var Kt={},Fu;function gy(){if(Fu)return Kt;Fu=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.Grayscale=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4){const a=.34*n[i]+.5*n[i+1]+.16*n[i+2];n[i]=a,n[i+1]=a,n[i+2]=a}};return Kt.Grayscale=e,Kt}var Xt={},Du;function py(){if(Du)return Xt;Du=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.HSL=void 0;const e=re(),t=me(),n=ae();e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter);const r=function(i){const a=i.data,s=a.length,o=1,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,u=this.luminance()*127,d=o*l*Math.cos(c*Math.PI/180),h=o*l*Math.sin(c*Math.PI/180),f=.299*o+.701*d+.167*h,g=.587*o-.587*d+.33*h,v=.114*o-.114*d-.497*h,y=.299*o-.299*d-.328*h,w=.587*o+.413*d+.035*h,p=.114*o-.114*d+.293*h,m=.299*o-.3*d+1.25*h,_=.587*o-.586*d-1.05*h,C=.114*o+.886*d-.2*h;let x,P,R,T;for(let E=0;E<s;E+=4)x=a[E+0],P=a[E+1],R=a[E+2],T=a[E+3],a[E+0]=f*x+g*P+v*R+u,a[E+1]=y*x+w*P+p*R+u,a[E+2]=m*x+_*P+C*R+u,a[E+3]=T};return Xt.HSL=r,Xt}var Jt={},Ou;function my(){if(Ou)return Jt;Ou=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.HSV=void 0;const e=re(),t=me(),n=ae(),r=function(i){const a=i.data,s=a.length,o=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,u=o*l*Math.cos(c*Math.PI/180),d=o*l*Math.sin(c*Math.PI/180),h=.299*o+.701*u+.167*d,f=.587*o-.587*u+.33*d,g=.114*o-.114*u-.497*d,v=.299*o-.299*u-.328*d,y=.587*o+.413*u+.035*d,w=.114*o-.114*u+.293*d,p=.299*o-.3*u+1.25*d,m=.587*o-.586*u-1.05*d,_=.114*o+.886*u-.2*d;let C,x,P,R;for(let T=0;T<s;T+=4)C=a[T+0],x=a[T+1],P=a[T+2],R=a[T+3],a[T+0]=h*C+f*x+g*P,a[T+1]=v*C+y*x+w*P,a[T+2]=p*C+m*x+_*P,a[T+3]=R};return Jt.HSV=r,e.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),Jt}var Zt={},Gu;function vy(){if(Gu)return Zt;Gu=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.Invert=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2]};return Zt.Invert=e,Zt}var Qt={},Bu;function yy(){if(Bu)return Qt;Bu=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.Kaleidoscope=void 0;const e=re(),t=me(),n=fe(),r=ae(),i=function(o,l,c){const u=o.data,d=l.data,h=o.width,f=o.height,g=c.polarCenterX||h/2,v=c.polarCenterY||f/2;let y=Math.sqrt(g*g+v*v),w=h-g,p=f-v;const m=Math.sqrt(w*w+p*p);y=m>y?m:y;const _=f,C=h,x=360/C*Math.PI/180;for(let P=0;P<C;P+=1){const R=Math.sin(P*x),T=Math.cos(P*x);for(let E=0;E<_;E+=1){w=Math.floor(g+y*E/_*T),p=Math.floor(v+y*E/_*R);let A=(p*h+w)*4;const N=u[A+0],b=u[A+1],L=u[A+2],S=u[A+3];A=(P+E*h)*4,d[A+0]=N,d[A+1]=b,d[A+2]=L,d[A+3]=S}}},a=function(o,l,c){const u=o.data,d=l.data,h=o.width,f=o.height,g=c.polarCenterX||h/2,v=c.polarCenterY||f/2;let y=Math.sqrt(g*g+v*v),w=h-g,p=f-v;const m=Math.sqrt(w*w+p*p);y=m>y?m:y;const _=f,C=h,x=0;let P,R;for(w=0;w<h;w+=1)for(p=0;p<f;p+=1){const T=w-g,E=p-v,A=Math.sqrt(T*T+E*E)*_/y;let N=(Math.atan2(E,T)*180/Math.PI+360+x)%360;N=N*C/360,P=Math.floor(N),R=Math.floor(A);let b=(R*h+P)*4;const L=u[b+0],S=u[b+1],I=u[b+2],k=u[b+3];b=(p*h+w)*4,d[b+0]=L,d[b+1]=S,d[b+2]=I,d[b+3]=k}},s=function(o){const l=o.width,c=o.height;let u,d,h,f,g,v,y,w,p,m,_=Math.round(this.kaleidoscopePower());const C=Math.round(this.kaleidoscopeAngle()),x=Math.floor(l*(C%360)/360);if(_<1)return;const P=n.Util.createCanvasElement();P.width=l,P.height=c;const R=P.getContext("2d").getImageData(0,0,l,c);n.Util.releaseCanvas(P),i(o,R,{polarCenterX:l/2,polarCenterY:c/2});let T=l/Math.pow(2,_);for(;T<=8;)T=T*2,_-=1;T=Math.ceil(T);let E=T,A=0,N=E,b=1;for(x+T>l&&(A=E,N=0,b=-1),d=0;d<c;d+=1)for(u=A;u!==N;u+=b)h=Math.round(u+x)%l,p=(l*d+h)*4,g=R.data[p+0],v=R.data[p+1],y=R.data[p+2],w=R.data[p+3],m=(l*d+u)*4,R.data[m+0]=g,R.data[m+1]=v,R.data[m+2]=y,R.data[m+3]=w;for(d=0;d<c;d+=1)for(E=Math.floor(T),f=0;f<_;f+=1){for(u=0;u<E+1;u+=1)p=(l*d+u)*4,g=R.data[p+0],v=R.data[p+1],y=R.data[p+2],w=R.data[p+3],m=(l*d+E*2-u-1)*4,R.data[m+0]=g,R.data[m+1]=v,R.data[m+2]=y,R.data[m+3]=w;E*=2}a(R,o,{})};return Qt.Kaleidoscope=s,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Qt}var en={},Vu;function _y(){if(Vu)return en;Vu=1,Object.defineProperty(en,"__esModule",{value:!0}),en.Mask=void 0;const e=re(),t=me(),n=ae();function r(h,f,g){let v=(g*h.width+f)*4;const y=[];return y.push(h.data[v++],h.data[v++],h.data[v++],h.data[v++]),y}function i(h,f){return Math.sqrt(Math.pow(h[0]-f[0],2)+Math.pow(h[1]-f[1],2)+Math.pow(h[2]-f[2],2))}function a(h){const f=[0,0,0];for(let g=0;g<h.length;g++)f[0]+=h[g][0],f[1]+=h[g][1],f[2]+=h[g][2];return f[0]/=h.length,f[1]/=h.length,f[2]/=h.length,f}function s(h,f){const g=r(h,0,0),v=r(h,h.width-1,0),y=r(h,0,h.height-1),w=r(h,h.width-1,h.height-1),p=f||10;if(i(g,v)<p&&i(v,w)<p&&i(w,y)<p&&i(y,g)<p){const m=a([v,g,w,y]),_=[];for(let C=0;C<h.width*h.height;C++){const x=i(m,[h.data[C*4],h.data[C*4+1],h.data[C*4+2]]);_[C]=x<p?0:255}return _}}function o(h,f){for(let g=0;g<h.width*h.height;g++)h.data[4*g+3]=f[g]}function l(h,f,g){const v=[1,1,1,1,0,1,1,1,1],y=Math.round(Math.sqrt(v.length)),w=Math.floor(y/2),p=[];for(let m=0;m<g;m++)for(let _=0;_<f;_++){const C=m*f+_;let x=0;for(let P=0;P<y;P++)for(let R=0;R<y;R++){const T=m+P-w,E=_+R-w;if(T>=0&&T<g&&E>=0&&E<f){const A=T*f+E,N=v[P*y+R];x+=h[A]*N}}p[C]=x===255*8?255:0}return p}function c(h,f,g){const v=[1,1,1,1,1,1,1,1,1],y=Math.round(Math.sqrt(v.length)),w=Math.floor(y/2),p=[];for(let m=0;m<g;m++)for(let _=0;_<f;_++){const C=m*f+_;let x=0;for(let P=0;P<y;P++)for(let R=0;R<y;R++){const T=m+P-w,E=_+R-w;if(T>=0&&T<g&&E>=0&&E<f){const A=T*f+E,N=v[P*y+R];x+=h[A]*N}}p[C]=x>=255*4?255:0}return p}function u(h,f,g){const v=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],y=Math.round(Math.sqrt(v.length)),w=Math.floor(y/2),p=[];for(let m=0;m<g;m++)for(let _=0;_<f;_++){const C=m*f+_;let x=0;for(let P=0;P<y;P++)for(let R=0;R<y;R++){const T=m+P-w,E=_+R-w;if(T>=0&&T<g&&E>=0&&E<f){const A=T*f+E,N=v[P*y+R];x+=h[A]*N}}p[C]=x}return p}const d=function(h){const f=this.threshold();let g=s(h,f);return g&&(g=l(g,h.width,h.height),g=c(g,h.width,h.height),g=u(g,h.width,h.height),o(h,g)),h};return en.Mask=d,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),en}var tn={},Uu;function by(){if(Uu)return tn;Uu=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.Noise=void 0;const e=re(),t=me(),n=ae(),r=function(i){const a=this.noise()*255,s=i.data,o=s.length,l=a/2;for(let c=0;c<o;c+=4)s[c+0]+=l-2*l*Math.random(),s[c+1]+=l-2*l*Math.random(),s[c+2]+=l-2*l*Math.random()};return tn.Noise=r,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),tn}var nn={},Hu;function wy(){if(Hu)return nn;Hu=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.Pixelate=void 0;const e=re(),t=fe(),n=me(),r=ae(),i=function(a){let s=Math.ceil(this.pixelSize()),o=a.width,l=a.height,c,u,d,h,f,g,v,y=Math.ceil(o/s),w=Math.ceil(l/s),p,m,_,C,x,P,R,T=a.data;if(s<=0){t.Util.error("pixelSize value can not be <= 0");return}for(x=0;x<y;x+=1)for(P=0;P<w;P+=1){for(h=0,f=0,g=0,v=0,p=x*s,m=p+s,_=P*s,C=_+s,R=0,c=p;c<m;c+=1)if(!(c>=o))for(u=_;u<C;u+=1)u>=l||(d=(o*u+c)*4,h+=T[d+0],f+=T[d+1],g+=T[d+2],v+=T[d+3],R+=1);for(h=h/R,f=f/R,g=g/R,v=v/R,c=p;c<m;c+=1)if(!(c>=o))for(u=_;u<C;u+=1)u>=l||(d=(o*u+c)*4,T[d+0]=h,T[d+1]=f,T[d+2]=g,T[d+3]=v)}};return nn.Pixelate=i,e.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),nn}var rn={},Wu;function Cy(){if(Wu)return rn;Wu=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.Posterize=void 0;const e=re(),t=me(),n=ae(),r=function(i){const a=Math.round(this.levels()*254)+1,s=i.data,o=s.length,l=255/a;for(let c=0;c<o;c+=1)s[c]=Math.floor(s[c]/l)*l};return rn.Posterize=r,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),rn}var an={},zu;function Sy(){if(zu)return an;zu=1,Object.defineProperty(an,"__esModule",{value:!0}),an.RGB=void 0;const e=re(),t=me(),n=ae(),r=function(i){const a=i.data,s=a.length,o=this.red(),l=this.green(),c=this.blue();for(let u=0;u<s;u+=4){const d=(.34*a[u]+.5*a[u+1]+.16*a[u+2])/255;a[u]=d*o,a[u+1]=d*l,a[u+2]=d*c,a[u+3]=a[u+3]}};return an.RGB=r,e.Factory.addGetterSetter(t.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),an}var on={},ju;function Ey(){if(ju)return on;ju=1,Object.defineProperty(on,"__esModule",{value:!0}),on.RGBA=void 0;const e=re(),t=me(),n=ae(),r=function(i){const a=i.data,s=a.length,o=this.red(),l=this.green(),c=this.blue(),u=this.alpha();for(let d=0;d<s;d+=4){const h=1-u;a[d]=o*u+a[d]*h,a[d+1]=l*u+a[d+1]*h,a[d+2]=c*u+a[d+2]*h}};return on.RGBA=r,e.Factory.addGetterSetter(t.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),e.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(i){return this._filterUpToDate=!1,i>1?1:i<0?0:i}),on}var sn={},$u;function xy(){if($u)return sn;$u=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.Sepia=void 0;const e=function(t){const n=t.data,r=n.length;for(let i=0;i<r;i+=4){const a=n[i+0],s=n[i+1],o=n[i+2];n[i+0]=Math.min(255,a*.393+s*.769+o*.189),n[i+1]=Math.min(255,a*.349+s*.686+o*.168),n[i+2]=Math.min(255,a*.272+s*.534+o*.131)}};return sn.Sepia=e,sn}var ln={},Yu;function Ly(){if(Yu)return ln;Yu=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.Solarize=void 0;const e=function(t){const n=t.data,r=t.width,i=t.height,a=r*4;let s=i;do{const o=(s-1)*a;let l=r;do{const c=o+(l-1)*4;let u=n[c],d=n[c+1],h=n[c+2];u>127&&(u=255-u),d>127&&(d=255-d),h>127&&(h=255-h),n[c]=u,n[c+1]=d,n[c+2]=h}while(--l)}while(--s)};return ln.Solarize=e,ln}var cn={},Ku;function Ty(){if(Ku)return cn;Ku=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.Threshold=void 0;const e=re(),t=me(),n=ae(),r=function(i){const a=this.threshold()*255,s=i.data,o=s.length;for(let l=0;l<o;l+=1)s[l]=s[l]<a?0:255};return cn.Threshold=r,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),cn}var Xu;function Ry(){if(Xu)return Ct;Xu=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.Konva=void 0;const e=Yv(),t=Kv(),n=Jv(),r=Zv(),i=Qv(),a=ey(),s=ty(),o=jp(),l=fc(),c=Yp(),u=ny(),d=ry(),h=iy(),f=ay(),g=Kp(),v=oy(),y=sy(),w=ly(),p=cy(),m=uy(),_=dy(),C=hy(),x=fy(),P=gy(),R=py(),T=my(),E=vy(),A=yy(),N=_y(),b=by(),L=wy(),S=Cy(),I=Sy(),k=Ey(),D=xy(),F=Ly(),O=Ty();return Ct.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:r.Circle,Ellipse:i.Ellipse,Image:a.Image,Label:s.Label,Tag:s.Tag,Line:o.Line,Path:l.Path,Rect:c.Rect,RegularPolygon:u.RegularPolygon,Ring:d.Ring,Sprite:h.Sprite,Star:f.Star,Text:g.Text,TextPath:v.TextPath,Transformer:y.Transformer,Wedge:w.Wedge,Filters:{Blur:p.Blur,Brighten:m.Brighten,Contrast:_.Contrast,Emboss:C.Emboss,Enhance:x.Enhance,Grayscale:P.Grayscale,HSL:R.HSL,HSV:T.HSV,Invert:E.Invert,Kaleidoscope:A.Kaleidoscope,Mask:N.Mask,Noise:b.Noise,Pixelate:L.Pixelate,Posterize:S.Posterize,RGB:I.RGB,RGBA:k.RGBA,Sepia:D.Sepia,Solarize:F.Solarize,Threshold:O.Threshold}}),Ct}var Ay=In.exports,Ju;function Py(){if(Ju)return In.exports;Ju=1,Object.defineProperty(Ay,"__esModule",{value:!0});const e=Ry();return In.exports=e.Konva,In.exports}var Iy=Py();const we=sc(Iy);function gc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Er,Zu;function ky(){if(Zu)return Er;Zu=1;function e(){this.__data__=[],this.size=0}return Er=e,Er}var xr,Qu;function mt(){if(Qu)return xr;Qu=1;function e(t,n){return t===n||t!==t&&n!==n}return xr=e,xr}var Lr,ed;function Wn(){if(ed)return Lr;ed=1;var e=mt();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Lr=t,Lr}var Tr,td;function My(){if(td)return Tr;td=1;var e=Wn(),t=Array.prototype,n=t.splice;function r(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return Tr=r,Tr}var Rr,nd;function Ny(){if(nd)return Rr;nd=1;var e=Wn();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return Rr=t,Rr}var Ar,rd;function qy(){if(rd)return Ar;rd=1;var e=Wn();function t(n){return e(this.__data__,n)>-1}return Ar=t,Ar}var Pr,id;function Fy(){if(id)return Pr;id=1;var e=Wn();function t(n,r){var i=this.__data__,a=e(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return Pr=t,Pr}var Ir,ad;function zn(){if(ad)return Ir;ad=1;var e=ky(),t=My(),n=Ny(),r=qy(),i=Fy();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Ir=a,Ir}var kr,od;function Dy(){if(od)return kr;od=1;var e=zn();function t(){this.__data__=new e,this.size=0}return kr=t,kr}var Mr,sd;function Oy(){if(sd)return Mr;sd=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Mr=e,Mr}var Nr,ld;function Gy(){if(ld)return Nr;ld=1;function e(t){return this.__data__.get(t)}return Nr=e,Nr}var qr,cd;function By(){if(cd)return qr;cd=1;function e(t){return this.__data__.has(t)}return qr=e,qr}var Fr,ud;function Xp(){if(ud)return Fr;ud=1;var e=typeof dt=="object"&&dt&&dt.Object===Object&&dt;return Fr=e,Fr}var Dr,dd;function Ge(){if(dd)return Dr;dd=1;var e=Xp(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Dr=n,Dr}var Or,hd;function vt(){if(hd)return Or;hd=1;var e=Ge(),t=e.Symbol;return Or=t,Or}var Gr,fd;function Vy(){if(fd)return Gr;fd=1;var e=vt(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=n.call(s,i),l=s[i];try{s[i]=void 0;var c=!0}catch{}var u=r.call(s);return c&&(o?s[i]=l:delete s[i]),u}return Gr=a,Gr}var Br,gd;function Uy(){if(gd)return Br;gd=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Br=n,Br}var Vr,pd;function at(){if(pd)return Vr;pd=1;var e=vt(),t=Vy(),n=Uy(),r="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?t(o):n(o)}return Vr=s,Vr}var Ur,md;function Ne(){if(md)return Ur;md=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Ur=e,Ur}var Hr,vd;function Sn(){if(vd)return Hr;vd=1;var e=at(),t=Ne(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==a}return Hr=s,Hr}var Wr,yd;function Hy(){if(yd)return Wr;yd=1;var e=Ge(),t=e["__core-js_shared__"];return Wr=t,Wr}var zr,_d;function Wy(){if(_d)return zr;_d=1;var e=Hy(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return zr=n,zr}var jr,bd;function Jp(){if(bd)return jr;bd=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return jr=n,jr}var $r,wd;function zy(){if(wd)return $r;wd=1;var e=Sn(),t=Wy(),n=Ne(),r=Jp(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,c=o.hasOwnProperty,u=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!n(h)||t(h))return!1;var f=e(h)?u:a;return f.test(r(h))}return $r=d,$r}var Yr,Cd;function jy(){if(Cd)return Yr;Cd=1;function e(t,n){return t==null?void 0:t[n]}return Yr=e,Yr}var Kr,Sd;function ot(){if(Sd)return Kr;Sd=1;var e=zy(),t=jy();function n(r,i){var a=t(r,i);return e(a)?a:void 0}return Kr=n,Kr}var Xr,Ed;function pc(){if(Ed)return Xr;Ed=1;var e=ot(),t=Ge(),n=e(t,"Map");return Xr=n,Xr}var Jr,xd;function jn(){if(xd)return Jr;xd=1;var e=ot(),t=e(Object,"create");return Jr=t,Jr}var Zr,Ld;function $y(){if(Ld)return Zr;Ld=1;var e=jn();function t(){this.__data__=e?e(null):{},this.size=0}return Zr=t,Zr}var Qr,Td;function Yy(){if(Td)return Qr;Td=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Qr=e,Qr}var ei,Rd;function Ky(){if(Rd)return ei;Rd=1;var e=jn(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return r.call(s,a)?s[a]:void 0}return ei=i,ei}var ti,Ad;function Xy(){if(Ad)return ti;Ad=1;var e=jn(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var a=this.__data__;return e?a[i]!==void 0:n.call(a,i)}return ti=r,ti}var ni,Pd;function Jy(){if(Pd)return ni;Pd=1;var e=jn(),t="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&i===void 0?t:i,this}return ni=n,ni}var ri,Id;function Zy(){if(Id)return ri;Id=1;var e=$y(),t=Yy(),n=Ky(),r=Xy(),i=Jy();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ri=a,ri}var ii,kd;function Qy(){if(kd)return ii;kd=1;var e=Zy(),t=zn(),n=pc();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return ii=r,ii}var ai,Md;function e2(){if(Md)return ai;Md=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return ai=e,ai}var oi,Nd;function $n(){if(Nd)return oi;Nd=1;var e=e2();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return oi=t,oi}var si,qd;function t2(){if(qd)return si;qd=1;var e=$n();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return si=t,si}var li,Fd;function n2(){if(Fd)return li;Fd=1;var e=$n();function t(n){return e(this,n).get(n)}return li=t,li}var ci,Dd;function r2(){if(Dd)return ci;Dd=1;var e=$n();function t(n){return e(this,n).has(n)}return ci=t,ci}var ui,Od;function i2(){if(Od)return ui;Od=1;var e=$n();function t(n,r){var i=e(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return ui=t,ui}var di,Gd;function mc(){if(Gd)return di;Gd=1;var e=Qy(),t=t2(),n=n2(),r=r2(),i=i2();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,di=a,di}var hi,Bd;function a2(){if(Bd)return hi;Bd=1;var e=zn(),t=pc(),n=mc(),r=200;function i(a,s){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return hi=i,hi}var fi,Vd;function Yn(){if(Vd)return fi;Vd=1;var e=zn(),t=Dy(),n=Oy(),r=Gy(),i=By(),a=a2();function s(o){var l=this.__data__=new e(o);this.size=l.size}return s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,fi=s,fi}var gi,Ud;function vc(){if(Ud)return gi;Ud=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return gi=e,gi}var pi,Hd;function Zp(){if(Hd)return pi;Hd=1;var e=ot(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return pi=t,pi}var mi,Wd;function Kn(){if(Wd)return mi;Wd=1;var e=Zp();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return mi=t,mi}var vi,zd;function Xn(){if(zd)return vi;zd=1;var e=Kn(),t=mt(),n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o){var l=a[s];(!(r.call(a,s)&&t(l,o))||o===void 0&&!(s in a))&&e(a,s,o)}return vi=i,vi}var yi,jd;function En(){if(jd)return yi;jd=1;var e=Xn(),t=Kn();function n(r,i,a,s){var o=!a;a||(a={});for(var l=-1,c=i.length;++l<c;){var u=i[l],d=s?s(a[u],r[u],u,a,r):void 0;d===void 0&&(d=r[u]),o?t(a,u,d):e(a,u,d)}return a}return yi=n,yi}var _i,$d;function o2(){if($d)return _i;$d=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return _i=e,_i}var bi,Yd;function He(){if(Yd)return bi;Yd=1;function e(t){return t!=null&&typeof t=="object"}return bi=e,bi}var wi,Kd;function s2(){if(Kd)return wi;Kd=1;var e=at(),t=He(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return wi=r,wi}var Ci,Xd;function xn(){if(Xd)return Ci;Xd=1;var e=s2(),t=He(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return Ci=a,Ci}var Si,Jd;function _e(){if(Jd)return Si;Jd=1;var e=Array.isArray;return Si=e,Si}var un={exports:{}},Ei,Zd;function l2(){if(Zd)return Ei;Zd=1;function e(){return!1}return Ei=e,Ei}un.exports;var Qd;function yt(){return Qd||(Qd=1,function(e,t){var n=Ge(),r=l2(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;e.exports=c}(un,un.exports)),un.exports}var xi,eh;function Jn(){if(eh)return xi;eh=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return xi=n,xi}var Li,th;function yc(){if(th)return Li;th=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Li=t,Li}var Ti,nh;function c2(){if(nh)return Ti;nh=1;var e=at(),t=yc(),n=He(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",d="[object Object]",h="[object RegExp]",f="[object Set]",g="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",p="[object Float32Array]",m="[object Float64Array]",_="[object Int8Array]",C="[object Int16Array]",x="[object Int32Array]",P="[object Uint8Array]",R="[object Uint8ClampedArray]",T="[object Uint16Array]",E="[object Uint32Array]",A={};A[p]=A[m]=A[_]=A[C]=A[x]=A[P]=A[R]=A[T]=A[E]=!0,A[r]=A[i]=A[y]=A[a]=A[w]=A[s]=A[o]=A[l]=A[c]=A[u]=A[d]=A[h]=A[f]=A[g]=A[v]=!1;function N(b){return n(b)&&t(b.length)&&!!A[e(b)]}return Ti=N,Ti}var Ri,rh;function Zn(){if(rh)return Ri;rh=1;function e(t){return function(n){return t(n)}}return Ri=e,Ri}var dn={exports:{}};dn.exports;var ih;function _c(){return ih||(ih=1,function(e,t){var n=Xp(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(dn,dn.exports)),dn.exports}var Ai,ah;function Ln(){if(ah)return Ai;ah=1;var e=c2(),t=Zn(),n=_c(),r=n&&n.isTypedArray,i=r?t(r):e;return Ai=i,Ai}var Pi,oh;function Qp(){if(oh)return Pi;oh=1;var e=o2(),t=xn(),n=_e(),r=yt(),i=Jn(),a=Ln(),s=Object.prototype,o=s.hasOwnProperty;function l(c,u){var d=n(c),h=!d&&t(c),f=!d&&!h&&r(c),g=!d&&!h&&!f&&a(c),v=d||h||f||g,y=v?e(c.length,String):[],w=y.length;for(var p in c)(u||o.call(c,p))&&!(v&&(p=="length"||f&&(p=="offset"||p=="parent")||g&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||i(p,w)))&&y.push(p);return y}return Pi=l,Pi}var Ii,sh;function Qn(){if(sh)return Ii;sh=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return Ii=t,Ii}var ki,lh;function e1(){if(lh)return ki;lh=1;function e(t,n){return function(r){return t(n(r))}}return ki=e,ki}var Mi,ch;function u2(){if(ch)return Mi;ch=1;var e=e1(),t=e(Object.keys,Object);return Mi=t,Mi}var Ni,uh;function bc(){if(uh)return Ni;uh=1;var e=Qn(),t=u2(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return Ni=i,Ni}var qi,dh;function Ke(){if(dh)return qi;dh=1;var e=Sn(),t=yc();function n(r){return r!=null&&t(r.length)&&!e(r)}return qi=n,qi}var Fi,hh;function et(){if(hh)return Fi;hh=1;var e=Qp(),t=bc(),n=Ke();function r(i){return n(i)?e(i):t(i)}return Fi=r,Fi}var Di,fh;function d2(){if(fh)return Di;fh=1;var e=En(),t=et();function n(r,i){return r&&e(i,t(i),r)}return Di=n,Di}var Oi,gh;function h2(){if(gh)return Oi;gh=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return Oi=e,Oi}var Gi,ph;function f2(){if(ph)return Gi;ph=1;var e=Ne(),t=Qn(),n=h2(),r=Object.prototype,i=r.hasOwnProperty;function a(s){if(!e(s))return n(s);var o=t(s),l=[];for(var c in s)c=="constructor"&&(o||!i.call(s,c))||l.push(c);return l}return Gi=a,Gi}var Bi,mh;function st(){if(mh)return Bi;mh=1;var e=Qp(),t=f2(),n=Ke();function r(i){return n(i)?e(i,!0):t(i)}return Bi=r,Bi}var Vi,vh;function g2(){if(vh)return Vi;vh=1;var e=En(),t=st();function n(r,i){return r&&e(i,t(i),r)}return Vi=n,Vi}var hn={exports:{}};hn.exports;var yh;function t1(){return yh||(yh=1,function(e,t){var n=Ge(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,h=o?o(d):new c.constructor(d);return c.copy(h),h}e.exports=l}(hn,hn.exports)),hn.exports}var Ui,_h;function n1(){if(_h)return Ui;_h=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return Ui=e,Ui}var Hi,bh;function r1(){if(bh)return Hi;bh=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,s=[];++r<i;){var o=t[r];n(o,r,t)&&(s[a++]=o)}return s}return Hi=e,Hi}var Wi,wh;function i1(){if(wh)return Wi;wh=1;function e(){return[]}return Wi=e,Wi}var zi,Ch;function wc(){if(Ch)return zi;Ch=1;var e=r1(),t=i1(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return r.call(s,o)}))}:t;return zi=a,zi}var ji,Sh;function p2(){if(Sh)return ji;Sh=1;var e=En(),t=wc();function n(r,i){return e(r,t(r),i)}return ji=n,ji}var $i,Eh;function Cc(){if(Eh)return $i;Eh=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return $i=e,$i}var Yi,xh;function er(){if(xh)return Yi;xh=1;var e=e1(),t=e(Object.getPrototypeOf,Object);return Yi=t,Yi}var Ki,Lh;function a1(){if(Lh)return Ki;Lh=1;var e=Cc(),t=er(),n=wc(),r=i1(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,n(s)),s=t(s);return o}:r;return Ki=a,Ki}var Xi,Th;function m2(){if(Th)return Xi;Th=1;var e=En(),t=a1();function n(r,i){return e(r,t(r),i)}return Xi=n,Xi}var Ji,Rh;function o1(){if(Rh)return Ji;Rh=1;var e=Cc(),t=_e();function n(r,i,a){var s=i(r);return t(r)?s:e(s,a(r))}return Ji=n,Ji}var Zi,Ah;function s1(){if(Ah)return Zi;Ah=1;var e=o1(),t=wc(),n=et();function r(i){return e(i,n,t)}return Zi=r,Zi}var Qi,Ph;function v2(){if(Ph)return Qi;Ph=1;var e=o1(),t=a1(),n=st();function r(i){return e(i,n,t)}return Qi=r,Qi}var ea,Ih;function y2(){if(Ih)return ea;Ih=1;var e=ot(),t=Ge(),n=e(t,"DataView");return ea=n,ea}var ta,kh;function _2(){if(kh)return ta;kh=1;var e=ot(),t=Ge(),n=e(t,"Promise");return ta=n,ta}var na,Mh;function l1(){if(Mh)return na;Mh=1;var e=ot(),t=Ge(),n=e(t,"Set");return na=n,na}var ra,Nh;function b2(){if(Nh)return ra;Nh=1;var e=ot(),t=Ge(),n=e(t,"WeakMap");return ra=n,ra}var ia,qh;function _t(){if(qh)return ia;qh=1;var e=y2(),t=pc(),n=_2(),r=l1(),i=b2(),a=at(),s=Jp(),o="[object Map]",l="[object Object]",c="[object Promise]",u="[object Set]",d="[object WeakMap]",h="[object DataView]",f=s(e),g=s(t),v=s(n),y=s(r),w=s(i),p=a;return(e&&p(new e(new ArrayBuffer(1)))!=h||t&&p(new t)!=o||n&&p(n.resolve())!=c||r&&p(new r)!=u||i&&p(new i)!=d)&&(p=function(m){var _=a(m),C=_==l?m.constructor:void 0,x=C?s(C):"";if(x)switch(x){case f:return h;case g:return o;case v:return c;case y:return u;case w:return d}return _}),ia=p,ia}var aa,Fh;function w2(){if(Fh)return aa;Fh=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return aa=n,aa}var oa,Dh;function c1(){if(Dh)return oa;Dh=1;var e=Ge(),t=e.Uint8Array;return oa=t,oa}var sa,Oh;function Sc(){if(Oh)return sa;Oh=1;var e=c1();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return sa=t,sa}var la,Gh;function C2(){if(Gh)return la;Gh=1;var e=Sc();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return la=t,la}var ca,Bh;function S2(){if(Bh)return ca;Bh=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return ca=t,ca}var ua,Vh;function E2(){if(Vh)return ua;Vh=1;var e=vt(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return ua=r,ua}var da,Uh;function u1(){if(Uh)return da;Uh=1;var e=Sc();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return da=t,da}var ha,Hh;function x2(){if(Hh)return ha;Hh=1;var e=Sc(),t=C2(),n=S2(),r=E2(),i=u1(),a="[object Boolean]",s="[object Date]",o="[object Map]",l="[object Number]",c="[object RegExp]",u="[object Set]",d="[object String]",h="[object Symbol]",f="[object ArrayBuffer]",g="[object DataView]",v="[object Float32Array]",y="[object Float64Array]",w="[object Int8Array]",p="[object Int16Array]",m="[object Int32Array]",_="[object Uint8Array]",C="[object Uint8ClampedArray]",x="[object Uint16Array]",P="[object Uint32Array]";function R(T,E,A){var N=T.constructor;switch(E){case f:return e(T);case a:case s:return new N(+T);case g:return t(T,A);case v:case y:case w:case p:case m:case _:case C:case x:case P:return i(T,A);case o:return new N;case l:case d:return new N(T);case c:return n(T);case u:return new N;case h:return r(T)}}return ha=R,ha}var fa,Wh;function d1(){if(Wh)return fa;Wh=1;var e=Ne(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return fa=n,fa}var ga,zh;function h1(){if(zh)return ga;zh=1;var e=d1(),t=er(),n=Qn();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return ga=r,ga}var pa,jh;function L2(){if(jh)return pa;jh=1;var e=_t(),t=He(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return pa=r,pa}var ma,$h;function T2(){if($h)return ma;$h=1;var e=L2(),t=Zn(),n=_c(),r=n&&n.isMap,i=r?t(r):e;return ma=i,ma}var va,Yh;function R2(){if(Yh)return va;Yh=1;var e=_t(),t=He(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return va=r,va}var ya,Kh;function A2(){if(Kh)return ya;Kh=1;var e=R2(),t=Zn(),n=_c(),r=n&&n.isSet,i=r?t(r):e;return ya=i,ya}var _a,Xh;function f1(){if(Xh)return _a;Xh=1;var e=Yn(),t=vc(),n=Xn(),r=d2(),i=g2(),a=t1(),s=n1(),o=p2(),l=m2(),c=s1(),u=v2(),d=_t(),h=w2(),f=x2(),g=h1(),v=_e(),y=yt(),w=T2(),p=Ne(),m=A2(),_=et(),C=st(),x=1,P=2,R=4,T="[object Arguments]",E="[object Array]",A="[object Boolean]",N="[object Date]",b="[object Error]",L="[object Function]",S="[object GeneratorFunction]",I="[object Map]",k="[object Number]",D="[object Object]",F="[object RegExp]",O="[object Set]",H="[object String]",j="[object Symbol]",U="[object WeakMap]",q="[object ArrayBuffer]",G="[object DataView]",V="[object Float32Array]",M="[object Float64Array]",B="[object Int8Array]",W="[object Int16Array]",z="[object Int32Array]",Y="[object Uint8Array]",X="[object Uint8ClampedArray]",Z="[object Uint16Array]",Q="[object Uint32Array]",K={};K[T]=K[E]=K[q]=K[G]=K[A]=K[N]=K[V]=K[M]=K[B]=K[W]=K[z]=K[I]=K[k]=K[D]=K[F]=K[O]=K[H]=K[j]=K[Y]=K[X]=K[Z]=K[Q]=!0,K[b]=K[L]=K[U]=!1;function de(J,ie,le,ne,Se,oe){var ce,ve=ie&x,Te=ie&P,Ee=ie&R;if(le&&(ce=Se?le(J,ne,Se,oe):le(J)),ce!==void 0)return ce;if(!p(J))return J;var Fe=v(J);if(Fe){if(ce=h(J),!ve)return s(J,ce)}else{var xe=d(J),Be=xe==L||xe==S;if(y(J))return a(J,ve);if(xe==D||xe==T||Be&&!Se){if(ce=Te||Be?{}:g(J),!ve)return Te?l(J,i(ce,J)):o(J,r(ce,J))}else{if(!K[xe])return Se?J:{};ce=f(J,xe,ve)}}oe||(oe=new e);var De=oe.get(J);if(De)return De;oe.set(J,ce),m(J)?J.forEach(function(ye){ce.add(de(ye,ie,le,ye,J,oe))}):w(J)&&J.forEach(function(ye,be){ce.set(be,de(ye,ie,le,be,J,oe))});var Ve=Ee?Te?u:c:Te?C:_,Re=Fe?void 0:Ve(J);return t(Re||J,function(ye,be){Re&&(be=ye,ye=J[be]),n(ce,be,de(ye,ie,le,be,J,oe))}),ce}return _a=de,_a}var ba,Jh;function P2(){if(Jh)return ba;Jh=1;var e=f1(),t=4;function n(r){return e(r,t)}return ba=n,ba}var wa,Zh;function Ec(){if(Zh)return wa;Zh=1;function e(t){return function(){return t}}return wa=e,wa}var Ca,Qh;function I2(){if(Qh)return Ca;Qh=1;function e(t){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),l=o.length;l--;){var c=o[t?l:++a];if(r(s[c],c,s)===!1)break}return n}}return Ca=e,Ca}var Sa,ef;function xc(){if(ef)return Sa;ef=1;var e=I2(),t=e();return Sa=t,Sa}var Ea,tf;function Lc(){if(tf)return Ea;tf=1;var e=xc(),t=et();function n(r,i){return r&&e(r,i,t)}return Ea=n,Ea}var xa,nf;function k2(){if(nf)return xa;nf=1;var e=Ke();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return xa=t,xa}var La,rf;function tr(){if(rf)return La;rf=1;var e=Lc(),t=k2(),n=t(e);return La=n,La}var Ta,af;function lt(){if(af)return Ta;af=1;function e(t){return t}return Ta=e,Ta}var Ra,of;function g1(){if(of)return Ra;of=1;var e=lt();function t(n){return typeof n=="function"?n:e}return Ra=t,Ra}var Aa,sf;function p1(){if(sf)return Aa;sf=1;var e=vc(),t=tr(),n=g1(),r=_e();function i(a,s){var o=r(a)?e:t;return o(a,n(s))}return Aa=i,Aa}var Pa,lf;function m1(){return lf||(lf=1,Pa=p1()),Pa}var Ia,cf;function M2(){if(cf)return Ia;cf=1;var e=tr();function t(n,r){var i=[];return e(n,function(a,s,o){r(a,s,o)&&i.push(a)}),i}return Ia=t,Ia}var ka,uf;function N2(){if(uf)return ka;uf=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return ka=t,ka}var Ma,df;function q2(){if(df)return Ma;df=1;function e(t){return this.__data__.has(t)}return Ma=e,Ma}var Na,hf;function v1(){if(hf)return Na;hf=1;var e=mc(),t=N2(),n=q2();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,Na=r,Na}var qa,ff;function F2(){if(ff)return qa;ff=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return qa=e,qa}var Fa,gf;function y1(){if(gf)return Fa;gf=1;function e(t,n){return t.has(n)}return Fa=e,Fa}var Da,pf;function _1(){if(pf)return Da;pf=1;var e=v1(),t=F2(),n=y1(),r=1,i=2;function a(s,o,l,c,u,d){var h=l&r,f=s.length,g=o.length;if(f!=g&&!(h&&g>f))return!1;var v=d.get(s),y=d.get(o);if(v&&y)return v==o&&y==s;var w=-1,p=!0,m=l&i?new e:void 0;for(d.set(s,o),d.set(o,s);++w<f;){var _=s[w],C=o[w];if(c)var x=h?c(C,_,w,o,s,d):c(_,C,w,s,o,d);if(x!==void 0){if(x)continue;p=!1;break}if(m){if(!t(o,function(P,R){if(!n(m,R)&&(_===P||u(_,P,l,c,d)))return m.push(R)})){p=!1;break}}else if(!(_===C||u(_,C,l,c,d))){p=!1;break}}return d.delete(s),d.delete(o),p}return Da=a,Da}var Oa,mf;function D2(){if(mf)return Oa;mf=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,a){r[++n]=[a,i]}),r}return Oa=e,Oa}var Ga,vf;function Tc(){if(vf)return Ga;vf=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return Ga=e,Ga}var Ba,yf;function O2(){if(yf)return Ba;yf=1;var e=vt(),t=c1(),n=mt(),r=_1(),i=D2(),a=Tc(),s=1,o=2,l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Map]",h="[object Number]",f="[object RegExp]",g="[object Set]",v="[object String]",y="[object Symbol]",w="[object ArrayBuffer]",p="[object DataView]",m=e?e.prototype:void 0,_=m?m.valueOf:void 0;function C(x,P,R,T,E,A,N){switch(R){case p:if(x.byteLength!=P.byteLength||x.byteOffset!=P.byteOffset)return!1;x=x.buffer,P=P.buffer;case w:return!(x.byteLength!=P.byteLength||!A(new t(x),new t(P)));case l:case c:case h:return n(+x,+P);case u:return x.name==P.name&&x.message==P.message;case f:case v:return x==P+"";case d:var b=i;case g:var L=T&s;if(b||(b=a),x.size!=P.size&&!L)return!1;var S=N.get(x);if(S)return S==P;T|=o,N.set(x,P);var I=r(b(x),b(P),T,E,A,N);return N.delete(x),I;case y:if(_)return _.call(x)==_.call(P)}return!1}return Ba=C,Ba}var Va,_f;function G2(){if(_f)return Va;_f=1;var e=s1(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,l,c,u){var d=o&t,h=e(a),f=h.length,g=e(s),v=g.length;if(f!=v&&!d)return!1;for(var y=f;y--;){var w=h[y];if(!(d?w in s:r.call(s,w)))return!1}var p=u.get(a),m=u.get(s);if(p&&m)return p==s&&m==a;var _=!0;u.set(a,s),u.set(s,a);for(var C=d;++y<f;){w=h[y];var x=a[w],P=s[w];if(l)var R=d?l(P,x,w,s,a,u):l(x,P,w,a,s,u);if(!(R===void 0?x===P||c(x,P,o,l,u):R)){_=!1;break}C||(C=w=="constructor")}if(_&&!C){var T=a.constructor,E=s.constructor;T!=E&&"constructor"in a&&"constructor"in s&&!(typeof T=="function"&&T instanceof T&&typeof E=="function"&&E instanceof E)&&(_=!1)}return u.delete(a),u.delete(s),_}return Va=i,Va}var Ua,bf;function B2(){if(bf)return Ua;bf=1;var e=Yn(),t=_1(),n=O2(),r=G2(),i=_t(),a=_e(),s=yt(),o=Ln(),l=1,c="[object Arguments]",u="[object Array]",d="[object Object]",h=Object.prototype,f=h.hasOwnProperty;function g(v,y,w,p,m,_){var C=a(v),x=a(y),P=C?u:i(v),R=x?u:i(y);P=P==c?d:P,R=R==c?d:R;var T=P==d,E=R==d,A=P==R;if(A&&s(v)){if(!s(y))return!1;C=!0,T=!1}if(A&&!T)return _||(_=new e),C||o(v)?t(v,y,w,p,m,_):n(v,y,P,w,p,m,_);if(!(w&l)){var N=T&&f.call(v,"__wrapped__"),b=E&&f.call(y,"__wrapped__");if(N||b){var L=N?v.value():v,S=b?y.value():y;return _||(_=new e),m(L,S,w,p,_)}}return A?(_||(_=new e),r(v,y,w,p,m,_)):!1}return Ua=g,Ua}var Ha,wf;function b1(){if(wf)return Ha;wf=1;var e=B2(),t=He();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,a,s,n,o)}return Ha=n,Ha}var Wa,Cf;function V2(){if(Cf)return Wa;Cf=1;var e=Yn(),t=b1(),n=1,r=2;function i(a,s,o,l){var c=o.length,u=c,d=!l;if(a==null)return!u;for(a=Object(a);c--;){var h=o[c];if(d&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++c<u;){h=o[c];var f=h[0],g=a[f],v=h[1];if(d&&h[2]){if(g===void 0&&!(f in a))return!1}else{var y=new e;if(l)var w=l(g,v,f,a,s,y);if(!(w===void 0?t(v,g,n|r,l,y):w))return!1}}return!0}return Wa=i,Wa}var za,Sf;function w1(){if(Sf)return za;Sf=1;var e=Ne();function t(n){return n===n&&!e(n)}return za=t,za}var ja,Ef;function U2(){if(Ef)return ja;Ef=1;var e=w1(),t=et();function n(r){for(var i=t(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,e(o)]}return i}return ja=n,ja}var $a,xf;function C1(){if(xf)return $a;xf=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return $a=e,$a}var Ya,Lf;function H2(){if(Lf)return Ya;Lf=1;var e=V2(),t=U2(),n=C1();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return Ya=r,Ya}var Ka,Tf;function bt(){if(Tf)return Ka;Tf=1;var e=at(),t=He(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Ka=r,Ka}var Xa,Rf;function Rc(){if(Rf)return Xa;Rf=1;var e=_e(),t=bt(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return Xa=i,Xa}var Ja,Af;function W2(){if(Af)return Ja;Af=1;var e=mc(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var c=r.apply(this,s);return a.cache=l.set(o,c)||l,c};return a.cache=new(n.Cache||e),a}return n.Cache=e,Ja=n,Ja}var Za,Pf;function z2(){if(Pf)return Za;Pf=1;var e=W2(),t=500;function n(r){var i=e(r,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return Za=n,Za}var Qa,If;function j2(){if(If)return Qa;If=1;var e=z2(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,l,c){a.push(l?c.replace(n,"$1"):o||s)}),a});return Qa=r,Qa}var eo,kf;function nr(){if(kf)return eo;kf=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return eo=e,eo}var to,Mf;function $2(){if(Mf)return to;Mf=1;var e=vt(),t=nr(),n=_e(),r=bt(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return t(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return to=s,to}var no,Nf;function S1(){if(Nf)return no;Nf=1;var e=$2();function t(n){return n==null?"":e(n)}return no=t,no}var ro,qf;function rr(){if(qf)return ro;qf=1;var e=_e(),t=Rc(),n=j2(),r=S1();function i(a,s){return e(a)?a:t(a,s)?[a]:n(r(a))}return ro=i,ro}var io,Ff;function Tn(){if(Ff)return io;Ff=1;var e=bt();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return io=t,io}var ao,Df;function ir(){if(Df)return ao;Df=1;var e=rr(),t=Tn();function n(r,i){i=e(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[t(i[a++])];return a&&a==s?r:void 0}return ao=n,ao}var oo,Of;function Y2(){if(Of)return oo;Of=1;var e=ir();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return oo=t,oo}var so,Gf;function K2(){if(Gf)return so;Gf=1;function e(t,n){return t!=null&&n in Object(t)}return so=e,so}var lo,Bf;function E1(){if(Bf)return lo;Bf=1;var e=rr(),t=xn(),n=_e(),r=Jn(),i=yc(),a=Tn();function s(o,l,c){l=e(l,o);for(var u=-1,d=l.length,h=!1;++u<d;){var f=a(l[u]);if(!(h=o!=null&&c(o,f)))break;o=o[f]}return h||++u!=d?h:(d=o==null?0:o.length,!!d&&i(d)&&r(f,d)&&(n(o)||t(o)))}return lo=s,lo}var co,Vf;function x1(){if(Vf)return co;Vf=1;var e=K2(),t=E1();function n(r,i){return r!=null&&t(r,i,e)}return co=n,co}var uo,Uf;function X2(){if(Uf)return uo;Uf=1;var e=b1(),t=Y2(),n=x1(),r=Rc(),i=w1(),a=C1(),s=Tn(),o=1,l=2;function c(u,d){return r(u)&&i(d)?a(s(u),d):function(h){var f=t(h,u);return f===void 0&&f===d?n(h,u):e(d,f,o|l)}}return uo=c,uo}var ho,Hf;function L1(){if(Hf)return ho;Hf=1;function e(t){return function(n){return n==null?void 0:n[t]}}return ho=e,ho}var fo,Wf;function J2(){if(Wf)return fo;Wf=1;var e=ir();function t(n){return function(r){return e(r,n)}}return fo=t,fo}var go,zf;function Z2(){if(zf)return go;zf=1;var e=L1(),t=J2(),n=Rc(),r=Tn();function i(a){return n(a)?e(r(a)):t(a)}return go=i,go}var po,jf;function Xe(){if(jf)return po;jf=1;var e=H2(),t=X2(),n=lt(),r=_e(),i=Z2();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return po=a,po}var mo,$f;function T1(){if($f)return mo;$f=1;var e=r1(),t=M2(),n=Xe(),r=_e();function i(a,s){var o=r(a)?e:t;return o(a,n(s,3))}return mo=i,mo}var vo,Yf;function Q2(){if(Yf)return vo;Yf=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return vo=n,vo}var yo,Kf;function R1(){if(Kf)return yo;Kf=1;var e=Q2(),t=E1();function n(r,i){return r!=null&&t(r,i,e)}return yo=n,yo}var _o,Xf;function e_(){if(Xf)return _o;Xf=1;var e=bc(),t=_t(),n=xn(),r=_e(),i=Ke(),a=yt(),s=Qn(),o=Ln(),l="[object Map]",c="[object Set]",u=Object.prototype,d=u.hasOwnProperty;function h(f){if(f==null)return!0;if(i(f)&&(r(f)||typeof f=="string"||typeof f.splice=="function"||a(f)||o(f)||n(f)))return!f.length;var g=t(f);if(g==l||g==c)return!f.size;if(s(f))return!e(f).length;for(var v in f)if(d.call(f,v))return!1;return!0}return _o=h,_o}var bo,Jf;function A1(){if(Jf)return bo;Jf=1;function e(t){return t===void 0}return bo=e,bo}var wo,Zf;function P1(){if(Zf)return wo;Zf=1;var e=tr(),t=Ke();function n(r,i){var a=-1,s=t(r)?Array(r.length):[];return e(r,function(o,l,c){s[++a]=i(o,l,c)}),s}return wo=n,wo}var Co,Qf;function I1(){if(Qf)return Co;Qf=1;var e=nr(),t=Xe(),n=P1(),r=_e();function i(a,s){var o=r(a)?e:n;return o(a,t(s,3))}return Co=i,Co}var So,eg;function t_(){if(eg)return So;eg=1;function e(t,n,r,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);return r}return So=e,So}var Eo,tg;function n_(){if(tg)return Eo;tg=1;function e(t,n,r,i,a){return a(t,function(s,o,l){r=i?(i=!1,s):n(r,s,o,l)}),r}return Eo=e,Eo}var xo,ng;function k1(){if(ng)return xo;ng=1;var e=t_(),t=tr(),n=Xe(),r=n_(),i=_e();function a(s,o,l){var c=i(s)?e:r,u=arguments.length<3;return c(s,n(o,4),l,u,t)}return xo=a,xo}var Lo,rg;function r_(){if(rg)return Lo;rg=1;var e=at(),t=_e(),n=He(),r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return Lo=i,Lo}var To,ig;function i_(){if(ig)return To;ig=1;var e=L1(),t=e("length");return To=t,To}var Ro,ag;function a_(){if(ag)return Ro;ag=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function l(c){return o.test(c)}return Ro=l,Ro}var Ao,og;function o_(){if(og)return Ao;og=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+o+"|"+l+")",u="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",g=c+"?",v="["+a+"]?",y="(?:"+f+"(?:"+[u,d,h].join("|")+")"+v+g+")*",w=v+g+y,p="(?:"+[u+o+"?",o,d,h,s].join("|")+")",m=RegExp(l+"(?="+l+")|"+p+w,"g");function _(C){for(var x=m.lastIndex=0;m.test(C);)++x;return x}return Ao=_,Ao}var Po,sg;function s_(){if(sg)return Po;sg=1;var e=i_(),t=a_(),n=o_();function r(i){return t(i)?n(i):e(i)}return Po=r,Po}var Io,lg;function l_(){if(lg)return Io;lg=1;var e=bc(),t=_t(),n=Ke(),r=r_(),i=s_(),a="[object Map]",s="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var c=t(l);return c==a||c==s?l.size:e(l).length}return Io=o,Io}var ko,cg;function c_(){if(cg)return ko;cg=1;var e=vc(),t=d1(),n=Lc(),r=Xe(),i=er(),a=_e(),s=yt(),o=Sn(),l=Ne(),c=Ln();function u(d,h,f){var g=a(d),v=g||s(d)||c(d);if(h=r(h,4),f==null){var y=d&&d.constructor;v?f=g?new y:[]:l(d)?f=o(y)?t(i(d)):{}:f={}}return(v?e:n)(d,function(w,p,m){return h(f,w,p,m)}),f}return ko=u,ko}var Mo,ug;function u_(){if(ug)return Mo;ug=1;var e=vt(),t=xn(),n=_e(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return Mo=i,Mo}var No,dg;function Ac(){if(dg)return No;dg=1;var e=Cc(),t=u_();function n(r,i,a,s,o){var l=-1,c=r.length;for(a||(a=t),o||(o=[]);++l<c;){var u=r[l];i>0&&a(u)?i>1?n(u,i-1,a,s,o):e(o,u):s||(o[o.length]=u)}return o}return No=n,No}var qo,hg;function d_(){if(hg)return qo;hg=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return qo=e,qo}var Fo,fg;function M1(){if(fg)return Fo;fg=1;var e=d_(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=t(s.length-i,0),c=Array(l);++o<l;)c[o]=s[i+o];o=-1;for(var u=Array(i+1);++o<i;)u[o]=s[o];return u[i]=a(c),e(r,this,u)}}return Fo=n,Fo}var Do,gg;function h_(){if(gg)return Do;gg=1;var e=Ec(),t=Zp(),n=lt(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return Do=r,Do}var Oo,pg;function f_(){if(pg)return Oo;pg=1;var e=800,t=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),l=t-(o-s);if(s=o,l>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return Oo=r,Oo}var Go,mg;function N1(){if(mg)return Go;mg=1;var e=h_(),t=f_(),n=t(e);return Go=n,Go}var Bo,vg;function ar(){if(vg)return Bo;vg=1;var e=lt(),t=M1(),n=N1();function r(i,a){return n(t(i,a,e),i+"")}return Bo=r,Bo}var Vo,yg;function q1(){if(yg)return Vo;yg=1;function e(t,n,r,i){for(var a=t.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(t[s],s,t))return s;return-1}return Vo=e,Vo}var Uo,_g;function g_(){if(_g)return Uo;_g=1;function e(t){return t!==t}return Uo=e,Uo}var Ho,bg;function p_(){if(bg)return Ho;bg=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return Ho=e,Ho}var Wo,wg;function m_(){if(wg)return Wo;wg=1;var e=q1(),t=g_(),n=p_();function r(i,a,s){return a===a?n(i,a,s):e(i,t,s)}return Wo=r,Wo}var zo,Cg;function v_(){if(Cg)return zo;Cg=1;var e=m_();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return zo=t,zo}var jo,Sg;function y_(){if(Sg)return jo;Sg=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return jo=e,jo}var $o,Eg;function __(){if(Eg)return $o;Eg=1;function e(){}return $o=e,$o}var Yo,xg;function b_(){if(xg)return Yo;xg=1;var e=l1(),t=__(),n=Tc(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return Yo=i,Yo}var Ko,Lg;function w_(){if(Lg)return Ko;Lg=1;var e=v1(),t=v_(),n=y_(),r=y1(),i=b_(),a=Tc(),s=200;function o(l,c,u){var d=-1,h=t,f=l.length,g=!0,v=[],y=v;if(u)g=!1,h=n;else if(f>=s){var w=c?null:i(l);if(w)return a(w);g=!1,h=r,y=new e}else y=c?[]:v;e:for(;++d<f;){var p=l[d],m=c?c(p):p;if(p=u||p!==0?p:0,g&&m===m){for(var _=y.length;_--;)if(y[_]===m)continue e;c&&y.push(m),v.push(p)}else h(y,m,u)||(y!==v&&y.push(m),v.push(p))}return v}return Ko=o,Ko}var Xo,Tg;function F1(){if(Tg)return Xo;Tg=1;var e=Ke(),t=He();function n(r){return t(r)&&e(r)}return Xo=n,Xo}var Jo,Rg;function C_(){if(Rg)return Jo;Rg=1;var e=Ac(),t=ar(),n=w_(),r=F1(),i=t(function(a){return n(e(a,1,r,!0))});return Jo=i,Jo}var Zo,Ag;function S_(){if(Ag)return Zo;Ag=1;var e=nr();function t(n,r){return e(r,function(i){return n[i]})}return Zo=t,Zo}var Qo,Pg;function D1(){if(Pg)return Qo;Pg=1;var e=S_(),t=et();function n(r){return r==null?[]:e(r,t(r))}return Qo=n,Qo}var es,Ig;function qe(){if(Ig)return es;Ig=1;var e;if(typeof gc=="function")try{e={clone:P2(),constant:Ec(),each:m1(),filter:T1(),has:R1(),isArray:_e(),isEmpty:e_(),isFunction:Sn(),isUndefined:A1(),keys:et(),map:I1(),reduce:k1(),size:l_(),transform:c_(),union:C_(),values:D1()}}catch{}return e||(e=window._),es=e,es}var ts,kg;function Pc(){if(kg)return ts;kg=1;var e=qe();ts=i;var t="\0",n="\0",r="";function i(u){this._isDirected=e.has(u,"directed")?u.directed:!0,this._isMultigraph=e.has(u,"multigraph")?u.multigraph:!1,this._isCompound=e.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(u){return this._label=u,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultNodeLabelFn=u,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._in[d])})},i.prototype.sinks=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._out[d])})},i.prototype.setNodes=function(u,d){var h=arguments,f=this;return e.each(u,function(g){h.length>1?f.setNode(g,d):f.setNode(g)}),this},i.prototype.setNode=function(u,d){return e.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=d),this):(this._nodes[u]=arguments.length>1?d:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=n,this._children[u]={},this._children[n][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},i.prototype.node=function(u){return this._nodes[u]},i.prototype.hasNode=function(u){return e.has(this._nodes,u)},i.prototype.removeNode=function(u){var d=this;if(e.has(this._nodes,u)){var h=function(f){d.removeEdge(d._edgeObjs[f])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],e.each(this.children(u),function(f){d.setParent(f)}),delete this._children[u]),e.each(e.keys(this._in[u]),h),delete this._in[u],delete this._preds[u],e.each(e.keys(this._out[u]),h),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},i.prototype.setParent=function(u,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var h=d;!e.isUndefined(h);h=this.parent(h))if(h===u)throw new Error("Setting "+d+" as parent of "+u+" would create a cycle");this.setNode(d)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=d,this._children[d][u]=!0,this},i.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},i.prototype.parent=function(u){if(this._isCompound){var d=this._parent[u];if(d!==n)return d}},i.prototype.children=function(u){if(e.isUndefined(u)&&(u=n),this._isCompound){var d=this._children[u];if(d)return e.keys(d)}else{if(u===n)return this.nodes();if(this.hasNode(u))return[]}},i.prototype.predecessors=function(u){var d=this._preds[u];if(d)return e.keys(d)},i.prototype.successors=function(u){var d=this._sucs[u];if(d)return e.keys(d)},i.prototype.neighbors=function(u){var d=this.predecessors(u);if(d)return e.union(d,this.successors(u))},i.prototype.isLeaf=function(u){var d;return this.isDirected()?d=this.successors(u):d=this.neighbors(u),d.length===0},i.prototype.filterNodes=function(u){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var h=this;e.each(this._nodes,function(v,y){u(y)&&d.setNode(y,v)}),e.each(this._edgeObjs,function(v){d.hasNode(v.v)&&d.hasNode(v.w)&&d.setEdge(v,h.edge(v))});var f={};function g(v){var y=h.parent(v);return y===void 0||d.hasNode(y)?(f[v]=y,y):y in f?f[y]:g(y)}return this._isCompound&&e.each(d.nodes(),function(v){d.setParent(v,g(v))}),d},i.prototype.setDefaultEdgeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultEdgeLabelFn=u,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(u,d){var h=this,f=arguments;return e.reduce(u,function(g,v){return f.length>1?h.setEdge(g,v,d):h.setEdge(g,v),v}),this},i.prototype.setEdge=function(){var u,d,h,f,g=!1,v=arguments[0];typeof v=="object"&&v!==null&&"v"in v?(u=v.v,d=v.w,h=v.name,arguments.length===2&&(f=arguments[1],g=!0)):(u=v,d=arguments[1],h=arguments[3],arguments.length>2&&(f=arguments[2],g=!0)),u=""+u,d=""+d,e.isUndefined(h)||(h=""+h);var y=o(this._isDirected,u,d,h);if(e.has(this._edgeLabels,y))return g&&(this._edgeLabels[y]=f),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(d),this._edgeLabels[y]=g?f:this._defaultEdgeLabelFn(u,d,h);var w=l(this._isDirected,u,d,h);return u=w.v,d=w.w,Object.freeze(w),this._edgeObjs[y]=w,a(this._preds[d],u),a(this._sucs[u],d),this._in[d][y]=w,this._out[u][y]=w,this._edgeCount++,this},i.prototype.edge=function(u,d,h){var f=arguments.length===1?c(this._isDirected,arguments[0]):o(this._isDirected,u,d,h);return this._edgeLabels[f]},i.prototype.hasEdge=function(u,d,h){var f=arguments.length===1?c(this._isDirected,arguments[0]):o(this._isDirected,u,d,h);return e.has(this._edgeLabels,f)},i.prototype.removeEdge=function(u,d,h){var f=arguments.length===1?c(this._isDirected,arguments[0]):o(this._isDirected,u,d,h),g=this._edgeObjs[f];return g&&(u=g.v,d=g.w,delete this._edgeLabels[f],delete this._edgeObjs[f],s(this._preds[d],u),s(this._sucs[u],d),delete this._in[d][f],delete this._out[u][f],this._edgeCount--),this},i.prototype.inEdges=function(u,d){var h=this._in[u];if(h){var f=e.values(h);return d?e.filter(f,function(g){return g.v===d}):f}},i.prototype.outEdges=function(u,d){var h=this._out[u];if(h){var f=e.values(h);return d?e.filter(f,function(g){return g.w===d}):f}},i.prototype.nodeEdges=function(u,d){var h=this.inEdges(u,d);if(h)return h.concat(this.outEdges(u,d))};function a(u,d){u[d]?u[d]++:u[d]=1}function s(u,d){--u[d]||delete u[d]}function o(u,d,h,f){var g=""+d,v=""+h;if(!u&&g>v){var y=g;g=v,v=y}return g+r+v+r+(e.isUndefined(f)?t:f)}function l(u,d,h,f){var g=""+d,v=""+h;if(!u&&g>v){var y=g;g=v,v=y}var w={v:g,w:v};return f&&(w.name=f),w}function c(u,d){return o(u,d.v,d.w,d.name)}return ts}var ns,Mg;function E_(){return Mg||(Mg=1,ns="2.1.8"),ns}var rs,Ng;function x_(){return Ng||(Ng=1,rs={Graph:Pc(),version:E_()}),rs}var is,qg;function L_(){if(qg)return is;qg=1;var e=qe(),t=Pc();is={write:n,read:a};function n(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function r(s){return e.map(s.nodes(),function(o){var l=s.node(o),c=s.parent(o),u={v:o};return e.isUndefined(l)||(u.value=l),e.isUndefined(c)||(u.parent=c),u})}function i(s){return e.map(s.edges(),function(o){var l=s.edge(o),c={v:o.v,w:o.w};return e.isUndefined(o.name)||(c.name=o.name),e.isUndefined(l)||(c.value=l),c})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(s.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return is}var as,Fg;function T_(){if(Fg)return as;Fg=1;var e=qe();as=t;function t(n){var r={},i=[],a;function s(o){e.has(r,o)||(r[o]=!0,a.push(o),e.each(n.successors(o),s),e.each(n.predecessors(o),s))}return e.each(n.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return as}var os,Dg;function O1(){if(Dg)return os;Dg=1;var e=qe();os=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r},os}var ss,Og;function G1(){if(Og)return ss;Og=1;var e=qe(),t=O1();ss=r;var n=e.constant(1);function r(a,s,o,l){return i(a,String(s),o||n,l||function(c){return a.outEdges(c)})}function i(a,s,o,l){var c={},u=new t,d,h,f=function(g){var v=g.v!==d?g.v:g.w,y=c[v],w=o(g),p=h.distance+w;if(w<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+w);p<y.distance&&(y.distance=p,y.predecessor=d,u.decrease(v,p))};for(a.nodes().forEach(function(g){var v=g===s?0:Number.POSITIVE_INFINITY;c[g]={distance:v},u.add(g,v)});u.size()>0&&(d=u.removeMin(),h=c[d],h.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(f);return c}return ss}var ls,Gg;function R_(){if(Gg)return ls;Gg=1;var e=G1(),t=qe();ls=n;function n(r,i,a){return t.transform(r.nodes(),function(s,o){s[o]=e(r,o,i,a)},{})}return ls}var cs,Bg;function B1(){if(Bg)return cs;Bg=1;var e=qe();cs=t;function t(n){var r=0,i=[],a={},s=[];function o(l){var c=a[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(h){e.has(a,h)?a[h].onStack&&(c.lowlink=Math.min(c.lowlink,a[h].index)):(o(h),c.lowlink=Math.min(c.lowlink,a[h].lowlink))}),c.lowlink===c.index){var u=[],d;do d=i.pop(),a[d].onStack=!1,u.push(d);while(l!==d);s.push(u)}}return n.nodes().forEach(function(l){e.has(a,l)||o(l)}),s}return cs}var us,Vg;function A_(){if(Vg)return us;Vg=1;var e=qe(),t=B1();us=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return us}var ds,Ug;function P_(){if(Ug)return ds;Ug=1;var e=qe();ds=n;var t=e.constant(1);function n(i,a,s){return r(i,a||t,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},l=i.nodes();return l.forEach(function(c){o[c]={},o[c][c]={distance:0},l.forEach(function(u){c!==u&&(o[c][u]={distance:Number.POSITIVE_INFINITY})}),s(c).forEach(function(u){var d=u.v===c?u.w:u.v,h=a(u);o[c][d]={distance:h,predecessor:c}})}),l.forEach(function(c){var u=o[c];l.forEach(function(d){var h=o[d];l.forEach(function(f){var g=h[c],v=u[f],y=h[f],w=g.distance+v.distance;w<y.distance&&(y.distance=w,y.predecessor=v.predecessor)})})}),o}return ds}var hs,Hg;function V1(){if(Hg)return hs;Hg=1;var e=qe();hs=t,t.CycleException=n;function t(r){var i={},a={},s=[];function o(l){if(e.has(a,l))throw new n;e.has(i,l)||(a[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete a[l],s.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,hs}var fs,Wg;function I_(){if(Wg)return fs;Wg=1;var e=V1();fs=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return fs}var gs,zg;function U1(){if(zg)return gs;zg=1;var e=qe();gs=t;function t(r,i,a){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(c){if(!r.hasNode(c))throw new Error("Graph does not have node: "+c);n(r,c,a==="post",l,s,o)}),o}function n(r,i,a,s,o,l){e.has(s,i)||(s[i]=!0,a||l.push(i),e.each(o(i),function(c){n(r,c,a,s,o,l)}),a&&l.push(i))}return gs}var ps,jg;function k_(){if(jg)return ps;jg=1;var e=U1();ps=t;function t(n,r){return e(n,r,"post")}return ps}var ms,$g;function M_(){if($g)return ms;$g=1;var e=U1();ms=t;function t(n,r){return e(n,r,"pre")}return ms}var vs,Yg;function N_(){if(Yg)return vs;Yg=1;var e=qe(),t=Pc(),n=O1();vs=r;function r(i,a){var s=new t,o={},l=new n,c;function u(h){var f=h.v===c?h.w:h.v,g=l.priority(f);if(g!==void 0){var v=a(h);v<g&&(o[f]=c,l.decrease(f,v))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(i.nodes()[0],0);for(var d=!1;l.size()>0;){if(c=l.removeMin(),e.has(o,c))s.setEdge(c,o[c]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(c).forEach(u)}return s}return vs}var ys,Kg;function q_(){return Kg||(Kg=1,ys={components:T_(),dijkstra:G1(),dijkstraAll:R_(),findCycles:A_(),floydWarshall:P_(),isAcyclic:I_(),postorder:k_(),preorder:M_(),prim:N_(),tarjan:B1(),topsort:V1()}),ys}var _s,Xg;function F_(){if(Xg)return _s;Xg=1;var e=x_();return _s={Graph:e.Graph,json:L_(),alg:q_(),version:e.version},_s}var bs,Jg;function Oe(){if(Jg)return bs;Jg=1;var e;if(typeof gc=="function")try{e=F_()}catch{}return e||(e=window.graphlib),bs=e,bs}var ws,Zg;function D_(){if(Zg)return ws;Zg=1;var e=f1(),t=1,n=4;function r(i){return e(i,t|n)}return ws=r,ws}var Cs,Qg;function or(){if(Qg)return Cs;Qg=1;var e=mt(),t=Ke(),n=Jn(),r=Ne();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?t(o)&&n(s,o.length):l=="string"&&s in o)?e(o[s],a):!1}return Cs=i,Cs}var Ss,e0;function O_(){if(e0)return Ss;e0=1;var e=ar(),t=mt(),n=or(),r=st(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,l){o=Object(o);var c=-1,u=l.length,d=u>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(u=1);++c<u;)for(var h=l[c],f=r(h),g=-1,v=f.length;++g<v;){var y=f[g],w=o[y];(w===void 0||t(w,i[y])&&!a.call(o,y))&&(o[y]=h[y])}return o});return Ss=s,Ss}var Es,t0;function G_(){if(t0)return Es;t0=1;var e=Xe(),t=Ke(),n=et();function r(i){return function(a,s,o){var l=Object(a);if(!t(a)){var c=e(s,3);a=n(a),s=function(d){return c(l[d],d,l)}}var u=i(a,s,o);return u>-1?l[c?a[u]:u]:void 0}}return Es=r,Es}var xs,n0;function B_(){if(n0)return xs;n0=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return xs=t,xs}var Ls,r0;function V_(){if(r0)return Ls;r0=1;var e=B_(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Ls=n,Ls}var Ts,i0;function U_(){if(i0)return Ts;i0=1;var e=V_(),t=Ne(),n=bt(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(c){if(typeof c=="number")return c;if(n(c))return r;if(t(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=t(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=e(c);var d=a.test(c);return d||s.test(c)?o(c.slice(2),d?2:8):i.test(c)?r:+c}return Ts=l,Ts}var Rs,a0;function H1(){if(a0)return Rs;a0=1;var e=U_(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-1/0){var a=i<0?-1:1;return a*n}return i===i?i:0}return Rs=r,Rs}var As,o0;function H_(){if(o0)return As;o0=1;var e=H1();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return As=t,As}var Ps,s0;function W_(){if(s0)return Ps;s0=1;var e=q1(),t=Xe(),n=H_(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var c=o==null?0:n(o);return c<0&&(c=r(l+c,0)),e(a,t(s,3),c)}return Ps=i,Ps}var Is,l0;function z_(){if(l0)return Is;l0=1;var e=G_(),t=W_(),n=e(t);return Is=n,Is}var ks,c0;function W1(){if(c0)return ks;c0=1;var e=Ac();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return ks=t,ks}var Ms,u0;function j_(){if(u0)return Ms;u0=1;var e=xc(),t=g1(),n=st();function r(i,a){return i==null?i:e(i,t(a),n)}return Ms=r,Ms}var Ns,d0;function $_(){if(d0)return Ns;d0=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Ns=e,Ns}var qs,h0;function Y_(){if(h0)return qs;h0=1;var e=Kn(),t=Lc(),n=Xe();function r(i,a){var s={};return a=n(a,3),t(i,function(o,l,c){e(s,l,a(o,l,c))}),s}return qs=r,qs}var Fs,f0;function Ic(){if(f0)return Fs;f0=1;var e=bt();function t(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=r(o);if(l!=null&&(c===void 0?l===l&&!e(l):i(l,c)))var c=l,u=o}return u}return Fs=t,Fs}var Ds,g0;function K_(){if(g0)return Ds;g0=1;function e(t,n){return t>n}return Ds=e,Ds}var Os,p0;function X_(){if(p0)return Os;p0=1;var e=Ic(),t=K_(),n=lt();function r(i){return i&&i.length?e(i,n,t):void 0}return Os=r,Os}var Gs,m0;function z1(){if(m0)return Gs;m0=1;var e=Kn(),t=mt();function n(r,i,a){(a!==void 0&&!t(r[i],a)||a===void 0&&!(i in r))&&e(r,i,a)}return Gs=n,Gs}var Bs,v0;function J_(){if(v0)return Bs;v0=1;var e=at(),t=er(),n=He(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function c(u){if(!n(u)||e(u)!=r)return!1;var d=t(u);if(d===null)return!0;var h=o.call(d,"constructor")&&d.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==l}return Bs=c,Bs}var Vs,y0;function j1(){if(y0)return Vs;y0=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return Vs=e,Vs}var Us,_0;function Z_(){if(_0)return Us;_0=1;var e=En(),t=st();function n(r){return e(r,t(r))}return Us=n,Us}var Hs,b0;function Q_(){if(b0)return Hs;b0=1;var e=z1(),t=t1(),n=u1(),r=n1(),i=h1(),a=xn(),s=_e(),o=F1(),l=yt(),c=Sn(),u=Ne(),d=J_(),h=Ln(),f=j1(),g=Z_();function v(y,w,p,m,_,C,x){var P=f(y,p),R=f(w,p),T=x.get(R);if(T){e(y,p,T);return}var E=C?C(P,R,p+"",y,w,x):void 0,A=E===void 0;if(A){var N=s(R),b=!N&&l(R),L=!N&&!b&&h(R);E=R,N||b||L?s(P)?E=P:o(P)?E=r(P):b?(A=!1,E=t(R,!0)):L?(A=!1,E=n(R,!0)):E=[]:d(R)||a(R)?(E=P,a(P)?E=g(P):(!u(P)||c(P))&&(E=i(R))):A=!1}A&&(x.set(R,E),_(E,R,m,C,x),x.delete(R)),e(y,p,E)}return Hs=v,Hs}var Ws,w0;function eb(){if(w0)return Ws;w0=1;var e=Yn(),t=z1(),n=xc(),r=Q_(),i=Ne(),a=st(),s=j1();function o(l,c,u,d,h){l!==c&&n(c,function(f,g){if(h||(h=new e),i(f))r(l,c,g,u,o,d,h);else{var v=d?d(s(l,g),f,g+"",l,c,h):void 0;v===void 0&&(v=f),t(l,g,v)}},a)}return Ws=o,Ws}var zs,C0;function tb(){if(C0)return zs;C0=1;var e=ar(),t=or();function n(r){return e(function(i,a){var s=-1,o=a.length,l=o>1?a[o-1]:void 0,c=o>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,c&&t(a[0],a[1],c)&&(l=o<3?void 0:l,o=1),i=Object(i);++s<o;){var u=a[s];u&&r(i,u,s,l)}return i})}return zs=n,zs}var js,S0;function nb(){if(S0)return js;S0=1;var e=eb(),t=tb(),n=t(function(r,i,a){e(r,i,a)});return js=n,js}var $s,E0;function $1(){if(E0)return $s;E0=1;function e(t,n){return t<n}return $s=e,$s}var Ys,x0;function rb(){if(x0)return Ys;x0=1;var e=Ic(),t=$1(),n=lt();function r(i){return i&&i.length?e(i,n,t):void 0}return Ys=r,Ys}var Ks,L0;function ib(){if(L0)return Ks;L0=1;var e=Ic(),t=Xe(),n=$1();function r(i,a){return i&&i.length?e(i,t(a,2),n):void 0}return Ks=r,Ks}var Xs,T0;function ab(){if(T0)return Xs;T0=1;var e=Ge(),t=function(){return e.Date.now()};return Xs=t,Xs}var Js,R0;function ob(){if(R0)return Js;R0=1;var e=Xn(),t=rr(),n=Jn(),r=Ne(),i=Tn();function a(s,o,l,c){if(!r(s))return s;o=t(o,s);for(var u=-1,d=o.length,h=d-1,f=s;f!=null&&++u<d;){var g=i(o[u]),v=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return s;if(u!=h){var y=f[g];v=c?c(y,g,f):void 0,v===void 0&&(v=r(y)?y:n(o[u+1])?[]:{})}e(f,g,v),f=f[g]}return s}return Js=a,Js}var Zs,A0;function sb(){if(A0)return Zs;A0=1;var e=ir(),t=ob(),n=rr();function r(i,a,s){for(var o=-1,l=a.length,c={};++o<l;){var u=a[o],d=e(i,u);s(d,u)&&t(c,n(u,i),d)}return c}return Zs=r,Zs}var Qs,P0;function lb(){if(P0)return Qs;P0=1;var e=sb(),t=x1();function n(r,i){return e(r,i,function(a,s){return t(r,s)})}return Qs=n,Qs}var el,I0;function cb(){if(I0)return el;I0=1;var e=W1(),t=M1(),n=N1();function r(i){return n(t(i,void 0,e),i+"")}return el=r,el}var tl,k0;function ub(){if(k0)return tl;k0=1;var e=lb(),t=cb(),n=t(function(r,i){return r==null?{}:e(r,i)});return tl=n,tl}var nl,M0;function db(){if(M0)return nl;M0=1;var e=Math.ceil,t=Math.max;function n(r,i,a,s){for(var o=-1,l=t(e((i-r)/(a||1)),0),c=Array(l);l--;)c[s?l:++o]=r,r+=a;return c}return nl=n,nl}var rl,N0;function hb(){if(N0)return rl;N0=1;var e=db(),t=or(),n=H1();function r(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),e(a,s,o,i)}}return rl=r,rl}var il,q0;function fb(){if(q0)return il;q0=1;var e=hb(),t=e();return il=t,il}var al,F0;function gb(){if(F0)return al;F0=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return al=e,al}var ol,D0;function pb(){if(D0)return ol;D0=1;var e=bt();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=e(n),l=r!==void 0,c=r===null,u=r===r,d=e(r);if(!c&&!d&&!o&&n>r||o&&l&&u&&!c&&!d||a&&l&&u||!i&&u||!s)return 1;if(!a&&!o&&!d&&n<r||d&&i&&s&&!a&&!o||c&&i&&s||!l&&s||!u)return-1}return 0}return ol=t,ol}var sl,O0;function mb(){if(O0)return sl;O0=1;var e=pb();function t(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,l=s.length,c=i.length;++a<l;){var u=e(s[a],o[a]);if(u){if(a>=c)return u;var d=i[a];return u*(d=="desc"?-1:1)}}return n.index-r.index}return sl=t,sl}var ll,G0;function vb(){if(G0)return ll;G0=1;var e=nr(),t=ir(),n=Xe(),r=P1(),i=gb(),a=Zn(),s=mb(),o=lt(),l=_e();function c(u,d,h){d.length?d=e(d,function(v){return l(v)?function(y){return t(y,v.length===1?v[0]:v)}:v}):d=[o];var f=-1;d=e(d,a(n));var g=r(u,function(v,y,w){var p=e(d,function(m){return m(v)});return{criteria:p,index:++f,value:v}});return i(g,function(v,y){return s(v,y,h)})}return ll=c,ll}var cl,B0;function yb(){if(B0)return cl;B0=1;var e=Ac(),t=vb(),n=ar(),r=or(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return cl=i,cl}var ul,V0;function _b(){if(V0)return ul;V0=1;var e=S1(),t=0;function n(r){var i=++t;return e(r)+i}return ul=n,ul}var dl,U0;function bb(){if(U0)return dl;U0=1;function e(t,n,r){for(var i=-1,a=t.length,s=n.length,o={};++i<a;){var l=i<s?n[i]:void 0;r(o,t[i],l)}return o}return dl=e,dl}var hl,H0;function wb(){if(H0)return hl;H0=1;var e=Xn(),t=bb();function n(r,i){return t(r||[],i||[],e)}return hl=n,hl}var fl,W0;function he(){if(W0)return fl;W0=1;var e;if(typeof gc=="function")try{e={cloneDeep:D_(),constant:Ec(),defaults:O_(),each:m1(),filter:T1(),find:z_(),flatten:W1(),forEach:p1(),forIn:j_(),has:R1(),isUndefined:A1(),last:$_(),map:I1(),mapValues:Y_(),max:X_(),merge:nb(),min:rb(),minBy:ib(),now:ab(),pick:ub(),range:fb(),reduce:k1(),sortBy:yb(),uniqueId:_b(),values:D1(),zipObject:wb()}}catch{}return e||(e=window._),fl=e,fl}var gl,z0;function Cb(){if(z0)return gl;z0=1,gl=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,a=i._prev;a!==i;)r.push(JSON.stringify(a,n)),a=a._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return gl}var pl,j0;function Sb(){if(j0)return pl;j0=1;var e=he(),t=Oe().Graph,n=Cb();pl=i;var r=e.constant(1);function i(c,u){if(c.nodeCount()<=1)return[];var d=o(c,u||r),h=a(d.graph,d.buckets,d.zeroIdx);return e.flatten(e.map(h,function(f){return c.outEdges(f.v,f.w)}),!0)}function a(c,u,d){for(var h=[],f=u[u.length-1],g=u[0],v;c.nodeCount();){for(;v=g.dequeue();)s(c,u,d,v);for(;v=f.dequeue();)s(c,u,d,v);if(c.nodeCount()){for(var y=u.length-2;y>0;--y)if(v=u[y].dequeue(),v){h=h.concat(s(c,u,d,v,!0));break}}}return h}function s(c,u,d,h,f){var g=f?[]:void 0;return e.forEach(c.inEdges(h.v),function(v){var y=c.edge(v),w=c.node(v.v);f&&g.push({v:v.v,w:v.w}),w.out-=y,l(u,d,w)}),e.forEach(c.outEdges(h.v),function(v){var y=c.edge(v),w=v.w,p=c.node(w);p.in-=y,l(u,d,p)}),c.removeNode(h.v),g}function o(c,u){var d=new t,h=0,f=0;e.forEach(c.nodes(),function(y){d.setNode(y,{v:y,in:0,out:0})}),e.forEach(c.edges(),function(y){var w=d.edge(y.v,y.w)||0,p=u(y),m=w+p;d.setEdge(y.v,y.w,m),f=Math.max(f,d.node(y.v).out+=p),h=Math.max(h,d.node(y.w).in+=p)});var g=e.range(f+h+3).map(function(){return new n}),v=h+1;return e.forEach(d.nodes(),function(y){l(g,v,d.node(y))}),{graph:d,buckets:g,zeroIdx:v}}function l(c,u,d){d.out?d.in?c[d.out-d.in+u].enqueue(d):c[c.length-1].enqueue(d):c[0].enqueue(d)}return pl}var ml,$0;function Eb(){if($0)return ml;$0=1;var e=he(),t=Sb();ml={run:n,undo:i};function n(a){var s=a.graph().acyclicer==="greedy"?t(a,o(a)):r(a);e.forEach(s,function(l){var c=a.edge(l);a.removeEdge(l),c.forwardName=l.name,c.reversed=!0,a.setEdge(l.w,l.v,c,e.uniqueId("rev"))});function o(l){return function(c){return l.edge(c).weight}}}function r(a){var s=[],o={},l={};function c(u){e.has(l,u)||(l[u]=!0,o[u]=!0,e.forEach(a.outEdges(u),function(d){e.has(o,d.w)?s.push(d):c(d.w)}),delete o[u])}return e.forEach(a.nodes(),c),s}function i(a){e.forEach(a.edges(),function(s){var o=a.edge(s);if(o.reversed){a.removeEdge(s);var l=o.forwardName;delete o.reversed,delete o.forwardName,a.setEdge(s.w,s.v,o,l)}})}return ml}var vl,Y0;function ke(){if(Y0)return vl;Y0=1;var e=he(),t=Oe().Graph;vl={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:s,intersectRect:o,buildLayerMatrix:l,normalizeRanks:c,removeEmptyRanks:u,addBorderNode:d,maxRank:h,partition:f,time:g,notime:v};function n(y,w,p,m){var _;do _=e.uniqueId(m);while(y.hasNode(_));return p.dummy=w,y.setNode(_,p),_}function r(y){var w=new t().setGraph(y.graph());return e.forEach(y.nodes(),function(p){w.setNode(p,y.node(p))}),e.forEach(y.edges(),function(p){var m=w.edge(p.v,p.w)||{weight:0,minlen:1},_=y.edge(p);w.setEdge(p.v,p.w,{weight:m.weight+_.weight,minlen:Math.max(m.minlen,_.minlen)})}),w}function i(y){var w=new t({multigraph:y.isMultigraph()}).setGraph(y.graph());return e.forEach(y.nodes(),function(p){y.children(p).length||w.setNode(p,y.node(p))}),e.forEach(y.edges(),function(p){w.setEdge(p,y.edge(p))}),w}function a(y){var w=e.map(y.nodes(),function(p){var m={};return e.forEach(y.outEdges(p),function(_){m[_.w]=(m[_.w]||0)+y.edge(_).weight}),m});return e.zipObject(y.nodes(),w)}function s(y){var w=e.map(y.nodes(),function(p){var m={};return e.forEach(y.inEdges(p),function(_){m[_.v]=(m[_.v]||0)+y.edge(_).weight}),m});return e.zipObject(y.nodes(),w)}function o(y,w){var p=y.x,m=y.y,_=w.x-p,C=w.y-m,x=y.width/2,P=y.height/2;if(!_&&!C)throw new Error("Not possible to find intersection inside of the rectangle");var R,T;return Math.abs(C)*x>Math.abs(_)*P?(C<0&&(P=-P),R=P*_/C,T=P):(_<0&&(x=-x),R=x,T=x*C/_),{x:p+R,y:m+T}}function l(y){var w=e.map(e.range(h(y)+1),function(){return[]});return e.forEach(y.nodes(),function(p){var m=y.node(p),_=m.rank;e.isUndefined(_)||(w[_][m.order]=p)}),w}function c(y){var w=e.min(e.map(y.nodes(),function(p){return y.node(p).rank}));e.forEach(y.nodes(),function(p){var m=y.node(p);e.has(m,"rank")&&(m.rank-=w)})}function u(y){var w=e.min(e.map(y.nodes(),function(C){return y.node(C).rank})),p=[];e.forEach(y.nodes(),function(C){var x=y.node(C).rank-w;p[x]||(p[x]=[]),p[x].push(C)});var m=0,_=y.graph().nodeRankFactor;e.forEach(p,function(C,x){e.isUndefined(C)&&x%_!==0?--m:m&&e.forEach(C,function(P){y.node(P).rank+=m})})}function d(y,w,p,m){var _={width:0,height:0};return arguments.length>=4&&(_.rank=p,_.order=m),n(y,"border",_,w)}function h(y){return e.max(e.map(y.nodes(),function(w){var p=y.node(w).rank;if(!e.isUndefined(p))return p}))}function f(y,w){var p={lhs:[],rhs:[]};return e.forEach(y,function(m){w(m)?p.lhs.push(m):p.rhs.push(m)}),p}function g(y,w){var p=e.now();try{return w()}finally{console.log(y+" time: "+(e.now()-p)+"ms")}}function v(y,w){return w()}return vl}var yl,K0;function xb(){if(K0)return yl;K0=1;var e=he(),t=ke();yl={run:n,undo:i};function n(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(s){r(a,s)})}function r(a,s){var o=s.v,l=a.node(o).rank,c=s.w,u=a.node(c).rank,d=s.name,h=a.edge(s),f=h.labelRank;if(u!==l+1){a.removeEdge(s);var g,v,y;for(y=0,++l;l<u;++y,++l)h.points=[],v={width:0,height:0,edgeLabel:h,edgeObj:s,rank:l},g=t.addDummyNode(a,"edge",v,"_d"),l===f&&(v.width=h.width,v.height=h.height,v.dummy="edge-label",v.labelpos=h.labelpos),a.setEdge(o,g,{weight:h.weight},d),y===0&&a.graph().dummyChains.push(g),o=g;a.setEdge(o,c,{weight:h.weight},d)}}function i(a){e.forEach(a.graph().dummyChains,function(s){var o=a.node(s),l=o.edgeLabel,c;for(a.setEdge(o.edgeObj,l);o.dummy;)c=a.successors(s)[0],a.removeNode(s),l.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(l.x=o.x,l.y=o.y,l.width=o.width,l.height=o.height),s=c,o=a.node(s)})}return yl}var _l,X0;function Dn(){if(X0)return _l;X0=1;var e=he();_l={longestPath:t,slack:n};function t(r){var i={};function a(s){var o=r.node(s);if(e.has(i,s))return o.rank;i[s]=!0;var l=e.min(e.map(r.outEdges(s),function(c){return a(c.w)-r.edge(c).minlen}));return(l===Number.POSITIVE_INFINITY||l===void 0||l===null)&&(l=0),o.rank=l}e.forEach(r.sources(),a)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return _l}var bl,J0;function Y1(){if(J0)return bl;J0=1;var e=he(),t=Oe().Graph,n=Dn().slack;bl=r;function r(o){var l=new t({directed:!1}),c=o.nodes()[0],u=o.nodeCount();l.setNode(c,{});for(var d,h;i(l,o)<u;)d=a(l,o),h=l.hasNode(d.v)?n(o,d):-n(o,d),s(l,o,h);return l}function i(o,l){function c(u){e.forEach(l.nodeEdges(u),function(d){var h=d.v,f=u===h?d.w:h;!o.hasNode(f)&&!n(l,d)&&(o.setNode(f,{}),o.setEdge(u,f,{}),c(f))})}return e.forEach(o.nodes(),c),o.nodeCount()}function a(o,l){return e.minBy(l.edges(),function(c){if(o.hasNode(c.v)!==o.hasNode(c.w))return n(l,c)})}function s(o,l,c){e.forEach(o.nodes(),function(u){l.node(u).rank+=c})}return bl}var wl,Z0;function Lb(){if(Z0)return wl;Z0=1;var e=he(),t=Y1(),n=Dn().slack,r=Dn().longestPath,i=Oe().alg.preorder,a=Oe().alg.postorder,s=ke().simplify;wl=o,o.initLowLimValues=d,o.initCutValues=l,o.calcCutValue=u,o.leaveEdge=f,o.enterEdge=g,o.exchangeEdges=v;function o(m){m=s(m),r(m);var _=t(m);d(_),l(_,m);for(var C,x;C=f(_);)x=g(_,m,C),v(_,m,C,x)}function l(m,_){var C=a(m,m.nodes());C=C.slice(0,C.length-1),e.forEach(C,function(x){c(m,_,x)})}function c(m,_,C){var x=m.node(C),P=x.parent;m.edge(C,P).cutvalue=u(m,_,C)}function u(m,_,C){var x=m.node(C),P=x.parent,R=!0,T=_.edge(C,P),E=0;return T||(R=!1,T=_.edge(P,C)),E=T.weight,e.forEach(_.nodeEdges(C),function(A){var N=A.v===C,b=N?A.w:A.v;if(b!==P){var L=N===R,S=_.edge(A).weight;if(E+=L?S:-S,w(m,C,b)){var I=m.edge(C,b).cutvalue;E+=L?-I:I}}}),E}function d(m,_){arguments.length<2&&(_=m.nodes()[0]),h(m,{},1,_)}function h(m,_,C,x,P){var R=C,T=m.node(x);return _[x]=!0,e.forEach(m.neighbors(x),function(E){e.has(_,E)||(C=h(m,_,C,E,x))}),T.low=R,T.lim=C++,P?T.parent=P:delete T.parent,C}function f(m){return e.find(m.edges(),function(_){return m.edge(_).cutvalue<0})}function g(m,_,C){var x=C.v,P=C.w;_.hasEdge(x,P)||(x=C.w,P=C.v);var R=m.node(x),T=m.node(P),E=R,A=!1;R.lim>T.lim&&(E=T,A=!0);var N=e.filter(_.edges(),function(b){return A===p(m,m.node(b.v),E)&&A!==p(m,m.node(b.w),E)});return e.minBy(N,function(b){return n(_,b)})}function v(m,_,C,x){var P=C.v,R=C.w;m.removeEdge(P,R),m.setEdge(x.v,x.w,{}),d(m),l(m,_),y(m,_)}function y(m,_){var C=e.find(m.nodes(),function(P){return!_.node(P).parent}),x=i(m,C);x=x.slice(1),e.forEach(x,function(P){var R=m.node(P).parent,T=_.edge(P,R),E=!1;T||(T=_.edge(R,P),E=!0),_.node(P).rank=_.node(R).rank+(E?T.minlen:-T.minlen)})}function w(m,_,C){return m.hasEdge(_,C)}function p(m,_,C){return C.low<=_.lim&&_.lim<=C.lim}return wl}var Cl,Q0;function Tb(){if(Q0)return Cl;Q0=1;var e=Dn(),t=e.longestPath,n=Y1(),r=Lb();Cl=i;function i(l){switch(l.graph().ranker){case"network-simplex":o(l);break;case"tight-tree":s(l);break;case"longest-path":a(l);break;default:o(l)}}var a=t;function s(l){t(l),n(l)}function o(l){r(l)}return Cl}var Sl,ep;function Rb(){if(ep)return Sl;ep=1;var e=he();Sl=t;function t(i){var a=r(i);e.forEach(i.graph().dummyChains,function(s){for(var o=i.node(s),l=o.edgeObj,c=n(i,a,l.v,l.w),u=c.path,d=c.lca,h=0,f=u[h],g=!0;s!==l.w;){if(o=i.node(s),g){for(;(f=u[h])!==d&&i.node(f).maxRank<o.rank;)h++;f===d&&(g=!1)}if(!g){for(;h<u.length-1&&i.node(f=u[h+1]).minRank<=o.rank;)h++;f=u[h]}i.setParent(s,f),s=i.successors(s)[0]}})}function n(i,a,s,o){var l=[],c=[],u=Math.min(a[s].low,a[o].low),d=Math.max(a[s].lim,a[o].lim),h,f;h=s;do h=i.parent(h),l.push(h);while(h&&(a[h].low>u||d>a[h].lim));for(f=h,h=o;(h=i.parent(h))!==f;)c.push(h);return{path:l.concat(c.reverse()),lca:f}}function r(i){var a={},s=0;function o(l){var c=s;e.forEach(i.children(l),o),a[l]={low:c,lim:s++}}return e.forEach(i.children(),o),a}return Sl}var El,tp;function Ab(){if(tp)return El;tp=1;var e=he(),t=ke();El={run:n,cleanup:s};function n(o){var l=t.addDummyNode(o,"root",{},"_root"),c=i(o),u=e.max(e.values(c))-1,d=2*u+1;o.graph().nestingRoot=l,e.forEach(o.edges(),function(f){o.edge(f).minlen*=d});var h=a(o)+1;e.forEach(o.children(),function(f){r(o,l,d,h,u,c,f)}),o.graph().nodeRankFactor=d}function r(o,l,c,u,d,h,f){var g=o.children(f);if(!g.length){f!==l&&o.setEdge(l,f,{weight:0,minlen:c});return}var v=t.addBorderNode(o,"_bt"),y=t.addBorderNode(o,"_bb"),w=o.node(f);o.setParent(v,f),w.borderTop=v,o.setParent(y,f),w.borderBottom=y,e.forEach(g,function(p){r(o,l,c,u,d,h,p);var m=o.node(p),_=m.borderTop?m.borderTop:p,C=m.borderBottom?m.borderBottom:p,x=m.borderTop?u:2*u,P=_!==C?1:d-h[f]+1;o.setEdge(v,_,{weight:x,minlen:P,nestingEdge:!0}),o.setEdge(C,y,{weight:x,minlen:P,nestingEdge:!0})}),o.parent(f)||o.setEdge(l,v,{weight:0,minlen:d+h[f]})}function i(o){var l={};function c(u,d){var h=o.children(u);h&&h.length&&e.forEach(h,function(f){c(f,d+1)}),l[u]=d}return e.forEach(o.children(),function(u){c(u,1)}),l}function a(o){return e.reduce(o.edges(),function(l,c){return l+o.edge(c).weight},0)}function s(o){var l=o.graph();o.removeNode(l.nestingRoot),delete l.nestingRoot,e.forEach(o.edges(),function(c){var u=o.edge(c);u.nestingEdge&&o.removeEdge(c)})}return El}var xl,np;function Pb(){if(np)return xl;np=1;var e=he(),t=ke();xl=n;function n(i){function a(s){var o=i.children(s),l=i.node(s);if(o.length&&e.forEach(o,a),e.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var c=l.minRank,u=l.maxRank+1;c<u;++c)r(i,"borderLeft","_bl",s,l,c),r(i,"borderRight","_br",s,l,c)}}e.forEach(i.children(),a)}function r(i,a,s,o,l,c){var u={width:0,height:0,rank:c,borderType:a},d=l[a][c-1],h=t.addDummyNode(i,"border",u,s);l[a][c]=h,i.setParent(h,o),d&&i.setEdge(d,h,{weight:1})}return xl}var Ll,rp;function Ib(){if(rp)return Ll;rp=1;var e=he();Ll={adjust:t,undo:n};function t(c){var u=c.graph().rankdir.toLowerCase();(u==="lr"||u==="rl")&&r(c)}function n(c){var u=c.graph().rankdir.toLowerCase();(u==="bt"||u==="rl")&&a(c),(u==="lr"||u==="rl")&&(o(c),r(c))}function r(c){e.forEach(c.nodes(),function(u){i(c.node(u))}),e.forEach(c.edges(),function(u){i(c.edge(u))})}function i(c){var u=c.width;c.width=c.height,c.height=u}function a(c){e.forEach(c.nodes(),function(u){s(c.node(u))}),e.forEach(c.edges(),function(u){var d=c.edge(u);e.forEach(d.points,s),e.has(d,"y")&&s(d)})}function s(c){c.y=-c.y}function o(c){e.forEach(c.nodes(),function(u){l(c.node(u))}),e.forEach(c.edges(),function(u){var d=c.edge(u);e.forEach(d.points,l),e.has(d,"x")&&l(d)})}function l(c){var u=c.x;c.x=c.y,c.y=u}return Ll}var Tl,ip;function kb(){if(ip)return Tl;ip=1;var e=he();Tl=t;function t(n){var r={},i=e.filter(n.nodes(),function(c){return!n.children(c).length}),a=e.max(e.map(i,function(c){return n.node(c).rank})),s=e.map(e.range(a+1),function(){return[]});function o(c){if(!e.has(r,c)){r[c]=!0;var u=n.node(c);s[u.rank].push(c),e.forEach(n.successors(c),o)}}var l=e.sortBy(i,function(c){return n.node(c).rank});return e.forEach(l,o),s}return Tl}var Rl,ap;function Mb(){if(ap)return Rl;ap=1;var e=he();Rl=t;function t(r,i){for(var a=0,s=1;s<i.length;++s)a+=n(r,i[s-1],i[s]);return a}function n(r,i,a){for(var s=e.zipObject(a,e.map(a,function(h,f){return f})),o=e.flatten(e.map(i,function(h){return e.sortBy(e.map(r.outEdges(h),function(f){return{pos:s[f.w],weight:r.edge(f).weight}}),"pos")}),!0),l=1;l<a.length;)l<<=1;var c=2*l-1;l-=1;var u=e.map(new Array(c),function(){return 0}),d=0;return e.forEach(o.forEach(function(h){var f=h.pos+l;u[f]+=h.weight;for(var g=0;f>0;)f%2&&(g+=u[f+1]),f=f-1>>1,u[f]+=h.weight;d+=h.weight*g})),d}return Rl}var Al,op;function Nb(){if(op)return Al;op=1;var e=he();Al=t;function t(n,r){return e.map(r,function(i){var a=n.inEdges(i);if(a.length){var s=e.reduce(a,function(o,l){var c=n.edge(l),u=n.node(l.v);return{sum:o.sum+c.weight*u.order,weight:o.weight+c.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return Al}var Pl,sp;function qb(){if(sp)return Pl;sp=1;var e=he();Pl=t;function t(i,a){var s={};e.forEach(i,function(l,c){var u=s[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:c};e.isUndefined(l.barycenter)||(u.barycenter=l.barycenter,u.weight=l.weight)}),e.forEach(a.edges(),function(l){var c=s[l.v],u=s[l.w];!e.isUndefined(c)&&!e.isUndefined(u)&&(u.indegree++,c.out.push(s[l.w]))});var o=e.filter(s,function(l){return!l.indegree});return n(o)}function n(i){var a=[];function s(c){return function(u){u.merged||(e.isUndefined(u.barycenter)||e.isUndefined(c.barycenter)||u.barycenter>=c.barycenter)&&r(c,u)}}function o(c){return function(u){u.in.push(c),--u.indegree===0&&i.push(u)}}for(;i.length;){var l=i.pop();a.push(l),e.forEach(l.in.reverse(),s(l)),e.forEach(l.out,o(l))}return e.map(e.filter(a,function(c){return!c.merged}),function(c){return e.pick(c,["vs","i","barycenter","weight"])})}function r(i,a){var s=0,o=0;i.weight&&(s+=i.barycenter*i.weight,o+=i.weight),a.weight&&(s+=a.barycenter*a.weight,o+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=s/o,i.weight=o,i.i=Math.min(a.i,i.i),a.merged=!0}return Pl}var Il,lp;function Fb(){if(lp)return Il;lp=1;var e=he(),t=ke();Il=n;function n(a,s){var o=t.partition(a,function(v){return e.has(v,"barycenter")}),l=o.lhs,c=e.sortBy(o.rhs,function(v){return-v.i}),u=[],d=0,h=0,f=0;l.sort(i(!!s)),f=r(u,c,f),e.forEach(l,function(v){f+=v.vs.length,u.push(v.vs),d+=v.barycenter*v.weight,h+=v.weight,f=r(u,c,f)});var g={vs:e.flatten(u,!0)};return h&&(g.barycenter=d/h,g.weight=h),g}function r(a,s,o){for(var l;s.length&&(l=e.last(s)).i<=o;)s.pop(),a.push(l.vs),o++;return o}function i(a){return function(s,o){return s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:a?o.i-s.i:s.i-o.i}}return Il}var kl,cp;function Db(){if(cp)return kl;cp=1;var e=he(),t=Nb(),n=qb(),r=Fb();kl=i;function i(o,l,c,u){var d=o.children(l),h=o.node(l),f=h?h.borderLeft:void 0,g=h?h.borderRight:void 0,v={};f&&(d=e.filter(d,function(C){return C!==f&&C!==g}));var y=t(o,d);e.forEach(y,function(C){if(o.children(C.v).length){var x=i(o,C.v,c,u);v[C.v]=x,e.has(x,"barycenter")&&s(C,x)}});var w=n(y,c);a(w,v);var p=r(w,u);if(f&&(p.vs=e.flatten([f,p.vs,g],!0),o.predecessors(f).length)){var m=o.node(o.predecessors(f)[0]),_=o.node(o.predecessors(g)[0]);e.has(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+m.order+_.order)/(p.weight+2),p.weight+=2}return p}function a(o,l){e.forEach(o,function(c){c.vs=e.flatten(c.vs.map(function(u){return l[u]?l[u].vs:u}),!0)})}function s(o,l){e.isUndefined(o.barycenter)?(o.barycenter=l.barycenter,o.weight=l.weight):(o.barycenter=(o.barycenter*o.weight+l.barycenter*l.weight)/(o.weight+l.weight),o.weight+=l.weight)}return kl}var Ml,up;function Ob(){if(up)return Ml;up=1;var e=he(),t=Oe().Graph;Ml=n;function n(i,a,s){var o=r(i),l=new t({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(c){return i.node(c)});return e.forEach(i.nodes(),function(c){var u=i.node(c),d=i.parent(c);(u.rank===a||u.minRank<=a&&a<=u.maxRank)&&(l.setNode(c),l.setParent(c,d||o),e.forEach(i[s](c),function(h){var f=h.v===c?h.w:h.v,g=l.edge(f,c),v=e.isUndefined(g)?0:g.weight;l.setEdge(f,c,{weight:i.edge(h).weight+v})}),e.has(u,"minRank")&&l.setNode(c,{borderLeft:u.borderLeft[a],borderRight:u.borderRight[a]}))}),l}function r(i){for(var a;i.hasNode(a=e.uniqueId("_root")););return a}return Ml}var Nl,dp;function Gb(){if(dp)return Nl;dp=1;var e=he();Nl=t;function t(n,r,i){var a={},s;e.forEach(i,function(o){for(var l=n.parent(o),c,u;l;){if(c=n.parent(l),c?(u=a[c],a[c]=l):(u=s,s=l),u&&u!==l){r.setEdge(u,l);return}l=c}})}return Nl}var ql,hp;function Bb(){if(hp)return ql;hp=1;var e=he(),t=kb(),n=Mb(),r=Db(),i=Ob(),a=Gb(),s=Oe().Graph,o=ke();ql=l;function l(h){var f=o.maxRank(h),g=c(h,e.range(1,f+1),"inEdges"),v=c(h,e.range(f-1,-1,-1),"outEdges"),y=t(h);d(h,y);for(var w=Number.POSITIVE_INFINITY,p,m=0,_=0;_<4;++m,++_){u(m%2?g:v,m%4>=2),y=o.buildLayerMatrix(h);var C=n(h,y);C<w&&(_=0,p=e.cloneDeep(y),w=C)}d(h,p)}function c(h,f,g){return e.map(f,function(v){return i(h,v,g)})}function u(h,f){var g=new s;e.forEach(h,function(v){var y=v.graph().root,w=r(v,y,g,f);e.forEach(w.vs,function(p,m){v.node(p).order=m}),a(v,g,w.vs)})}function d(h,f){e.forEach(f,function(g){e.forEach(g,function(v,y){h.node(v).order=y})})}return ql}var Fl,fp;function Vb(){if(fp)return Fl;fp=1;var e=he(),t=Oe().Graph,n=ke();Fl={positionX:g,findType1Conflicts:r,findType2Conflicts:i,addConflict:s,hasConflict:o,verticalAlignment:l,horizontalCompaction:c,alignCoordinates:h,findSmallestWidthAlignment:d,balance:f};function r(w,p){var m={};function _(C,x){var P=0,R=0,T=C.length,E=e.last(x);return e.forEach(x,function(A,N){var b=a(w,A),L=b?w.node(b).order:T;(b||A===E)&&(e.forEach(x.slice(R,N+1),function(S){e.forEach(w.predecessors(S),function(I){var k=w.node(I),D=k.order;(D<P||L<D)&&!(k.dummy&&w.node(S).dummy)&&s(m,I,S)})}),R=N+1,P=L)}),x}return e.reduce(p,_),m}function i(w,p){var m={};function _(x,P,R,T,E){var A;e.forEach(e.range(P,R),function(N){A=x[N],w.node(A).dummy&&e.forEach(w.predecessors(A),function(b){var L=w.node(b);L.dummy&&(L.order<T||L.order>E)&&s(m,b,A)})})}function C(x,P){var R=-1,T,E=0;return e.forEach(P,function(A,N){if(w.node(A).dummy==="border"){var b=w.predecessors(A);b.length&&(T=w.node(b[0]).order,_(P,E,N,R,T),E=N,R=T)}_(P,E,P.length,T,x.length)}),P}return e.reduce(p,C),m}function a(w,p){if(w.node(p).dummy)return e.find(w.predecessors(p),function(m){return w.node(m).dummy})}function s(w,p,m){if(p>m){var _=p;p=m,m=_}var C=w[p];C||(w[p]=C={}),C[m]=!0}function o(w,p,m){if(p>m){var _=p;p=m,m=_}return e.has(w[p],m)}function l(w,p,m,_){var C={},x={},P={};return e.forEach(p,function(R){e.forEach(R,function(T,E){C[T]=T,x[T]=T,P[T]=E})}),e.forEach(p,function(R){var T=-1;e.forEach(R,function(E){var A=_(E);if(A.length){A=e.sortBy(A,function(I){return P[I]});for(var N=(A.length-1)/2,b=Math.floor(N),L=Math.ceil(N);b<=L;++b){var S=A[b];x[E]===E&&T<P[S]&&!o(m,E,S)&&(x[S]=E,x[E]=C[E]=C[S],T=P[S])}}})}),{root:C,align:x}}function c(w,p,m,_,C){var x={},P=u(w,p,m,C),R=C?"borderLeft":"borderRight";function T(N,b){for(var L=P.nodes(),S=L.pop(),I={};S;)I[S]?N(S):(I[S]=!0,L.push(S),L=L.concat(b(S))),S=L.pop()}function E(N){x[N]=P.inEdges(N).reduce(function(b,L){return Math.max(b,x[L.v]+P.edge(L))},0)}function A(N){var b=P.outEdges(N).reduce(function(S,I){return Math.min(S,x[I.w]-P.edge(I))},Number.POSITIVE_INFINITY),L=w.node(N);b!==Number.POSITIVE_INFINITY&&L.borderType!==R&&(x[N]=Math.max(x[N],b))}return T(E,P.predecessors.bind(P)),T(A,P.successors.bind(P)),e.forEach(_,function(N){x[N]=x[m[N]]}),x}function u(w,p,m,_){var C=new t,x=w.graph(),P=v(x.nodesep,x.edgesep,_);return e.forEach(p,function(R){var T;e.forEach(R,function(E){var A=m[E];if(C.setNode(A),T){var N=m[T],b=C.edge(N,A);C.setEdge(N,A,Math.max(P(w,E,T),b||0))}T=E})}),C}function d(w,p){return e.minBy(e.values(p),function(m){var _=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY;return e.forIn(m,function(x,P){var R=y(w,P)/2;_=Math.max(x+R,_),C=Math.min(x-R,C)}),_-C})}function h(w,p){var m=e.values(p),_=e.min(m),C=e.max(m);e.forEach(["u","d"],function(x){e.forEach(["l","r"],function(P){var R=x+P,T=w[R],E;if(T!==p){var A=e.values(T);E=P==="l"?_-e.min(A):C-e.max(A),E&&(w[R]=e.mapValues(T,function(N){return N+E}))}})})}function f(w,p){return e.mapValues(w.ul,function(m,_){if(p)return w[p.toLowerCase()][_];var C=e.sortBy(e.map(w,_));return(C[1]+C[2])/2})}function g(w){var p=n.buildLayerMatrix(w),m=e.merge(r(w,p),i(w,p)),_={},C;e.forEach(["u","d"],function(P){C=P==="u"?p:e.values(p).reverse(),e.forEach(["l","r"],function(R){R==="r"&&(C=e.map(C,function(N){return e.values(N).reverse()}));var T=(P==="u"?w.predecessors:w.successors).bind(w),E=l(w,C,m,T),A=c(w,C,E.root,E.align,R==="r");R==="r"&&(A=e.mapValues(A,function(N){return-N})),_[P+R]=A})});var x=d(w,_);return h(_,x),f(_,w.graph().align)}function v(w,p,m){return function(_,C,x){var P=_.node(C),R=_.node(x),T=0,E;if(T+=P.width/2,e.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":E=-P.width/2;break;case"r":E=P.width/2;break}if(E&&(T+=m?E:-E),E=0,T+=(P.dummy?p:w)/2,T+=(R.dummy?p:w)/2,T+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":E=R.width/2;break;case"r":E=-R.width/2;break}return E&&(T+=m?E:-E),E=0,T}}function y(w,p){return w.node(p).width}return Fl}var Dl,gp;function Ub(){if(gp)return Dl;gp=1;var e=he(),t=ke(),n=Vb().positionX;Dl=r;function r(a){a=t.asNonCompoundGraph(a),i(a),e.forEach(n(a),function(s,o){a.node(o).x=s})}function i(a){var s=t.buildLayerMatrix(a),o=a.graph().ranksep,l=0;e.forEach(s,function(c){var u=e.max(e.map(c,function(d){return a.node(d).height}));e.forEach(c,function(d){a.node(d).y=l+u/2}),l+=u+o})}return Dl}var Ol,pp;function Hb(){if(pp)return Ol;pp=1;var e=he(),t=Eb(),n=xb(),r=Tb(),i=ke().normalizeRanks,a=Rb(),s=ke().removeEmptyRanks,o=Ab(),l=Pb(),c=Ib(),u=Bb(),d=Ub(),h=ke(),f=Oe().Graph;Ol=g;function g(q,G){var V=G&&G.debugTiming?h.time:h.notime;V("layout",function(){var M=V("  buildLayoutGraph",function(){return T(q)});V("  runLayout",function(){v(M,V)}),V("  updateInputGraph",function(){y(q,M)})})}function v(q,G){G("    makeSpaceForEdgeLabels",function(){E(q)}),G("    removeSelfEdges",function(){F(q)}),G("    acyclic",function(){t.run(q)}),G("    nestingGraph.run",function(){o.run(q)}),G("    rank",function(){r(h.asNonCompoundGraph(q))}),G("    injectEdgeLabelProxies",function(){A(q)}),G("    removeEmptyRanks",function(){s(q)}),G("    nestingGraph.cleanup",function(){o.cleanup(q)}),G("    normalizeRanks",function(){i(q)}),G("    assignRankMinMax",function(){N(q)}),G("    removeEdgeLabelProxies",function(){b(q)}),G("    normalize.run",function(){n.run(q)}),G("    parentDummyChains",function(){a(q)}),G("    addBorderSegments",function(){l(q)}),G("    order",function(){u(q)}),G("    insertSelfEdges",function(){O(q)}),G("    adjustCoordinateSystem",function(){c.adjust(q)}),G("    position",function(){d(q)}),G("    positionSelfEdges",function(){H(q)}),G("    removeBorderNodes",function(){D(q)}),G("    normalize.undo",function(){n.undo(q)}),G("    fixupEdgeLabelCoords",function(){I(q)}),G("    undoCoordinateSystem",function(){c.undo(q)}),G("    translateGraph",function(){L(q)}),G("    assignNodeIntersects",function(){S(q)}),G("    reversePoints",function(){k(q)}),G("    acyclic.undo",function(){t.undo(q)})}function y(q,G){e.forEach(q.nodes(),function(V){var M=q.node(V),B=G.node(V);M&&(M.x=B.x,M.y=B.y,G.children(V).length&&(M.width=B.width,M.height=B.height))}),e.forEach(q.edges(),function(V){var M=q.edge(V),B=G.edge(V);M.points=B.points,e.has(B,"x")&&(M.x=B.x,M.y=B.y)}),q.graph().width=G.graph().width,q.graph().height=G.graph().height}var w=["nodesep","edgesep","ranksep","marginx","marginy"],p={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],_=["width","height"],C={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],P={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function T(q){var G=new f({multigraph:!0,compound:!0}),V=U(q.graph());return G.setGraph(e.merge({},p,j(V,w),e.pick(V,m))),e.forEach(q.nodes(),function(M){var B=U(q.node(M));G.setNode(M,e.defaults(j(B,_),C)),G.setParent(M,q.parent(M))}),e.forEach(q.edges(),function(M){var B=U(q.edge(M));G.setEdge(M,e.merge({},P,j(B,x),e.pick(B,R)))}),G}function E(q){var G=q.graph();G.ranksep/=2,e.forEach(q.edges(),function(V){var M=q.edge(V);M.minlen*=2,M.labelpos.toLowerCase()!=="c"&&(G.rankdir==="TB"||G.rankdir==="BT"?M.width+=M.labeloffset:M.height+=M.labeloffset)})}function A(q){e.forEach(q.edges(),function(G){var V=q.edge(G);if(V.width&&V.height){var M=q.node(G.v),B=q.node(G.w),W={rank:(B.rank-M.rank)/2+M.rank,e:G};h.addDummyNode(q,"edge-proxy",W,"_ep")}})}function N(q){var G=0;e.forEach(q.nodes(),function(V){var M=q.node(V);M.borderTop&&(M.minRank=q.node(M.borderTop).rank,M.maxRank=q.node(M.borderBottom).rank,G=e.max(G,M.maxRank))}),q.graph().maxRank=G}function b(q){e.forEach(q.nodes(),function(G){var V=q.node(G);V.dummy==="edge-proxy"&&(q.edge(V.e).labelRank=V.rank,q.removeNode(G))})}function L(q){var G=Number.POSITIVE_INFINITY,V=0,M=Number.POSITIVE_INFINITY,B=0,W=q.graph(),z=W.marginx||0,Y=W.marginy||0;function X(Z){var Q=Z.x,K=Z.y,de=Z.width,J=Z.height;G=Math.min(G,Q-de/2),V=Math.max(V,Q+de/2),M=Math.min(M,K-J/2),B=Math.max(B,K+J/2)}e.forEach(q.nodes(),function(Z){X(q.node(Z))}),e.forEach(q.edges(),function(Z){var Q=q.edge(Z);e.has(Q,"x")&&X(Q)}),G-=z,M-=Y,e.forEach(q.nodes(),function(Z){var Q=q.node(Z);Q.x-=G,Q.y-=M}),e.forEach(q.edges(),function(Z){var Q=q.edge(Z);e.forEach(Q.points,function(K){K.x-=G,K.y-=M}),e.has(Q,"x")&&(Q.x-=G),e.has(Q,"y")&&(Q.y-=M)}),W.width=V-G+z,W.height=B-M+Y}function S(q){e.forEach(q.edges(),function(G){var V=q.edge(G),M=q.node(G.v),B=q.node(G.w),W,z;V.points?(W=V.points[0],z=V.points[V.points.length-1]):(V.points=[],W=B,z=M),V.points.unshift(h.intersectRect(M,W)),V.points.push(h.intersectRect(B,z))})}function I(q){e.forEach(q.edges(),function(G){var V=q.edge(G);if(e.has(V,"x"))switch((V.labelpos==="l"||V.labelpos==="r")&&(V.width-=V.labeloffset),V.labelpos){case"l":V.x-=V.width/2+V.labeloffset;break;case"r":V.x+=V.width/2+V.labeloffset;break}})}function k(q){e.forEach(q.edges(),function(G){var V=q.edge(G);V.reversed&&V.points.reverse()})}function D(q){e.forEach(q.nodes(),function(G){if(q.children(G).length){var V=q.node(G),M=q.node(V.borderTop),B=q.node(V.borderBottom),W=q.node(e.last(V.borderLeft)),z=q.node(e.last(V.borderRight));V.width=Math.abs(z.x-W.x),V.height=Math.abs(B.y-M.y),V.x=W.x+V.width/2,V.y=M.y+V.height/2}}),e.forEach(q.nodes(),function(G){q.node(G).dummy==="border"&&q.removeNode(G)})}function F(q){e.forEach(q.edges(),function(G){if(G.v===G.w){var V=q.node(G.v);V.selfEdges||(V.selfEdges=[]),V.selfEdges.push({e:G,label:q.edge(G)}),q.removeEdge(G)}})}function O(q){var G=h.buildLayerMatrix(q);e.forEach(G,function(V){var M=0;e.forEach(V,function(B,W){var z=q.node(B);z.order=W+M,e.forEach(z.selfEdges,function(Y){h.addDummyNode(q,"selfedge",{width:Y.label.width,height:Y.label.height,rank:z.rank,order:W+ ++M,e:Y.e,label:Y.label},"_se")}),delete z.selfEdges})})}function H(q){e.forEach(q.nodes(),function(G){var V=q.node(G);if(V.dummy==="selfedge"){var M=q.node(V.e.v),B=M.x+M.width/2,W=M.y,z=V.x-B,Y=M.height/2;q.setEdge(V.e,V.label),q.removeNode(G),V.label.points=[{x:B+2*z/3,y:W-Y},{x:B+5*z/6,y:W-Y},{x:B+z,y:W},{x:B+5*z/6,y:W+Y},{x:B+2*z/3,y:W+Y}],V.label.x=V.x,V.label.y=V.y}})}function j(q,G){return e.mapValues(e.pick(q,G),Number)}function U(q){var G={};return e.forEach(q,function(V,M){G[M.toLowerCase()]=V}),G}return Ol}var Gl,mp;function Wb(){if(mp)return Gl;mp=1;var e=he(),t=ke(),n=Oe().Graph;Gl={debugOrdering:r};function r(i){var a=t.buildLayerMatrix(i),s=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(o){s.setNode(o,{label:o}),s.setParent(o,"layer"+i.node(o).rank)}),e.forEach(i.edges(),function(o){s.setEdge(o.v,o.w,{},o.name)}),e.forEach(a,function(o,l){var c="layer"+l;s.setNode(c,{rank:"same"}),e.reduce(o,function(u,d){return s.setEdge(u,d,{style:"invis"}),d})}),s}return Gl}var Bl,vp;function zb(){return vp||(vp=1,Bl="0.8.5"),Bl}var Vl,yp;function jb(){return yp||(yp=1,Vl={graphlib:Oe(),layout:Hb(),debug:Wb(),util:{time:ke().time,notime:ke().notime},version:zb()}),Vl}var $b=jb();const K1=sc($b);function Yb(...e){}const kc=.05,Mc=2.5;function Kb(e){let t;const n={...e,interactionTimers:{nodeHighlight:void 0,nodeUnhighlight:void 0,edgeHighlight:void 0,edgeUnhighlight:void 0},update:()=>{t&&Yl(n,t,n.data,n.opts)}};return{init:(r,i)=>{t=J1(n,r,i,{showRootNode:!0,layout:!0})},resize:()=>{var r;(r=n.onContainerResize)==null||r.call(n)},update:r=>{rm(),Yl(n,t,r,{layout:!0})},zoom:r=>{i5(t,r)},fitView:()=>{a5(n,t)},destroy:()=>{t.destroy()}}}function X1(e){const t=e.nodes+e.edges;return t>250?16:t>100?8:0}function J1(e,t,n,r){rm();const i=new we.Stage({container:t,width:t.clientWidth,height:t.clientHeight,draggable:!0});return i.add(new we.Layer),i.on("dragmove",()=>{Qe(i),e.setCursorIcon("grabbing")}),i.on("dragend",()=>{e.setCursorIcon("default")}),Z1(i,e),i.on("click",a=>{a.target===i&&am(e)}),i.on("mousemove",a=>{const s=e.hoveredEdge;s&&(clearTimeout(e.interactionTimers.edgeUnhighlight),em(e,s,Ze(),{updatePointer:!0,markHovered:!0}),e.interactionTimers.edgeUnhighlight=setTimeout(()=>{Rn(e,s,Ze())},200))}),e.onContainerResize=()=>{i.size({width:t.clientWidth,height:t.clientHeight}),Qe(i),i.batchDraw()},Yl(e,i,n,r),i}function Z1(e,t){e.off("wheel");const n=Xb(t.stats||{nodes:0,edges:0});e.on("wheel",om(r=>{if(r.evt.ctrlKey||r.evt.metaKey){r.evt.preventDefault();const i={x:e.x()-r.evt.deltaX,y:e.y()-r.evt.deltaY};e.position(i)}else{if(Math.abs(r.evt.deltaY)<Math.abs(r.evt.deltaX))return;r.evt.preventDefault();const i=e.scaleX(),a=e.getPointerPosition();if(!a)return;const s={x:(a.x-e.x())/i,y:(a.y-e.y())/i},o=r.evt.deltaY>0?Math.max(i/n,kc):Math.min(i*n,Mc),l={x:a.x-s.x*o,y:a.y-s.y*o};e.scale({x:o,y:o}),e.position(l)}Qe(e)},X1(t.stats||{nodes:0,edges:0})))}function Yl(e,t,n,r){var i,a,s,o;if(t instanceof HTMLDivElement)return J1(e,t,n,r);{const l=e.baseFontSize*.8,c=280,u=e.baseFontSize+1;let d;if(e.lastClicked){const w=(i=e.value)==null?void 0:i.node(e.lastClicked.nodeId);if(w){const p=w.visuals.group.absolutePosition(),_=t.getAbsoluteTransform().copy().invert().point(p);d={x:_.x*t.scaleX()+t.x(),y:_.y*t.scaleY()+t.y(),id:e.lastClicked.nodeId}}}else if(e.value){let w,p=1/0;const m=t.width(),_=t.height(),C=t.getAbsoluteTransform().copy().invert();if(e.value.nodes().forEach(x=>{const P=e.value.node(x);if(P&&P.visuals){const R=P.visuals.group.absolutePosition(),T=P.visuals.group.width(),E=P.visuals.group.height(),A=C.point(R),N=A.x*t.scaleX()+t.x(),b=A.y*t.scaleY()+t.y(),L=N+T*t.scaleX(),S=b+E*t.scaleY();L>0&&N<m&&S>0&&b<_&&N<p&&(p=N,w=P)}}),w){const x=w.visuals.group.absolutePosition(),P=C.point(x);d={x:P.x*t.scaleX()+t.x(),y:P.y*t.scaleY()+t.y(),id:w.id}}}t.getLayers()[0].destroyChildren(),e.collapsedNodes=e.collapsedNodes||new Set,e.loadAllPropsNodes=e.loadAllPropsNodes||new Set;const h=new K1.graphlib.Graph({directed:!0,multigraph:!1,compound:!0});h.setDefaultEdgeLabel(()=>({})),e.value=h;const f=(a=e.selectedNode)==null?void 0:a.id,g=(s=e.hoveredNode)==null?void 0:s.id;e.firstRoot=void 0,e.hoveredEdge=void 0,e.selectedNode=void 0,e.hoveredNode=void 0,e.disallowValueLoad=e.disallowValueLoad,e.maxDepth=e.maxDepth,e.noValueLoadBeyondMaxDepth=e.noValueLoadBeyondMaxDepth;const v=[];let y=0;for(const w of n){const{nodeData:p}=nm(e,{fontSize:e.baseFontSize,headerFontSize:u,headerLineHeight:u*1.5,lineHeight:e.baseFontSize*1.5,padding:l,charWidth:bp(e.baseFontSize),headerCharWidth:bp(u),maxContentWidth:c-l*2,maxNodeWidth:c,stage:t,dragThrottleDelay:()=>X1(e.stats)},w.value,tm(w.value,w.name),0,y++);v.push(p),p.name=w.name}if(e.firstRoot=v[0],e.opts=r,e.data=n,e.stats={nodes:e.value.nodeCount(),edges:e.value.edgeCount()},Z1(t,e),r5(e,t,r),f){const w=e.value.node(f);w&&Mn(e,w)}if(g){const w=e.value.node(g);w&&Q1(e,w,Ze())}if(d){const w=(o=e.value)==null?void 0:o.node(d.id);if(w){const p=w.visuals.group.absolutePosition(),_=t.getAbsoluteTransform().copy().invert().point(p),C={x:_.x*t.scaleX()+t.x(),y:_.y*t.scaleY()+t.y()},x={x:d.x-C.x,y:d.y-C.y};t.position({x:t.x()+x.x,y:t.y()+x.y})}}return e.lastClicked=void 0,t.batchDraw(),Qe(t),t}}function Qe(e){const t=e.scaleX(),n=e.x(),r=e.y(),i=20,a=100;let s=i*t;const o=a*t;let l="--value-diagram-large-grid-border",c="--value-diagram-small-grid-border";s<3&&(l="--value-diagram-small-grid-border",c="--value-diagram-extra-small-grid-border"),s<1&&(l="--value-diagram-extra-small-grid-border",s=0);const u=n%s,d=r%s,h=n%o,f=r%o,g=e.container();g&&(g.style.backgroundImage=`
        linear-gradient(to right, var(${c}) 1px, transparent 1px),
        linear-gradient(to bottom, var(${c}) 1px, transparent 1px),
        linear-gradient(to right, var(${l}) 1px, transparent 1px),
        linear-gradient(to bottom, var(${l}) 1px, transparent 1px)
      `,g.style.backgroundSize=`
        ${s}px ${s}px,
        ${s}px ${s}px,
        ${o}px ${o}px,
        ${o}px ${o}px
      `,g.style.backgroundPosition=`
        ${u}px ${d}px,
        ${u}px ${d}px,
        ${h}px ${f}px,
        ${h}px ${f}px
      `)}function Xb(e){const{nodes:t,edges:n}=e,r=Math.max(t,n),i=1.08,a=2.3;if(r<=50)return i;const s=Math.log10(r),o=i+(s-1)*.03;return Math.min(a,Math.max(i,o))}function Q1(e,t,n){if(n.highlightedNodes.has(t))return;n.highlightedNodes.add(t),e.hoveredNode&&e.hoveredNode!==t&&Ye(e,e.hoveredNode,Ze());const r=e.hoveredEdge;r&&(Rn(e,r,n),Ye(e,r.to,n),Ye(e,r.from,n),e.hoveredEdge=void 0),e.hoveredNode=t,e.selectedNode!==t&&t.visuals.highlight()}function Ye(e,t,n){n.unhighlightedNodes.has(t)||(n.unhighlightedNodes.add(t),e.selectedNode!==t&&t.visuals.unhighlight(),t.edges.forEach(r=>Rn(e,r,n)),e.hoveredNode===t&&(e.hoveredNode=void 0))}function em(e,t,n,r){if(n.highlightedEdges.has(t))return;n.highlightedEdges.add(t);const i=e.hoveredNode,a=e.hoveredEdge;i&&Ye(e,i,n),Ye(e,t.from,n),Ye(e,t.to,n),t.visuals.highlight(r),a!==t&&a&&Rn(e,a,n),r!=null&&r.markHovered&&(e.hoveredEdge=t)}function Rn(e,t,n){n.unhighlightedEdges.has(t)||(n.unhighlightedEdges.add(t),t.visuals.unhighlight(),Ye(e,t.to,n),Ye(e,t.from,n),e.hoveredEdge===t&&(e.hoveredEdge=void 0))}function Ze(){return{highlightedNodes:new Set,highlightedEdges:new Set,unhighlightedNodes:new Set,unhighlightedEdges:new Set}}function _p(e,t){return e.id===void 0&&(e.id=t.toString()),e.id}function tm(e,t){t=t||e.name||"unknown";const n=Up(e);return`${t}${n?`: ${n}`:""}`}function nm(e,t,n,r,i,a,s){var d;s&&!n.id&&_p(n,a);const o=s!=null&&s.id?`${s.id}-${n.id}`:a.toString(),l={id:o,value:n,edges:[],visuals:{},width:0,height:0,parent:s};let c=0;const u=Jb(n,r,t,{getEdges:()=>l.edges,onProp:h=>{_p(h,c)},onExpandableProp:h=>{var w,p,m,_;const f=!!((w=h.props)!=null&&w.length),g=`${o}-${h.id}`,v=(f||!e.disallowValueLoad)&&(!e.noValueLoadBeyondMaxDepth||i<(e.maxDepth||Number.MAX_VALUE)),y=v&&f&&!((p=e.collapsedNodes)!=null&&p.has(g));if(y||(m=e.collapsedNodes)==null||m.add(g),h.rangeNode){const C=n.parent||n;h.parent=C,h.queryPath=C.queryPath}if(h.cappedRange){const C=n.parent||n;h.props=h.props||[],h.props.push({loadActionNode:!0,expandable:!0,parent:C,queryPath:C.queryPath})}if(y){const{nodeId:C,nodeData:x}=nm(e,t,h,tm(h),i+1,c,l),P={visuals:t5({onEdgeClick:R=>{R==="end"?(wp(x),Mn(e,x)):(wp(l),Mn(e,l))},onMouseMove:()=>{clearTimeout(e.interactionTimers.edgeHighlight),clearTimeout(e.interactionTimers.edgeUnhighlight),clearTimeout(e.interactionTimers.nodeHighlight),clearTimeout(e.interactionTimers.nodeUnhighlight),queueMicrotask(()=>{clearTimeout(e.interactionTimers.edgeUnhighlight)}),e.interactionTimers.edgeHighlight=setTimeout(()=>{em(e,P,Ze(),{updatePointer:!0,markHovered:!0})},25)},onMouseOut:()=>{clearTimeout(e.interactionTimers.edgeHighlight),clearTimeout(e.interactionTimers.edgeUnhighlight),e.interactionTimers.edgeUnhighlight=setTimeout(()=>{Rn(e,P,Ze())},100)}}),from:l,to:x,propertyId:h.id};e.value.setEdge(o,C,P),l.edges.push(P),x.edges.push(P)}return c++,{onPropValueClick:()=>{var C,x,P;if(e.lastClicked={nodeId:o,propertyNodeId:g},(C=e.collapsedNodes)!=null&&C.has(g)?(P=e.collapsedNodes)==null||P.delete(g):(x=e.collapsedNodes)==null||x.add(g),h.loadAction)h.loadAction();else if(f)e.update();else{const R=h.parent?{ranges:{props:Yb(h,h.parent.props),length:h.parent.length}}:h.loadActionNode?{props:Number.MAX_VALUE}:{};e.loadValue({path:h.queryPath,...R})}},expanded:y,hovered:((_=e.lastClicked)==null?void 0:_.propertyNodeId)===g,allowedToExpand:v}},onNodeClick:()=>{Mn(e,l)},onMouseMove:()=>{clearTimeout(e.interactionTimers.nodeHighlight),clearTimeout(e.interactionTimers.nodeUnhighlight),clearTimeout(e.interactionTimers.edgeHighlight),clearTimeout(e.interactionTimers.edgeUnhighlight),queueMicrotask(()=>{clearTimeout(e.interactionTimers.edgeUnhighlight)}),e.interactionTimers.nodeHighlight=setTimeout(()=>Q1(e,l,Ze()),25)},onMouseOut:()=>{clearTimeout(e.interactionTimers.nodeHighlight),clearTimeout(e.interactionTimers.nodeUnhighlight),e.interactionTimers.nodeUnhighlight=setTimeout(()=>{Ye(e,l,Ze())},100)},onElementWithTooltipMouseOver:(h,f,g)=>{e.onElementWithTooltipMouseOver({source:f,node:l,fullString:g,evt:h})},onElementWithTooltipMouseOut:()=>{e.onElementWithTooltipMouseOut()},onLoadAllPropsClick:()=>{e.loadAllPropsNodes=e.loadAllPropsNodes||new Set,e.loadAllPropsNodes.add(o),e.update()},loadAllProps:((d=e.loadAllPropsNodes)==null?void 0:d.has(o))||void 0});return l.visuals=u,l.width=u.group.width(),l.height=u.group.height(),e.value.setNode(o,l),{nodeId:o,nodeData:l}}const Ul=new Map;function bp(e){if(Ul.has(e))return Ul.get(e);const n=new we.Text({text:"1",fontSize:e,fontFamily:ee("--value-diagram-editor-font-family")}).width();return Ul.set(e,n),n}function Jb(e,t,n,r){const i=n.padding,a=n.fontSize,s=n.maxContentWidth,o=n.charWidth,l=n.maxNodeWidth,c=n.lineHeight,u=n.headerFontSize,d=n.headerLineHeight,h=n.headerCharWidth,f=c/4,g=new Map;let v=0,y=100;v+=i,v+=d;const w=[],p=[],m=[],_=new we.Group({x:0,y:0,width:i*2,height:i*2,perfectDrawEnabled:!1,listening:!1}),C=new we.Text({x:.4,y:0,fontSize:a,fontStyle:"bold",fontFamily:ee("--value-diagram-editor-font-family"),perfectDrawEnabled:!1,listening:!1});_.add(C),_.visible(!1);const x=r.loadAllProps?1/0:70;let P=0;for(const I of e.props||[]){let k=I;if(k.functionsNode||k.type==="function"||k.callStackNode)continue;if(P===x)k={expandable:!0,loadActionNode:!0,loadAction:r.onLoadAllPropsClick};else if(P>x)break;P++;const{value:D,css:F,name:O,expandable:H}=Zb(k);r.onProp(k);const j=O+" ",U=D;let q=j,G=U,V=!1,M=!1,B=o*q.length,W=o*G.length;const z=B+W;if(z>s){y=l;const Q=Math.floor(s/o);if(q.length+G.length>Q){const de=B/z,J=W/z,ie="…";let le=Math.floor(Q*de),ne=Math.floor(Q*J);const Se=q.length>le,oe=G.length>ne,ce=Q-(Se?ie.length:0)-(oe?ie.length:0);le=Math.floor(ce*de),ne=Math.floor(ce*J);const ve=4;le<ve&&(le=ve,ne=Math.max(1,ce-ve)),ne<3&&G.length>0&&(ne=3,le=ce-ne),q.length>le&&(q=q.substring(0,le)+ie,M=!0),G.length>ne&&(G=G.substring(0,ne)+ie,V=!0)}}else y=Math.max(y,z+i*2);const Y=new we.Line({id:"line",points:[.5,v,.5,v],stroke:ee("--value-diagram-node-property-border"),strokeWidth:1,perfectDrawEnabled:!1,listening:!1});m.push(Y),v+=f;const X=new we.Text({x:i,y:v+f/2,text:q,fill:ee("--token-scope-property-foreground"),fontSize:a,fontFamily:ee("--value-diagram-editor-font-family"),perfectDrawEnabled:!1,listening:M}),Z=new we.Text({x:B+i,y:v+(k.loadActionNode?0:f/2),text:G,fill:F,fontSize:a,fontFamily:ee("--value-diagram-editor-font-family"),perfectDrawEnabled:!1,listening:!0,hitStrokeWidth:a});if(V&&(Z.on("mouseover",Q=>{r.onElementWithTooltipMouseOver(Q.evt,"property value",U)}),Z.on("mouseout",()=>{r.onElementWithTooltipMouseOut()})),M&&(X.on("mouseover",Q=>{r.onElementWithTooltipMouseOver(Q.evt,"property name",j)}),X.on("mouseout",()=>{r.onElementWithTooltipMouseOut()})),p.push(Z),w.push(X),w.push(Z),g.set(k.id,v+a/2+1),v+=c,H){const{onPropValueClick:Q,expanded:K,hovered:de,allowedToExpand:J}=r.onExpandableProp(k);if(J){const ie=le=>{le.getStage()&&(le.getStage().container().style.cursor="default"),le.fill(F),_.visible(!1)};Z.on("mousemove",le=>{const ne=le.target;ne.getStage()&&(ne.getStage().container().style.cursor="pointer"),k.loadActionNode||(C.text(K?"-":"+"),C.fill(Z.fill()),_.visible(!0),_.setPosition({x:ne.x()+ne.width(),y:ne.y()-1}))}),Z.on("mouseout",le=>{ie(le.target)}),Z.on("click",le=>{const ne=le.target;ie(ne),Q(k)}),de&&queueMicrotask(()=>{const le=Z.getStage();if(!le)return;const ne=le.getPointerPosition();if(!ne)return;const Se=Z.getAbsolutePosition(),oe=Z.width(),ce=Z.height();ne.x>=Se.x&&ne.x<=Se.x+oe&&ne.y>=Se.y&&ne.y<=Se.y+ce&&Z.fire("mousemove",{target:Z})})}}}const R=h*t.length+h*2+i*2;y=Math.max(y,Math.min(R,l));const T=n5(t,h,y-i*2-h),E=new we.Text({x:i,y:i,text:T,fill:ee("--value-diagram-foreground"),fontSize:u,fontStyle:"bold",fontFamily:ee("--value-diagram-editor-font-family"),perfectDrawEnabled:!1,listening:!1}),A=new we.Text({x:y-i-o,y:i,width:u,height:d,text:"⋮",fill:ee("--value-diagram-foreground"),fontSize:u,fontStyle:"bold",fontFamily:ee("--value-diagram-editor-font-family"),listening:!0});A.on("mouseover",I=>{r.onElementWithTooltipMouseOver(I.evt,"node header",t)}),A.on("mouseout",()=>{r.onElementWithTooltipMouseOut()});const N=new we.Rect({id:"rect",width:y,height:v,fill:ee("--value-diagram-node-background"),cornerRadius:3,stroke:ee("--value-diagram-border"),strokeWidth:1,perfectDrawEnabled:!1,listening:!0});p.forEach((I,k)=>{const D=m[k],F=D.points();D.points([F[0],F[1],y-.5,F[3]]),I.setPosition({x:y-i-I.width(),y:I.y()})});const b=new we.Group({draggable:!0,width:y,height:v});queueMicrotask(()=>{b.on("dragmove",om(()=>{r.onNodeClick(),b.moveToTop(),r.getEdges().forEach(I=>{im(n.stage,I),I.visuals.group.moveToBottom()})},n.dragThrottleDelay()))}),b.on("click",I=>{r.onNodeClick()});function L(){N.stroke(ee("--value-diagram-hover-stroke"))}function S(){N.stroke(ee("--value-diagram-border"))}return b.on("mousemove",I=>{r.onMouseMove()}),b.on("mouseout",I=>{r.onMouseOut()}),b.add(N,_,A,E),b.add(...m),b.add(...w),{group:b,propertyY:g,highlight:L,unhighlight:S}}function Zb(e){var o,l;const t=(o=e.type)==null?void 0:o.toLowerCase(),n=e.value!==void 0?e.value+"":"";let r=e.name||"unknown",i=n,a=ee("--token-scope-string-foreground");if(e.getter)i="get(…)",a=ee("--value-diagram-foreground");else if(e.loadActionNode)r="",i="...",a=ee("--value-diagram-attention-foreground");else if(t==="string")a=ee("--token-scope-string-foreground");else if(t==="number")a=ee("--token-scope-number-foreground"),e.nan?i="NaN":e.positiveInfinity?i="Infinity":e.negativeInfinity?i="-Infinity":e.negativeZero&&(i="-0");else if(t==="bigint")a=ee("--token-scope-number-foreground"),i+="n";else if(t==="boolean")a=ee("--token-scope-boolean-foreground");else if(t==="regexp")a=ee("--token-scope-regexp-foreground");else if(t==="undefined")i="undefined",a=ee("--token-scope-undefined-foreground");else if(t==="null")i="null",a=ee("--token-scope-null-foreground");else if(t==="unknown")i=e.error?e.error:"…",a=ee("--value-diagram-error-foreground");else if(t==="symbol")a=ee("--token-scope-class-foreground");else if(t==="date")i=`${new Date(e.value).toJSON()}`,a=ee("--token-scope-class-foreground");else if(t==="raw")i=e.value,a=ee("--value-diagram-foreground");else if(t==="html")a=ee("--value-diagram-foreground");else if(e.value===void 0){const c=t==="array"||!!e.rangeNode,u=c&&e.length!==void 0;i=c?u?`Array(${e.length})`:"[…]":`{${e.capped||t==="promise"&&!((l=e.props)!=null&&l.length)||e.expandable?"…":""}}`,a=ee(u?"--token-scope-type-foreground":"--value-diagram-foreground")}const s=!!e.expandable;return s&&!e.loadActionNode&&(a=ee("--value-diagram-expandable-property-foreground")),{value:i.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),css:a,name:r,expandable:s}}function Kl(e,t){const[n,r,i,a]=t,s=1-e,o=e*e,l=s*s,c=l*s,u=o*e,d=c*n.x+3*l*e*r.x+3*s*o*i.x+u*a.x,h=c*n.y+3*l*e*r.y+3*s*o*i.y+u*a.y;return{x:d,y:h}}function Qb(e,t){let n=1/0,r=0;const i=10;let a=0;for(let c=0;c<=i;c++){const u=c/i,d=Kl(u,t),h=Math.hypot(d.x-e.x,d.y-e.y);h<n&&(n=h,a=u)}const s=Math.max(0,a-.1),o=Math.min(1,a+.1),l=50;n=1/0;for(let c=0;c<=l;c++){const u=s+c/l*(o-s),d=Kl(u,t),h=Math.hypot(d.x-e.x,d.y-e.y);h<n&&(n=h,r=u)}return r}function e5(e,t){const[n,r,i,a]=t,s=1-e,o=e*e,l=s*s,c=-3*n.x*l+3*r.x*(l-2*s*e)+3*i.x*(2*s*e-o)+3*a.x*o,u=-3*n.y*l+3*r.y*(l-2*s*e)+3*i.y*(2*s*e-o)+3*a.y*o;return Math.atan2(u,c)}function t5(e){const t=new we.Line({id:"line",points:[],stroke:ee("--value-diagram-border"),fill:ee("--value-diagram-border"),strokeWidth:2,hitStrokeWidth:15,pointerLength:10,pointerWidth:10,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,lineCap:"round",lineJoin:"round",listening:!0,bezier:!0}),n=new we.Circle({id:"dot",radius:5,fill:ee("--value-diagram-border"),perfectDrawEnabled:!1,listening:!1}),r=new we.RegularPolygon({id:"hover-arrowhead",sides:3,radius:8,fill:ee("--value-diagram-hover-stroke"),visible:!1,perfectDrawEnabled:!1}),i=new we.Group({listening:!0});i.add(t,n,r);let a="end";i.on("mousemove",()=>{e.onMouseMove()});const s=c=>{c.getStage()&&(c.getStage().container().style.cursor="default"),t.stroke(ee("--value-diagram-border")),n.fill(ee("--value-diagram-border")),r.visible(!1)};return i.on("mouseout",c=>{e.onMouseOut()}),i.on("click",c=>{const u=c.target;s(u),e.onEdgeClick(a)}),{group:i,highlight:c=>{const u=i.getStage();if(u&&(u.container().style.cursor="pointer"),t.stroke(ee("--value-diagram-hover-stroke")),n.fill(ee("--value-diagram-hover-stroke")),c!=null&&c.updatePointer){const d=u.getPointerPosition(),f=u.getAbsoluteTransform().copy().invert().point(d),g=t.points(),v=[{x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},{x:g[6],y:g[7]}],y=Qb(f,v),w=Kl(y,v),p=e5(y,v);r.position({x:w.x,y:w.y}),a=y<.5?"end":"start";const m=a==="end"?p*180/Math.PI+90:p*180/Math.PI+270;return r.rotation(m),r.visible(!0),a==="end"?"to":"from"}},unhighlight:()=>{s(i)}}}function n5(e,t,n){const r=Math.floor(n/t);return e.length<=r?e:e.slice(0,r-1)+"…"}function rm(){kn.clear()}const kn=new Map;function ee(e){var n,r;if(kn.has(e))return kn.get(e);const t=(r=(n=getComputedStyle(document.body))==null?void 0:n.getPropertyValue(e))==null?void 0:r.trim();return kn.set(e,t||""),t}function im(e,t){const{visuals:n,from:r,to:i,propertyId:a}=t,s=r.visuals.group.absolutePosition(),o=i.visuals.group.absolutePosition(),l=r.visuals.group.height(),c=i.visuals.group.height(),u=r.visuals.group.width(),d=e.getAbsoluteTransform().copy().invert(),h=d.point(s),f=d.point(o),g=r.visuals.propertyY.get(a),y=g!==void 0?h.y+g:h.y+l/2,w=h.x+u,p=f.x,m=f.y+c/2,C=(p-w)*.5;n.group.findOne("#line").points([w,y,w+C,y,p-C,m,p,m]),n.group.findOne("#dot").position({x:w,y})}function r5(e,t,n){const r=e.firstRoot;if(o5(e,t,n),r&&(n!=null&&n.showRootNode)){t.scale({x:.8,y:.8});const i=t.getAbsoluteTransform().copy();let a=1/0,s=1/0,o=-1/0,l=-1/0;e.value.nodes().forEach(y=>{const w=e.value.node(y);if(w&&w.visuals){const p=w.visuals.group.absolutePosition();a=Math.min(a,p.x),s=Math.min(s,p.y),o=Math.max(o,p.x+w.visuals.group.width()),l=Math.max(l,p.y+w.visuals.group.height())}});const c=o-a,u=l-s,d=c<t.width()*.8,h=u<t.height()*.8,f=r.visuals.group.absolutePosition(),g={x:d?t.width()/2-c/2:20,y:h?t.height()/2-u/2:r.visuals.group.height()>t.height()?20:t.height()/2-r.visuals.group.height()/2},v=i.point(g);t.position({x:v.x-f.x,y:v.y-f.y}),r.visuals.group.moveToTop()}}function i5(e,t){const n=e.scaleX(),r=Math.max(Math.min(n+t,Mc),kc);if(r===n)return;const i=e.width(),a=e.height(),s=i/2,o=a/2,l={x:(s-e.x())/n,y:(o-e.y())/n},c={x:s-l.x*r,y:o-l.y*r};e.scale({x:r,y:r}),e.position(c),Qe(e)}function a5(e,t){let n=1/0,r=1/0,i=-1/0,a=-1/0;if(e.value.nodes().map(m=>e.value.node(m).visuals.group).forEach(m=>{m.getAbsolutePosition();const _=m.getClientRect({relativeTo:t});n=Math.min(n,_.x),r=Math.min(r,_.y),i=Math.max(i,_.x+_.width),a=Math.max(a,_.y+_.height)}),n===1/0)return;const s=20;n-=s,r-=s,i+=s,a+=s;const o=i-n,l=a-r,c=t.width(),u=t.height(),d=c/o,h=u/l;let f=Math.min(d,h);f=Math.max(kc,Math.min(f,Mc));const g=n+o/2,v=r+l/2;t.scale({x:1,y:1}),t.batchDraw(),t.scale({x:f,y:f});let y=u/2-v*f;const w=20*f;e.firstRoot.visuals.group.y()*f+y<w&&(y=w-e.firstRoot.visuals.group.y()*f),t.position({x:c/2-g*f,y}),Qe(t)}function o5(e,t,n){var a;n!=null&&n.layout&&(e.value.setGraph({rankdir:"LR",nodesep:20,ranksep:Math.max((((a=e.firstRoot)==null?void 0:a.visuals.group.width())||0)/2,150),marginx:40,marginy:40,ranker:"tight-tree"}),K1.layout(e.value));const r=t.getLayers()[0],i=r.children.length===0;e.value.nodes().forEach(s=>{const o=e.value.node(s);o&&(o.visuals.group.position({x:o.x,y:o.y-o.height/2}),i&&r.add(o.visuals.group))}),e.value.edges().forEach(s=>{if(s){const o=e.value.edge(s);o&&(im(t,o),i&&(r.add(o.visuals.group),o.visuals.group.moveToBottom()))}})}function wp(e){const t=e.visuals.group.getStage(),n=e.visuals.group,r=n.absolutePosition(),i=n.width(),a=n.height(),s=t.width(),o=t.height(),l=t.scaleX(),u=t.getAbsoluteTransform().copy().invert().point(r),d={left:u.x*l+t.x(),top:u.y*l+t.y(),right:(u.x+i)*l+t.x(),bottom:(u.y+a)*l+t.y()},h=20;if(d.left>=h&&d.top>=h&&d.right<=s-h&&d.bottom<=o-h)return;let g=t.x(),v=t.y();d.left<h?g=h-u.x*l:d.right>s-h&&(g=s-h-(u.x+i)*l),d.top<h?v=h-u.y*l:d.bottom>o-h&&(v=o-h-(u.y+a)*l);const y=i*l,w=a*l;y>s-h*2&&(g=h-u.x*l),w>o-h*2&&(v=h-u.y*l),new we.Tween({node:t,duration:.3,easing:we.Easings.EaseInOut,x:g,y:v,onUpdate:()=>{Qe(t)},onFinish:()=>{Qe(t)}}).play()}function Mn(e,t){am(e);const r=t.visuals.group.findOne("#rect");r.stroke(ee("--value-diagram-hover-stroke")),r.strokeWidth(1.5),e.selectedNode=t}function am(e){if(!e.selectedNode)return;const n=e.selectedNode.visuals.group.findOne("#rect");n.stroke(ee("--value-diagram-border")),n.strokeWidth(1),e.selectedNode=void 0}const om=(e,t)=>{let n=!1;return(...r)=>{n||(e(...r),n=!0,setTimeout(()=>n=!1,t))}},sm=6.623046875,it="highlight",Nc=new RegExp(`${it}-[A-Z1-9]`,"g"),lm="loadEntryPreviewRequested",s5=new Event(lm),sr="entryAddedToGroup",l5=new Event(sr),cm="entryGroupCountUpdated",c5=new Event(cm),um="expandOnLoad",Xl="showRequested",u5=new Set(["Default Light Modern","Default Dark Modern","Visual Studio Light","Visual Studio Dark","Default Light+","Default Dark+"]),lr=navigator.platform==="Win32",d5=navigator.platform==="MacIntel",gt=d5?"Cmd":"Ctrl";function dm(e,t){if(e){var n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);n=n*(100+t)/100,r=r*(100+t)/100,i=i*(100+t)/100,n=n<255?n:255,r=r<255?r:255,i=i<255?i:255,n=Math.round(n),r=Math.round(r),i=Math.round(i);var a=n.toString(16).length==1?"0"+n.toString(16):n.toString(16),s=r.toString(16).length==1?"0"+r.toString(16):r.toString(16),o=i.toString(16).length==1?"0"+i.toString(16):i.toString(16);return"#"+a+s+o}}function Hl(e,t,n,r){return t||!r&&!n?dm(e,-35):e}function Jl(e,t,n){const r=document.querySelector(":root"),i=getComputedStyle(document.documentElement);if(r){const a=r.style,s=i.getPropertyValue("--vscode-editor-foreground"),o=i.getPropertyValue("--vscode-editor-font-weight");if(!t){const h=document.body.getAttribute("data-vscode-theme-id"),f=document.body.getAttribute("data-vscode-theme-kind"),g=h&&u5.has(h),v=f==="vscode-dark",y=f==="vscode-high-contrast-light",w=f==="vscode-high-contrast";let p=Hl(i.getPropertyValue("--vscode-terminal-ansiGreen"),y,w,v),m=Hl(i.getPropertyValue("--vscode-terminal-ansiYellow"),y,w,v),_=Hl(i.getPropertyValue("--vscode-terminal-ansiCyan"),y,w,v),C=i.getPropertyValue("--vscode-terminal-ansiRed"),x=i.getPropertyValue("--vscode-terminal-ansiBrightBlack");C=y||!v&&!w?dm(C,-35):"#d16969",t={class:{foreground:g?v?"#4ec9b0":"#267f99":_},new:{foreground:g?v?"#569cd6":"#0000ff":_},operator:{foreground:g?v?"#d4d4d4":"#000000":void 0},string:{foreground:g?v?"#ce9178":"#a31515":p},number:{foreground:g?v?"#b5cea8":"#098658":m},boolean:{foreground:g?v?"#569cd6":"#0000ff":m},undefined:{foreground:g?v?"#569cd6":"#0000ff":x},null:{foreground:g?v?"#569cd6":"#0000ff":x},regexp:{foreground:g?v?"#d16969":"#811f3f":C},function:{foreground:g?v?"#dcdcaa":"#795e26":_},property:{foreground:g?v?"#9cdcfe":"#001080":void 0},type:{foreground:g?v?"#4ec9b0":"#267f99":_},timepoint:{foreground:g?v?"#b5cea8":"#098658":m},comment:{foreground:g?v?"#ce9178":"#a31515":p},punctuation:{},error:{},linebreak:{},indentation:{},link:{},terminator:{},status:{},statussuccess:{},statuserror:{},warning:{}}}for(const h in t){const f=t[h],g=(f==null?void 0:f.fontStyle)||"";a.setProperty(`--console-ninja-preview-${h}-foreground`,(f==null?void 0:f.foreground)||s),a.setProperty(`--console-ninja-preview-${h}-font-style`,g.includes("italic")?"italic":""),a.setProperty(`--console-ninja-preview-${h}-font-weight`,g.includes("bold")?"bold":o),a.setProperty(`--console-ninja-preview-${h}-text-decoration`,(g.includes("underline")?"underline":" ")+(g.includes("strikethrough")?"line-through":""))}const l=[],c=new Map;for(const h of n){const f=Bv(i.getPropertyValue(`--vscode-${h.color}`));f&&c.set(h.color,{key:h.color,rgb:f}),l.push(`.highlight-${h.key} .log-highlighter:before
        {
          content: '${h.key}';
          background-color: var(--vscode-${h.color});
        }
        .log-watch .header.highlight-${h.key}.highlight-header,
        .log-watch .header.highlight-${h.key}.highlight-header .location a {
          color: var(--vscode-${h.color}) !important;
        }`)}const u=document.createElement("style");u.id="highlightStyles",u.innerHTML=l.join(`
`);const d=document.getElementById("highlightStyles");d&&document.body.removeChild(d),document.body.appendChild(u),e.channel.api.resolveHighlightColors(Array.from(c.values()))}}function hm(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function h5(e){const t=[];return{searchText:fm(e,"","",t),pathOffsets:t.filter(r=>r.path.length>0)}}async function fn(e,t){var r;gm(e),e.searchTerm=e.search.value;const n=e.searchContext=Date.now();if(e.searchTerm.length!==0)try{e.searchLoading.classList.remove("hiddenImportant");const i=Me(e);if(e.searchResults=(t==null?void 0:t.searchResults)||(i==="logs"?rt(await e.channel.api.search(e.searchTerm,e.selectedTool)):Array.from(e.watchData.entries.values()).map(a=>({id:a.entryId}))),n!==e.searchContext)return;if(t===void 0&&((r=e.focusedLogEntry)!=null&&r.data.id)){const a=e.focusedLogEntry.querySelector(".container");a&&!a.classList.contains("hiddenImportant")&&(t={currentMatchIdx:e.searchResults.findIndex(s=>{var o;return s.id===((o=e.focusedLogEntry)==null?void 0:o.data.id)})})}if(e.searchRegexHtmlEncoded=new RegExp(Zm(hm(e.searchTerm)),"ig"),e.searchResults=e.searchResults.reduce((a,s)=>{var u;const o=i==="logs"?e.logEntryList.getElementById(s.id):(u=Array.from(e.watchData.entries.values()).find(d=>d.entryId===s.id))==null?void 0:u.element;if(!o)return a;a.push(s),e.searchResultsById[s.id]=s;const l=o.querySelector(".log-message");l&&(s.summaryCount=_n(l,e.searchRegexHtmlEncoded,`match-${s.id}-s-`));const c=o.querySelector(".container");return c&&(i!=="logs"||e.logEntryList.isLoaded(s.id)||c.querySelector(".error-log-message"))&&(s.detailCount=_n(c,e.searchRegexHtmlEncoded,`match-${s.id}-d-`)),a},[]),e.searchResults.length){const a=(t==null?void 0:t.currentMatchIdx)&&e.searchResults[t.currentMatchIdx];e.currentMatchIdx=a?t.currentMatchIdx:0,e.currentMatchCount=0,e.searchResults[e.currentMatchIdx].detailCount||t?e.currentMatchType="detail":e.currentMatchType="summary",cr(e,t),e.previousMatch.classList.remove("disabled"),e.nextMatch.classList.remove("disabled")}else e.previousMatch.classList.add("disabled"),e.nextMatch.classList.add("disabled")}catch(i){console.error(i)}finally{if(n!==e.searchContext)return;e.searchLoading.classList.add("hiddenImportant")}}async function f5(e,t,n){if(!e.logEntryList.isLoaded(n.id)){const r=rt(await e.channel.api.getLogEntryDetails(n.id));w5(n.id,r,n.args,e,t),n.logPointId==="network"&&e.channel.api.reportNetworkLogExpanded();const i=e.searchResultsById[n.id];if(i){const a=t.querySelector(".log-details .container");i.detailCount=_n(a,e.searchRegexHtmlEncoded,`match-${i.id}-d-`),e.searchResults[e.currentMatchIdx].id===n.id&&(e.currentMatchType==="summary"&&i.detailCount?Zl(e):e.currentMatchType==="detail"&&i.detailCount?(e.currentMatchCount===Number.NEGATIVE_INFINITY?e.currentMatchCount=0:e.currentMatchCount===Number.POSITIVE_INFINITY&&(e.currentMatchCount=i.detailCount-1),cr(e)):e.currentMatchCount===Number.NEGATIVE_INFINITY?Zl(e):e.currentMatchCount===Number.POSITIVE_INFINITY&&pm(e))}}}function fm(e,t,n,r){if(!e)return"";if(e.nodeType===Node.TEXT_NODE){const i=n.split("/").map(s=>parseInt(s,10));i.pop();const a=hm(e.nodeValue||"");return r.push({offset:t.length,length:a.length,path:i}),t+a}else if(e.nodeType===Node.ELEMENT_NODE){const i=e;(i.tagName==="BR"||i.tagName==="P")&&(t+=`
`);let a=0;for(const s of i.childNodes)t=fm(s,t,n?`${n}/${a}`:`${a}`,r),a++;(i.tagName==="BR"||i.tagName==="P")&&(t+=`
`)}return t}function g5(e,t){let n=e;for(const r of t)n=n.childNodes[r];return n}function gm(e){document.querySelectorAll(".find-match").forEach(t=>{t.outerHTML=t.innerHTML}),e.searchLoading.classList.add("hiddenImportant"),e.searchContext=0,e.searchResults=[],e.searchResultsById={}}function _n(e,t,n){let r=0;const{searchText:i,pathOffsets:a}=h5(e),s={};let o;for(;(o=t.exec(i))!==null;){const l=o.index,c=o[0].length,u=l+c,d=`<span class="find-match ${n}${r}">`,h="</span>";r++;const f=d.length+h.length;for(const g of a.values()){if(g.offset>u)break;if(l>g.offset+g.length)continue;const v=g5(e,g.path);if(!v)continue;const y=s[g.path.join("/")]||0,w=Math.max(0,l-g.offset)+y,p=Math.min(v.innerHTML.length,u-g.offset)+y;p>w&&(s[g.path.join("/")]=y+f,v.innerHTML=v.innerHTML.substring(0,w)+d+v.innerHTML.substring(w,p)+h+v.innerHTML.substring(p))}}return r}function bn(e){let t=e.classList.contains("log-item")?e:e.parentElement;for(;t&&!(t!=null&&t.classList.contains("log-item"));)t=t.parentElement;if(t){const n=t.querySelector(".expander"),r=t.querySelector(".log-details .container");r?r.classList.contains("hiddenImportant")&&(n==null||n.onclick({})):t.classList.add(um)}}function pm(e){let t=!1,n=!1;for(;!t;){if(e.currentMatchIdx<0){if(n)return;e.currentMatchType,e.currentMatchIdx=e.searchResults.length-1,e.currentMatchCount=Number.POSITIVE_INFINITY,n=!0}e.currentMatchType==="summary"?(e.currentMatchCount===Number.POSITIVE_INFINITY?(e.currentMatchCount=e.searchResults[e.currentMatchIdx].summaryCount-1,e.searchResults[e.currentMatchIdx].detailCount!==void 0&&e.searchResults[e.currentMatchIdx].detailCount>0&&(e.currentMatchCount=-1)):e.currentMatchCount--,e.currentMatchCount>=0?t=!0:(e.currentMatchType="detail",e.currentMatchCount=Number.POSITIVE_INFINITY,e.currentMatchIdx--)):e.currentMatchType==="detail"&&(e.searchResults[e.currentMatchIdx].detailCount===void 0?e.currentMatchCount===Number.NEGATIVE_INFINITY?(e.currentMatchType="summary",e.currentMatchCount=-1,e.currentMatchIdx--):t=!0:(e.currentMatchCount===Number.NEGATIVE_INFINITY?e.currentMatchCount=0:e.currentMatchCount===Number.POSITIVE_INFINITY?e.currentMatchCount=e.searchResults[e.currentMatchIdx].detailCount-1:e.currentMatchCount--,e.currentMatchCount>=0&&e.currentMatchCount<e.searchResults[e.currentMatchIdx].detailCount?t=!0:(e.currentMatchType="summary",e.currentMatchCount=Number.POSITIVE_INFINITY)))}cr(e)}function Zl(e){var r;let t=!1,n=!1;for(;!t;){if(e.currentMatchIdx>=e.searchResults.length){if(n)return;e.currentMatchType,e.currentMatchIdx=0,e.currentMatchCount=-1,n=!0}e.currentMatchType==="summary"?(e.currentMatchCount++,e.currentMatchCount<e.searchResults[e.currentMatchIdx].summaryCount&&(e.searchResults[e.currentMatchIdx].detailCount===void 0||e.searchResults[e.currentMatchIdx].detailCount===0)?t=!0:(e.currentMatchType="detail",e.currentMatchCount=Number.NEGATIVE_INFINITY)):e.currentMatchType==="detail"&&(((r=e.searchResults[e.currentMatchIdx])==null?void 0:r.detailCount)===void 0?e.currentMatchCount===Number.POSITIVE_INFINITY?(e.currentMatchType="summary",e.currentMatchCount=-1,e.currentMatchIdx++):t=!0:(e.currentMatchCount===Number.POSITIVE_INFINITY?e.currentMatchCount=e.searchResults[e.currentMatchIdx].detailCount-1:e.currentMatchCount===Number.NEGATIVE_INFINITY?e.currentMatchCount=0:e.currentMatchCount++,e.currentMatchCount<e.searchResults[e.currentMatchIdx].detailCount?t=!0:(e.currentMatchType="summary",e.currentMatchCount=-1,e.currentMatchIdx++)))}cr(e)}function Cp(e,t){const n=t.classList.contains("log-item")?t:t.closest(".log-item"),r=t.closest(".page p");r&&r.dispatchEvent(Fv),Le(e,n,!1)}function cr(e,t){if(document.querySelectorAll(".find-match-current").forEach(a=>{a.classList.remove("find-match-current")}),e.searchResults.length===0)return;const n=`.match-${e.searchResults[e.currentMatchIdx].id}-${e.currentMatchType==="summary"?"s":"d"}-${e.currentMatchCount}`,r=Me(e)==="logs";let i=!(t!=null&&t.searchResults);if(document.querySelectorAll(n).forEach(a=>{a.classList.add("find-match-current"),i&&(i=!1,Cp(e,a),r&&bn(a),ac(e,a))}),r&&(i||t!=null&&t.searchResults)){const a=e.logEntryList.getElementById(e.searchResults[e.currentMatchIdx].id);a&&(i&&(Cp(e,a),bn(a)),ac(e,a))}}function mm(e,t){e.autoscrollValue=t,e.autoscroll.title="Turn Auto Scrolling "+(e.autoscrollValue?"Off":"On");const n=e.autoscroll.firstChild;n.ariaLabel=e.autoscroll.title,e.autoscrollValue?(e.scrollPositionBottom=!0,n.classList.remove("codicon-unlock"),n.classList.add("codicon-lock")):(n.classList.add("codicon-unlock"),n.classList.remove("codicon-lock"))}function vm(e,t){e.autoclearValue=t,e.autoclear.title="Turn Auto Clearing After Any File Change "+(e.autoclearValue?"Off":"On");const n=e.autoclear.firstChild;n.ariaLabel=e.autoclear.title,e.autoclearValue?n.classList.add("selected-icon-state"):n.classList.remove("selected-icon-state")}function ym(e,t){e.networkLoggingPausedValue=t,e.networkLoggingPaused.title=`${e.networkLoggingPausedValue?"Resume":"Pause"} network logging`;const n=e.networkLoggingPaused.firstChild;n.ariaLabel=e.networkLoggingPaused.title,e.networkLoggingPausedValue?n.classList.remove("selected-icon-state"):n.classList.add("selected-icon-state")}function _m(e,t,n){const r=t!=="None";e.showDateTimeValue=r,e.simpleDateTimeDisplayMode=n,n?e.showDateTime.title=`${r?"Do Not Show":"Show"} Log Entry Date and Time`:e.showDateTime.title="Change Date and Time Display Mode";const i=e.showDateTime.firstChild;i.ariaLabel=e.showDateTime.title,e.showDateTimeValue?i.classList.add("selected-icon-state"):i.classList.remove("selected-icon-state")}function p5(e){e.entryToolInserter=e.viewerOpts.mergeMultiToolLogs?(t,n)=>{const r=Qm(t.tool),i=document.createElement("span");i.title=t.tool,i.className="log-tool",n.appendChild(i),i.classList.add("codicon");const a=r.split(" ");i.classList.add(`codicon-${a[0]}`);for(const s of a.slice(1))i.classList.add(`${s}`)}:()=>{}}function bm(e,t,n){const r=t==="Absolute"?({ts:i})=>iv(new Date(i)).format(n):t==="Relative To Oldest"?({ts:i,oldestTs:a})=>Uc((a>0?`${Hc(i-a)}`:"").padEnd(6),6):t==="Relative To Previous"?({ts:i,previousTs:a})=>{const s=a();return Uc((s>0?`${Hc(i-s)}`:"").padEnd(6),6)}:()=>"";e.entryDateInserter=t==="None"?()=>{}:({ts:i,oldestTs:a,previousTs:s},o)=>{const l=document.createElement("span");l.className="log-date",o.appendChild(l),l.textContent=r({ts:i,oldestTs:a,previousTs:s})}}function wm(e,t){e.fontSize=t;const n=document.querySelector(":root");if(n){const r=n.style,i=t*14/10;e.watchMinHeight=i+9,e.watchMinWidth=100,r.setProperty("--console-ninja-logItemLocationPaddingLeft",`${t*4/10}px`),r.setProperty("--console-ninja-logDateMarginLeft",`${t*2/10}px`),r.setProperty("--console-ninja-logDateMarginRight",`${t*5/10}px`),r.setProperty("--console-ninja-logItemsFontSize",`${t}px`),r.setProperty("--console-ninja-logItemsExpanderIconFontSize",`${t*16/10}px`),r.setProperty("--console-ninja-logItemsLineHeight",`${i}px`),r.setProperty("--console-ninja-watchMinHeight",`${e.watchMinHeight}px`),r.setProperty("--console-ninja-watchMinWidth",`${e.watchMinWidth}px`),r.setProperty("--console-ninja-logItemsPageHeight",`${i*e.viewerOpts.pageSize}px`)}}function Cm(e,t){e.viewerOpts=t,e.viewerOpts.renderLogEntryActions?e.filter.classList.remove("hiddenImportant"):e.filter.classList.add("hiddenImportant"),e.viewerOpts.networkLoggingAvailable?e.networkLoggingPaused.classList.remove("hiddenImportant"):e.networkLoggingPaused.classList.add("hiddenImportant")}function Le(e,t,n=!0){e.focusedLogEntry&&(e.focusedLogEntry.tabIndex=-1,e.focusedLogEntry.querySelectorAll("a").forEach(r=>r.tabIndex=-1),Ie(e),b5(e,e.focusedLogEntry),t!==e.focusedLogEntry&&wn(e)),t?(e.focusedLogEntry=t,e.focusedLogEntry.tabIndex=0,e.focusedLogEntry.querySelectorAll("a:not(.not-tabable)").forEach(r=>r.tabIndex=0),n&&(e.focusedLogEntry.focus(),Em(e,t))):(e.focusedLogEntry=void 0,Ie(e))}function wn(e){Ql(e,!1),Gv()}function Ql(e,t){t?(e.breadcrumbs.classList.add("active"),e.header.classList.remove("active")):(e.breadcrumbs.classList.remove("active"),e.header.classList.add("active"))}function m5(e){return e.breadcrumbs.classList.contains("active")}function Sm(e,t){var r;const n=Me(e);t?(e.logs.classList.add("invisibleImportant"),e.header.classList.add("invisibleImportant"),n==="logs"?e.logs.classList.add("hiddenImportant"):n==="watches"&&e.watches.classList.add("hiddenImportant"),e.diagram.classList.remove("hiddenImportant"),e.diagramActions.classList.add("active"),e.header.classList.remove("active"),e.breadcrumbs.classList.remove("active")):(e.logs.classList.remove("invisibleImportant"),e.header.classList.remove("invisibleImportant"),n==="logs"?e.logs.classList.remove("hiddenImportant"):n==="watches"&&e.watches.classList.remove("hiddenImportant"),e.diagram.classList.add("hiddenImportant"),e.diagramActions.classList.remove("active"),e.header.classList.add("active"),(r=e.diagramComponent)==null||r.destroy(),e.diagramComponent=void 0,Le(e,e.focusedLogEntry))}function Em(e,t){if(!e.viewerOpts.renderLogEntryActions)return;const n=t.classList.contains("log-watch"),r=n?t.querySelector(".actions"):t.querySelector(".log-item-location");if(!r)return;let i=r.querySelector(".log-actions");i?i.classList.remove("hiddenImportant"):(n||(r.style.display="flex",r.style.width=r.getBoundingClientRect().width+"px"),i=document.createElement("div"),i.innerHTML=`${n?`<a
        href="#"
        class="copy-action codicon codicon-copy not-tabable"
        role="button"
        tabindex="-1"
        title="Copy Log Entry To Clipboard (${gt} + C)"
      ></a>`:`<a
        href="#"
        class="expand-action codicon codicon-lightbulb not-tabable"
        role="button"
        tabindex="-1"
        title="Open Context Menu (${gt} + .)"
      ></a>`}`,i.className="log-actions",n?(i.querySelector("a.copy-action").onclick=a=>{ec(e,t),a.preventDefault(),a.stopPropagation()},r.prepend(i)):(i.querySelector("a.expand-action").onclick=a=>{xm(e,a),a.preventDefault(),a.stopPropagation()},r.appendChild(i)))}function xm(e,t){var g;if(e.focusedLogEntry===void 0)return;const n=e.contextWidget.querySelector("a.highlight-action");e.focusedLogEntry.classList.contains(it)?n.textContent="Unhighlight entries for this file/line":n.textContent="Highlight entries for this file/line";const r=e.contextWidget.querySelector("a.show-location-action"),i=e.contextWidget.querySelector("a.show-file-action"),a=e.contextWidget.querySelector("a.hide-location-action"),s=e.contextWidget.querySelector("a.hide-file-action"),o=e.contextWidget.querySelector("a.reset-filter-action"),l=e.contextWidget.querySelector("a.investigate-with-copilot-action");e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"showLocation")?r.parentElement.classList.remove("hiddenImportant"):r.parentElement.classList.add("hiddenImportant"),e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"showFile")?i.parentElement.classList.remove("hiddenImportant"):i.parentElement.classList.add("hiddenImportant"),e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"hideLocation")?a.parentElement.classList.remove("hiddenImportant"):a.parentElement.classList.add("hiddenImportant"),e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"hideFile")?s.parentElement.classList.remove("hiddenImportant"):s.parentElement.classList.add("hiddenImportant"),e.logEntryList.filter!==void 0?o.parentElement.classList.remove("hiddenImportant"):o.parentElement.classList.add("hiddenImportant"),e.focusedLogEntry.classList.contains("error")&&e.errorInvestigationMode==="copilot"?l.parentElement.classList.remove("hiddenImportant"):l.parentElement.classList.add("hiddenImportant"),e.contextWidget.classList.remove("hiddenImportant"),t?e.contextWidget.querySelector(".header").classList.remove("hiddenImportant"):e.contextWidget.querySelector(".header").classList.add("hiddenImportant"),e.contextWidget.querySelectorAll("li").forEach(v=>{v.classList.remove("selected")}),e.contextWidget.querySelector("a.copy-action").parentElement.classList.add("selected"),(g=e.focusedLogEntry.data.args)!=null&&g.find(v=>v.diagram)?e.contextWidget.querySelector("a.diagram-action").parentElement.classList.remove("hiddenImportant"):e.contextWidget.querySelector("a.diagram-action").parentElement.classList.add("hiddenImportant");const c=e.contextWidget.offsetHeight,u=10,d=(t==null?void 0:t.clientY)||e.focusedLogEntry.getBoundingClientRect().top+e.focusedLogEntry.getBoundingClientRect().height/2;e.contextWidget.style.maxHeight="unset";const h=d+c+u<e.contextWidget.parentElement.offsetHeight,f=d-c-u>0;!h&&!f&&(e.contextWidget.style.maxHeight=`${e.contextWidget.parentElement.offsetHeight}px`),e.contextWidget.style.top=`${h?d+u:f?d-c-u:0}px`,e.contextWidget.style.right=`${u*3}px`}function Ie(e){e.contextWidget.classList.add("hiddenImportant")}function Sp(e){return!e.contextWidget.classList.contains("hiddenImportant")}async function v5(e,t,n){if(e.tooltipCloseRequested)return;const r=e.tooltipWidget;if(r.onmouseover=()=>{delete e.tooltipCloseRequested},r.onmouseout=()=>On(e),!await n(t))return;r.classList.remove("hiddenImportant");const a=r.offsetHeight,s=r.offsetWidth,o=10,l=t.clientY,c=t.clientX;r.style.maxHeight="unset";const u=l+a+o<r.parentElement.offsetHeight,d=l-a-o>0;!u&&!d&&(r.style.maxHeight=`${r.parentElement.offsetHeight}px`),r.style.top=`${u?l+o:d?l-a-o:0}px`;const h=c+s<r.parentElement.offsetWidth;c-s>0?(r.style.right=`${r.parentElement.offsetWidth-c}px`,r.style.left="unset"):h&&(r.style.left=`${c}px`,r.style.right="unset")}const y5=lc(v5,300);function Lm(e,t,n){delete e.tooltipCloseRequested,y5(e,t,n)}function On(e,t=150){e.codePreviewLocation=void 0,e.tooltipCloseRequested=!0,t===0?e.tooltipWidget.classList.add("hiddenImportant"):setTimeout(()=>e.tooltipCloseRequested&&e.codePreviewLocation===void 0&&e.tooltipWidget.classList.add("hiddenImportant"),t)}function _5(e,t){e.channel.api.investigateErrorWithAI({file:t.data.file,line:t.data.line})}function An(e,t,n){e.logEntryList.canAddToFilter(t.data,n)&&(e.logEntryList.addToFilter(t.data,n),e.channel.api.updateFilter(e.logEntryList.filter),je(e,e.focusedLogEntry?{id:e.focusedLogEntry.data.id}:void 0),qc(e))}function Wl(e){e.logEntryList.filter!==void 0&&(e.logEntryList.resetFilter(),e.channel.api.updateFilter(),je(e,e.focusedLogEntry?{id:e.focusedLogEntry.data.id}:void 0),qc(e))}function qc(e){e.logEntryList.filter!==void 0?(e.filter.classList.remove("disabled-icon-state"),e.filter.classList.add("selected-icon-state"),e.filter.title="Clear Active Filter (Shift + Escape)"):(e.filter.classList.add("disabled-icon-state"),e.filter.classList.remove("selected-icon-state"),e.filter.title="Filter (use log entry context lightbulb menu to set)")}function b5(e,t){if(!e.viewerOpts.renderLogEntryActions||t.classList.contains("log-watch"))return;let n=t.querySelector(".log-actions");n&&n.classList.add("hiddenImportant")}function ec(e,t){const n=e.logEntryList.getId(t);n&&e.channel.api.copyLogEntryDetails(n)}async function tc(e,t){const n=e.logEntryList.getElementWithData(t);if(!n)return;const r=rt(await e.channel.api.getLogEntryDetails(n.data.id)),i=Iv(r);Sm(e,!0);const a=Kb({baseFontSize:e.fontSize,loadValue:()=>{},onElementWithTooltipMouseOver:s=>{Lm(e,s.evt,async()=>{const o=e.tooltipWidget,l=document.createElement("div");if(l.className="value-diagram-content",o.replaceChildren(l),s.source==="property name"||s.source==="property value"){const c=document.createElement("span");return c.textContent=s.fullString,l.appendChild(c),!0}else if(s.source==="node header"){let c=s.node;const u=Up(c.value),d=[];for(;c!=null&&c.parent;)c.value.name&&d.unshift(Wv(c.value.name)),c=c.parent;d.unshift(c.name||"root");const h=document.createElement("div");h.className="node",h.textContent=d.join("")+(u?`: ${u}`:""),l.appendChild(h);const f=document.createElement("div");f.className="actions",l.appendChild(f);const g=document.createElement("a");g.className="codicon codicon-copy",g.title="Copy path",g.onclick=()=>{function y(w){return delete w.parent,w.props&&w.props.forEach(p=>y(p)),w}e.channel.api.copyToClipboard(Sv(y(s.node.value)))},f.appendChild(g);const v=document.createElement("a");return v.className="codicon codicon-milestone",v.title="Copy path",v.onclick=()=>{e.channel.api.copyToClipboard(d.join(""))},f.appendChild(v),!0}return!1})},onElementWithTooltipMouseOut:()=>{On(e)},setCursorIcon:s=>{e.diagram.style.cursor=s}});a.init(e.diagram,i.map((s,o)=>{var l,c,u;return(l=s.props)!=null&&l.length?{name:((u=(c=n.data.args)==null?void 0:c[o])==null?void 0:u.context)||`param ${o}`,value:s}:void 0}).filter(s=>!!s)),e.diagramComponent=a,e.channel.api.reportDiagramDisplayed()}function Fc(e,t){e.selectedTool||(e.selectedTool=t.tool),e.viewerOpts.mergeMultiToolLogs&&(e.selectedTool=void 0),e.tools[t.tool]||(e.tools[t.tool]=!0,Um(e))}function nc(e){e.selectedTool&&!e.viewerOpts.mergeMultiToolLogs?e.multiToolUseDetected&&(e.logsName.innerText=e.selectedTool+" Logs"):e.logsName.innerText="Logs"}function Gn(e,t){let n=e.querySelector(".log-group-count");n||(n=document.createElement("span"),n.className="log-group-count",e.insertBefore(n,e.querySelector(".log-message"))),n.textContent=t?`x${t+1}`:""}function Tm(e,t,n,r,i,a,s,o,l,c,u,d,h,f,g,v,y){if(Fc(t,n),t.selectedTool&&t.selectedTool!==n.tool)return null;let w;switch(c){case"console.warn":w="warn";break;case"console.debug":w="debug";break;case"console.info":w="info";break;case"console.error":w="console-error";break;case"error":w="error";break}const p=document.createElement("div");p.className=`log-item${w?" "+w:""}`;const m=document.createElement("div");m.className="log-summary",p.appendChild(m);const _=document.createElement("div");_.className="expander codicon codicon-chevron-right",m.appendChild(_);const C=document.createElement("div");C.className="log-item-content",m.appendChild(C),t.entryDateInserter({ts:i,oldestTs:t.logEntryList.getFirstElementTimestamp(),previousTs:()=>{var O,H;const F=t.logEntryList.getPreviousElementIndex(r);return F>=0?(H=(O=t.logItems.children[F])==null?void 0:O.data)==null?void 0:H.ts:0}},C),t.entryToolInserter(n,C);const x=document.createElement("span");x.className="log-message log-highlighting",x.title=g||"",C.appendChild(x);const P=document.createElement("div");P.className="log-item-location",m.appendChild(P);const R=document.createElement("a");R.href="#",R.tabIndex=-1,document.dispatchEvent(new CustomEvent(Cn,{detail:{link:R,loc:{file:o.file.startsWith("file")||o.file.startsWith("http")?o.file:mn(o.file),line:o.line}}})),P.appendChild(R),s&&Gn(C,s);const T=document.createElement("div");T.className="log-details log-highlighting",p.appendChild(T);const E=document.createElement("div");E.className="container hiddenImportant",T.appendChild(E),e&&e.appendChild(p),x.appendChild(u),E.appendChild(d);const A=R;A.textContent=h,A.onclick=F=>{F.preventDefault(),v()};const N=C;N.onclick=F=>{if(p.tabIndex===0){const O=document.getSelection();(O==null?void 0:O.type)!=="Range"&&(I(D,k),F.preventDefault(),F.stopPropagation())}},p.onclick=F=>{p.tabIndex!==0&&Le(t,p),F.preventDefault(),F.stopPropagation()};function b(F){const O=F.querySelector(".expander"),H=F.querySelector(".log-details .container");return{expander:O,logDetails:H}}function L(F,O){F.classList.remove("codicon-chevron-down"),F.classList.add("codicon-chevron-right"),O.classList.add("hiddenImportant")}function S(F,O){F.classList.add("codicon-chevron-down"),F.classList.remove("codicon-chevron-right"),O.classList.remove("hiddenImportant"),y(p)}function I(F,O){O.classList.contains("hiddenImportant")?S(F,O):L(F,O)}const k=E,D=_;return Rm(t,k),D.onclick=async F=>{I(D,k),F&&F.preventDefault&&F.preventDefault()},p.onkeydown=F=>{var O,H,j;if(!k.isContentEditable){let U=null;if(F.key==="ArrowDown"||F.key==="ArrowUp")if(Sp(t)){const q=t.contextWidget.querySelector(".selected");q.classList.remove("selected"),F.key==="ArrowDown"?(O=rc(q,"down"))==null||O.classList.add("selected"):F.key==="ArrowUp"&&((H=rc(q,"up"))==null||H.classList.add("selected")),(j=t.contextWidget.querySelector(".selected"))==null||j.scrollIntoView({block:"nearest"}),F.preventDefault()}else F.key==="ArrowDown"?U=p.nextElementSibling:F.key==="ArrowUp"&&(U=p.previousElementSibling),U&&(Le(t,U),F.preventDefault());if(F.key===" ")I(D,k),F.preventDefault();else if(F.key==="Enter")if(Sp(t))t.contextWidget.querySelector(".selected a").click(),F.preventDefault();else{const q=F.target;D.classList.contains("codicon-chevron-down")&&q&&q.nodeName!=="A"&&(k.contentEditable="true",k.focus({preventScroll:!0}),t.enteredLogEntry=k,F.preventDefault())}else F.key==="ArrowRight"?(S(D,k),F.preventDefault()):F.key==="ArrowLeft"&&(F.ctrlKey||F.metaKey?document.querySelectorAll(".log-item").forEach(q=>{if(q.childElementCount){const{expander:G,logDetails:V}=b(q);L(G,V)}}):L(D,k),F.preventDefault());t.viewerOpts.renderLogEntryActions&&(F.metaKey||F.ctrlKey)&&F.key==="."&&(xm(t),F.preventDefault())}},t.logEntryList.addElement({id:r,ts:i,hash:a,duplicateCount:s,...o,args:l},p),p.addEventListener(cm,()=>{Gn(C,t.logEntryList.getDuplicateCount(p))}),p}function rc(e,t,n=0){if(!e||e.parentElement.childElementCount<n)return;const r=t==="down"?e.nextElementSibling||e.parentElement.firstElementChild:e.previousElementSibling||e.parentElement.lastElementChild;return r.classList.contains("hiddenImportant")?rc(r,t,++n):r}function Rm(e,t){t.onblur=()=>{t.contentEditable="false",delete e.enteredLogEntry},t.oncut=()=>!1,t.onpaste=()=>!1,t.onkeydown=n=>{var r,i,a;if(t.isContentEditable){if(n.key==="Escape"&&(t.contentEditable="false",delete e.enteredLogEntry,(r=window.getSelection())==null||r.empty(),t.closest(".log-item").focus({preventScroll:!0}),n.preventDefault(),n.stopPropagation(),wn(e)),n.key==="Enter"){const s=window.getSelection();if(s&&s.anchorNode){if(s.anchorNode.textContent){for(const o of t.querySelectorAll("a"))if((i=o.textContent)!=null&&i.includes(s.anchorNode.textContent)){o.click();break}}if(e.viewerOpts.renderNodeExpansionControls){const o=(a=s.anchorNode.parentElement)==null?void 0:a.closest(".page p");o&&o.dispatchEvent(Dv)}}n.preventDefault()}n.key!=="ArrowDown"&&n.key!=="ArrowUp"&&n.key!=="ArrowLeft"&&n.key!=="ArrowRight"&&n.key!=="Home"&&n.key!=="End"&&n.key!=="PageUp"&&n.key!=="PageDown"&&n.preventDefault()}},t.onkeyup=()=>{var n,r;if(t.isContentEditable&&e.viewerOpts.renderBreadcrumbs){const i=window.getSelection(),a=(r=(n=i==null?void 0:i.focusNode)==null?void 0:n.parentElement)==null?void 0:r.closest("p");a&&a.dispatchEvent(Ov)}}}function Am(e,t){if(e.selectedTool&&Jm(e.selectedTool)!==t.session.tool||!t.mtime)return;const n=e.logItems.children;for(let r=n.length-1;r>=0;r--){const i=n[r];if(i.classList.contains("pre-file-change"))break;(e.logEntryList.getTimestamp(i)||0)<t.mtime&&(i.classList.add("pre-file-change"),i.classList.remove(it),i.classList.remove("checkpoint"),i.className=i.className.replace(Nc,""))}}function Ep(e){if(e===void 0)return;const t=Hm(e.source);if(t!==void 0)return{file:t,line:e.line}}function Pm(e,t,n){if(e.selectedTool&&e.selectedTool!==t.session.tool||!e.logEntryList.canAdd(Ep(t.stack[0]))||Dc(e,t,n))return;const r=document.createDocumentFragment(),i=document.createDocumentFragment(),a=document.createElement("span");a.className="error-log-message",a.textContent=t.message,r.appendChild(a);const s=document.createElement("span");s.className="error-log-message",s.textContent=t.message;const o=d=>{const h=document.createElement("span");return h.textContent=d,h};i.appendChild(s),t.stack.forEach(d=>{i.appendChild(document.createElement("br")),i.appendChild(o(" ")),i.appendChild(o(" "));for(let h=0;h<(d.indentation||0);h++)i.appendChild(o(" ")),i.appendChild(o(" "));if(i.appendChild(o("at")),i.appendChild(o(" ")),d.context){const h=document.createElement("span");h.className="error-context function",h.textContent=d.context.trim(),i.appendChild(h),i.appendChild(o(" "))}if(d.source){const h=document.createElement("a");h.className="error-source",h.textContent=`${pn(d.source,50)}:${d.line}:${d.column}`,h.href="#",h.onclick=f=>{f.preventDefault(),e.channel.api.navigate(d.source,d.line,d.column)},document.dispatchEvent(new CustomEvent(Cn,{detail:{link:h,loc:{file:d.source,line:d.line}}})),i.appendChild(h)}});let l="",c="";t.stack.length&&(l=pn(t.stack[0].source)+":"+t.stack[0].line+":"+t.stack[0].column,c=t.stack[0].source+":"+t.stack[0].line+":"+t.stack[0].column);const u=Tm(n,e,t.session,t.id,t.ts,t.hash,void 0,Ep(t.stack[0])||{file:"",line:0},void 0,"error",r,i,l,c,void 0,()=>{t.stack.length&&e.channel.api.navigate(t.stack[0].source,t.stack[0].line,t.stack[0].column)},()=>{});u&&u.addEventListener(sr,()=>{Gn(u.querySelector(".log-item-content"),e.logEntryList.incrementDuplicateCount(u))}),pt(e),wt(e,e.logItems.lastElementChild)}async function w5(e,t,n,r,i){r.logEntryList.setLoaded(e);const a=i.querySelector(".log-details .container"),s=Im(r,t,n);a==null||a.replaceChildren(),a==null||a.appendChild(s)}function Im(e,t,n){const r=document.createDocumentFragment();if(n.length===t.length)n.forEach((i,a)=>{if(t[a]){if(i.context){const l=document.createElement("p");l.className="log-context",l.textContent=`${i.context}:`,r.appendChild(l)}const s=Bp(t[a],e.channel.api,"details",e.viewerOpts),o=document.createElement("div");o.className="log-text",o.appendChild(s),r.appendChild(o)}});else{const i=document.createElement("span");i.className="error-log-message",i.textContent="Log details are no longer available.",r.appendChild(i)}return r}function C5(){return`<div class="log-watch log-items log-item log-details log-highlighting" tabIndex=0>
  <div class="content-container">
    <div class="header">
      <div class="context"></div>
      <div class="location"></div>
      <div class="actions">
        <a class="codicon codicon-close not-tabable" href="#" tabindex="-1" title="Close (${gt} + W)"></a>
      </div>
    </div>
    <div class="container"></div>
  </div>
  <div class="resizer top-left"></div>
  <div class="resizer top-right"></div>
  <div class="resizer bottom-left"></div>
  <div class="resizer bottom-right"></div>
  <div class="resizer top"></div>
  <div class="resizer bottom"></div>
  <div class="resizer left"></div>
  <div class="resizer right"></div>
</div>`}let ft=100;function km(e,t){let n=0,r=0,i=0,a=0,s=!1;e.classList.add("draggable"),e.onmousedown=u,t.onmousedown=o;function o(d){s=!0,u(),i=d.clientX,a=d.clientY,document.onmouseup=c,document.onmousemove=l,document.onmouseenter=h=>{s&&h.buttons!==1&&c(h)},d.preventDefault()}function l(d){n=i-d.clientX,r=a-d.clientY,i=d.clientX,a=d.clientY,e.style.top=e.offsetTop-r+"px",e.style.left=e.offsetLeft-n+"px",d.preventDefault(),d.stopPropagation()}function c(d){s=!1,document.onmouseup=null,document.onmousemove=null,document.onmouseenter=null,d.preventDefault()}function u(d){ft++,e.style.zIndex=""+ft,ft>1e4&&(ft=100),d==null||d.preventDefault()}}function S5(e,t){e.classList.remove("draggable"),e.onmousedown=null,t.onmousedown=null}function Mm(e,t){e.classList.add("resizable");const n=e.querySelectorAll(".resizer"),r=20;let i=0,a=0,s=0,o=0,l=0,c=0;for(let u=0;u<n.length;u++){let d=function(g){if(f.classList.contains("top")){const v=a-(g.pageY-c);v>r&&(e.style.height=v+"px",e.style.top=o+(g.pageY-c-t)+"px")}else if(f.classList.contains("bottom")){const v=a+(g.pageY-c);v>r&&(e.style.height=v+"px")}else if(f.classList.contains("left")){const v=i-(g.pageX-l);v>r&&(e.style.width=v+"px",e.style.left=s+(g.pageX-l)+"px")}else if(f.classList.contains("right")){const v=i+(g.pageX-l);v>r&&(e.style.width=v+"px")}else if(f.classList.contains("bottom-right")){const v=i+(g.pageX-l),y=a+(g.pageY-c);v>r&&(e.style.width=v+"px"),y>r&&(e.style.height=y+"px")}else if(f.classList.contains("bottom-left")){const v=a+(g.pageY-c),y=i-(g.pageX-l);v>r&&(e.style.height=v+"px"),y>r&&(e.style.width=y+"px",e.style.left=s+(g.pageX-l)+"px")}else if(f.classList.contains("top-right")){const v=i+(g.pageX-l),y=a-(g.pageY-c);v>r&&(e.style.width=v+"px"),y>r&&(e.style.height=y+"px",e.style.top=o+(g.pageY-c-t)+"px")}else{const v=i-(g.pageX-l),y=a-(g.pageY-c);v>r&&(e.style.width=v+"px",e.style.left=s+(g.pageX-l)+"px"),y>r&&(e.style.height=y+"px",e.style.top=o+(g.pageY-c-t)+"px")}g.preventDefault()},h=function(){window.removeEventListener("mousemove",d)};const f=n[u];e.appendChild(f),f.addEventListener("mousedown",function(g){g.preventDefault(),i=parseFloat(getComputedStyle(e,null).getPropertyValue("width").replace("px","")),a=parseFloat(getComputedStyle(e,null).getPropertyValue("height").replace("px","")),s=e.getBoundingClientRect().left,o=e.getBoundingClientRect().top,l=g.pageX,c=g.pageY,window.addEventListener("mousemove",d),window.addEventListener("mouseup",h)})}}function E5(e){e.classList.remove("resizable")}function Bn(e,t){e.watchesContainer.removeChild(t.element),e.channel.api.closeWatch(t.location),e.watchData.entries.delete(pe(t.location)),ur(e),e.watchData.entries.size===0&&(e.logView.click(),Gc(e))}function Nm(e,t,n){const r=t.querySelector(".location"),i=`${pn(n.file)}:${n.line}`;r.replaceChildren();const a=document.createElement("a");a.href="#",a.textContent=i,a.onclick=s=>{s.preventDefault(),e.channel.api.navigate(mn(n.file),n.line)},document.dispatchEvent(new CustomEvent(Cn,{detail:{link:a,loc:{file:n.file.startsWith("file")||n.file.startsWith("http")?n.file:mn(n.file),line:n.line}}})),r.appendChild(a)}function x5(e,t,n){const r=t.querySelector(".context");r.textContent=n.join(", ")}function Vn(e,t){if(!t){e.watchData.entries.forEach(a=>{Vn(e,a.location)});return}const n=pe(t);if(!n)return;const r=e.watchData.entries.get(n);if(!r)return;const i=e.logEntryList.getHighlight(t);i?(r.header.classList.add(Vm(i.key)),r.header.classList.add("highlight-header")):Bc(r.header)}async function qm(e,t){var c;const n=pe(t);if(!n)return;const r=await e.channel.api.getLogEntryDataWithDetails(t);if(!r)return;const i=r.logEntry,a=rt(r.details);let s=e.watchData.entries.get(n);s||(s=A5(e,i),e.watchData.entries.set(n,s),ur(e),Nm(e,s.header,t),Vn(e,t),Gc(e)),s.entryId=i.id,s.element.data={...i,ts:0,index:0};const o=i.args?i.args.length>1?i.args:[{context:void 0}]:[],l=Im(e,a,o);s.details.replaceChildren(l),Em(e,s.element),x5(e,s.header,((c=i.args)==null?void 0:c.map(u=>u.context||"").filter(u=>u))||[])}function L5(e){return e.logs.classList.contains("hiddenImportant")?e.watchesContainer.offsetHeight:e.logsContainer.offsetHeight}function T5(e){return e.logs.classList.contains("hiddenImportant")?e.watchesContainer.offsetWidth:e.logsContainer.offsetWidth}function ur(e){e.watches.querySelectorAll(".layout-resizer").forEach(d=>d.remove());const t=Array.from(e.watchData.entries.values()),n=100/t.length;let r=0;const i=e.orientation==="vertical",a=i?(d,h)=>{d.top=h}:(d,h)=>{d.left=h},s=i?(d,h)=>{d.left=h}:(d,h)=>{d.top=h},o=i?(d,h)=>{d.bottom=h}:(d,h)=>{d.right=h},l=i?(d,h)=>{d.right=h}:(d,h)=>{d.bottom=h},c=i?(d,h)=>{d.width=h}:(d,h)=>{d.height=h},u=i?(d,h)=>{d.height=h}:(d,h)=>{d.width=h};if(e.watchData.layout==="manual")for(let d=0;d<t.length;d++){const h=t[d];if(h.layoutApplied){r+=n/2;continue}a(h.element.style,r+"%"),o(h.element.style,"unset"),s(h.element.style,Math.random()*10+d/2*(25*Math.random())/t.length+"%"),l(h.element.style,"unset"),c(h.element.style,85-d*25*Math.random()/t.length+"%"),u(h.element.style,n-5+"%"),r+=n,km(h.element,h.header),Mm(h.element,e.watches.offsetTop),h.layoutApplied=!0}else if(e.watchData.layout==="auto"){const d=i?100*e.watchMinHeight/L5(e):100*e.watchMinWidth/T5(e),h=[],f=[],g=[];for(let y=0;y<t.length;y++){const w=t[y];let p;w.defaultSizeChangeFactor!==1?p=n*w.defaultSizeChangeFactor:p=n,h.push({percent:p}),p<d?f.push(h[y]):w.defaultSizeChangeFactor>1&&g.push(h[y])}const v=f.reduce((y,w)=>{const p=d-w.percent;return w.percent=d,y+p},0);if(v>0&&g.length>0){const y=v/g.length;for(let w=0;w<g.length;w++)g[w].percent-=y}for(let y=0;y<t.length;y++){const w=t[y];a(w.element.style,r===0?"1px":r+"%"),r+=h[y].percent,o(w.element.style,y===t.length-1?"0":100-r+"%"),s(w.element.style,"1px"),l(w.element.style,i?"1px":"0px"),c(w.element.style,"unset"),u(w.element.style,"unset"),S5(w.element,w.header),E5(w.element),w.layoutApplied=!0,y>0&&e.watches.appendChild(R5(t[y-1],w,i))}}}function R5(e,t,n){const r=document.createElement("div");r.className="layout-resizer",n?r.style.top=t.element.style.top:r.style.left=t.element.style.left,r.onmousedown=s;let i=0,a;function s(c){a={e:c,offset:n?r.offsetTop+r.offsetHeight/2:r.offsetLeft+r.offsetWidth/2,firstSize:n?e.element.offsetHeight:e.element.offsetWidth,secondSize:n?t.element.offsetHeight:t.element.offsetWidth,parentSize:n?r.parentElement.offsetHeight:r.parentElement.offsetWidth,minSize:n?e.header.offsetHeight:Number(window.getComputedStyle(e.element,null).getPropertyValue("min-width").replace("px",""))+5},document.onmousemove=o,document.onmouseup=u=>{document.onmousemove=document.onmouseup=null,i!==0&&(e.defaultSizeChangeFactor=(a.firstSize+i)/a.firstSize,t.defaultSizeChangeFactor=(a.secondSize-i)/a.secondSize),u.preventDefault()},c.preventDefault()}function o(c){i=n?c.clientY-a.e.clientY:c.clientX-a.e.clientX,i=Math.min(Math.max(i,-a.firstSize+a.minSize),a.secondSize-a.minSize);const u=l(a.offset+i),d=100-u;n?(r.style.top=t.element.style.top=u+"%",e.element.style.bottom=d+"%"):(r.style.left=t.element.style.left=u+"%",e.element.style.right=d+"%"),c.preventDefault()}function l(c){return 100*(c/a.parentSize)}return r}function A5(e,t){let n,r=document.createElement("div");r.innerHTML=C5(),r=r.childNodes[0];const i=r.querySelector(".container");ft++,r.style.zIndex=""+ft;const a=r.querySelector(".header");km(r,a),Mm(r,e.watches.offsetTop);const s=a.querySelector(".actions .codicon-close");return s.onclick=l=>{Bn(e,n),l.preventDefault()},r.onclick=l=>{Le(e,r),l.stopPropagation(),l.preventDefault()},r.onkeydown=l=>{if(!i.isContentEditable){let c=null;if(l.key==="ArrowDown"||l.key==="ArrowUp"||l.key==="ArrowLeft"||l.key==="ArrowRight")e.orientation==="vertical"&&l.key==="ArrowDown"||e.orientation==="horizontal"&&l.key==="ArrowRight"?c=r.nextElementSibling:(e.orientation==="vertical"&&l.key==="ArrowUp"||e.orientation==="horizontal"&&l.key==="ArrowLeft")&&(c=r.previousElementSibling),c&&Le(e,c);else if(l.key==="w"&&(l.ctrlKey||l.metaKey)){const u=r.nextElementSibling||r.previousElementSibling;Bn(e,n),u&&Le(e,u),l.preventDefault(),l.stopPropagation()}else if(l.key==="Enter"){const u=l.target;u&&u.nodeName!=="A"&&(i.contentEditable="true",i.focus({preventScroll:!0}),e.enteredLogEntry=i,l.preventDefault())}}},Rm(e,i),n={element:r,header:a,details:i,location:t,defaultSizeChangeFactor:1,entryId:t.id,layoutApplied:!1,order:e.watchData.entries.size},e.watchesContainer.appendChild(r),n}function P5(e,{file:t,lineMap:n,deletedLines:r}){let i=!1;Object.entries(n).forEach(([a,s])=>{const o=Number(a),l=pe({file:t,line:o});if(!l)return;let c;const u=pe({file:t,line:s});u&&(c=e.watchData.entries.get(u),e.watchData.entries.delete(u)),c&&(e.watchData.entries.set(l,c),i=!0,c.location.line=o,Nm(e,c.header,c.location))}),r.forEach(a=>{const s=pe({file:t,line:a});if(!s)return;const o=e.watchData.entries.get(s);o&&Bn(e,o)}),i&&(e.watchData.entries=new Map([...e.watchData.entries].sort(([,a],[,s])=>a.order-s.order)))}function xp(e,t){const n=e.watchData.layout;if(e.watchData.layout=t,n!==t){e.watchData.entries.forEach(i=>{i.layoutApplied=!1}),ur(e),e.watchesLayout.title=`Switch To ${t==="auto"?"Manual":"Automatic"} Value Layout Mode`;const r=e.watchesLayout.firstChild;r.ariaLabel=e.watchesLayout.title,t==="auto"?r.classList.add("selected-icon-state"):r.classList.remove("selected-icon-state")}}function Me(e){return e.currentView}function Lp(e){e.watchData.entries.forEach(t=>{Bn(e,t)})}function I5(e){const t=e.logItems.lastElementChild;Fm(t)&&(t==null||t.classList.add("checkpoint"),wt(e,t))}function Fm(e){return e?!e.classList.contains("checkpoint"):!1}function wt(e,t){Fm(t)?e.addCheckpoint.classList.remove("disabled-icon-state"):e.addCheckpoint.classList.add("disabled-icon-state")}function Dm(e,t,n){if(Fc(e,t.session),e.selectedTool&&e.selectedTool!==t.session.tool||!e.logEntryList.canAdd(t)||Dc(e,t,n))return;const r=document.createElement("div");r.className="log-item",r.style.height=`${e.logItemHeight}px`,r.addEventListener(sr,()=>e.logEntryList.incrementDuplicateCount(r)),r.addEventListener(lm,()=>{const i=Om(e,t,void 0,r);if(!i)return;if(e.searchResultsById[t.id]&&Me(e)==="logs"){const l=e.searchResultsById[t.id],c=i.querySelector(".log-message");l.summaryCount=_n(c,e.searchRegexHtmlEncoded,`match-${l.id}-s-`),e.searchResults[e.currentMatchIdx].id===t.id&&bn(c);const u=i.querySelector(".log-details .container");u&&(e.logEntryList.isLoaded(l.id)||u.querySelector(".error-log-message"))&&(l.detailCount=_n(u,e.searchRegexHtmlEncoded,`match-${l.id}-d-`))}const a=r===e.focusedLogEntry,s=r.classList.contains("pre-file-change"),o=r.classList.contains(um);r.replaceWith(i),a&&!e.searchTerm&&Le(e,i),s&&i.classList.add("pre-file-change"),o&&bn(i)},{once:!0}),n.appendChild(r),e.logEntryList.addElement(t,r),pt(e),wt(e,e.logItems.lastElementChild)}function Dc(e,t,n){const r=n.lastElementChild;return t.hash&&e.logEntryList.getHash(r)===t.hash?(r.dispatchEvent(l5),!0):!1}function Om(e,t,n,r){if(e.selectedTool&&e.selectedTool!==t.session.tool){Fc(e,t.session);return}if(!e.logEntryList.canAdd(t))return;const i=n===void 0;let a;if(!i&&Dc(e,t,n))return;i&&r&&(a=e.logEntryList.getDuplicateCount(r));const s=document.createDocumentFragment(),o=document.createDocumentFragment();let l;t.args.forEach((h,f)=>{if(f>0){const g=document.createElement("span");g.textContent=", ",s.appendChild(g)}if(h.context){l&&l.length?l+=`, ${h.context}`:l=`Context: ${h.context}`;const g=document.createElement("span");g.textContent=`${h.context}: `;const v=g.textContent.length*(sm*e.fontSize/10),y=Math.ceil(v/50)*50;g.className=`context ${y<1e3?`width-${y}`:"too-large"}`,s.appendChild(g)}s.appendChild(Bp(h.preview,e.channel.api,"preview"))});const c=document.createElement("div");c.className="details-loading-indicator codicon codicon-loading",o.appendChild(c);const u=pn(t.file),d=Tm(n,e,t.session,t.id,t.ts,t.hash,a,t,t.args,t.logPointSource,s,o,u+":"+t.line,t.file+":"+t.line,l,async()=>{e.channel.api.navigate(mn(t.file),t.line)},async h=>{f5(e,h,t)});return d&&(d.addEventListener(sr,()=>{Gn(d.querySelector(".log-item-content"),e.logEntryList.incrementDuplicateCount(d))}),e.lastLogEntryWithPreviewLoaded=d),pt(e),wt(e,e.logItems.lastElementChild),d}function ic(e){Oc(e,!0);const t=e.logItems.lastElementChild;if(!t)e.scrollPositionBottom=!0;else{const n=e.logsContainer.getBoundingClientRect(),r=t.getBoundingClientRect();e.scrollPositionBottom=r.bottom-20<=n.bottom}}function Oc(e,t=!1){const n=e.logEntryList.getIndex(e.lastLogEntryWithPreviewLoaded),r=t&&e.lastLogsContainerScrollTop!==void 0&&e.logsContainer.scrollTop<e.lastLogsContainerScrollTop||n===e.logEntryList.size()-1,i=e.logsContainer.getBoundingClientRect(),a=i.top,s=i.bottom,o=[],l=e.logItems.children,c=h=>{const f=h.getBoundingClientRect(),g=f.height*80;if(f.top<s+g&&f.bottom+g>a)return!0},u=(h,f)=>{const g=l[h];if(!g||g.childElementCount>0)return!0;const v=g.getBoundingClientRect();if(c(g))o.push(g);else if(f&&v.bottom<a||!f&&v.top>s)return!1;return!0},d=n!==void 0?n:r?l.length-1:0;for(let h=d;h>=0&&u(h,!0);h--);for(let h=d;h<l.length&&u(h,!1);h++);for(const h of o)h.dispatchEvent(s5);e.lastLogsContainerScrollTop=e.logsContainer.scrollTop}async function je(e,t){let n="logs",r=!1;e.loadingIndicator.classList.remove("hiddenImportant"),e.noLogItemsPlaceholder.classList.add("hiddenImportant");try{gn(e),e.logItems.classList.add("hiddenImportant"),e.logItems.replaceChildren(),e.focusedLogEntry=void 0,e.logEntryList.clear(),e.tools={},Um(e);const{logViewerEntries:a,autoScroll:s,autoClear:o,tokens:l,theme:c,defaultView:u,highlightStyles:d,selection:h,dateTimeFormat:f,fontSize:g,viewerOpts:v,highlights:y,watches:w,dateTimeDisplayMode:p,simpleDateTimeDisplayMode:m,showSearchHint:_,showLogViewerProHint:C,projectFolder:x,errorInvestigationMode:P}=await e.channel.api.initialize();if(e.projectFolder=x,e.errorInvestigationMode=P,t=t||h,n=u,e.showSearchHint=_,e.showSearchHint&&e.hintFind.classList.remove("hiddenImportant"),e.showLogViewerProHint=C,e.showLogViewerProHint&&e.hintLogViewerPro.classList.remove("hiddenImportant"),c!==document.body.getAttribute("data-vscode-theme-id")){const{tokens:A,highlightStyles:N}=await e.channel.api.stylesChanged(document.body.getAttribute("data-vscode-theme-id"));Jl(e,A,N)}else Jl(e,l,d);if(v.renderHighlights)for(const A of y)e.logEntryList.toggleHighlight(A);Nn(e),mm(e,s),r=s,vm(e,o),ym(e,v.networkLoggingPaused),_m(e,p,m),bm(e,p,f),wm(e,g),Cm(e,v);const R=rt(a);let T;const E=document.createDocumentFragment();if(R.forEach(A=>{A.type=="log"?Dm(e,A.log,E):A.type==="error"?Pm(e,A.error,E):A.type==="fileChange"&&A.fileChange.mtime&&(T=A.fileChange)}),e.logItems.appendChild(E),T&&Am(e,T),v.renderWatchView){e.watchesView.classList.remove("hiddenImportant");for(const A of w)qm(e,A)}else e.watchesView.classList.add("hiddenImportant")}finally{pt(e),wt(e,e.logItems.lastElementChild),Gc(e),n==="logs"?(e.logView.click(),Gm(e,t,r)):e.watchesView.click(),e.currentView=n}}function Gm(e,t,n=e.autoclearValue){let r;e.logItems.classList.remove("hiddenImportant"),e.loadingIndicator.classList.add("hiddenImportant"),t!==void 0&&(r=e.logEntryList.getElementById(t.id),t.diagram&&(e.logs.classList.add("invisibleImportant"),e.header.classList.add("invisibleImportant"))),!(t!=null&&t.diagram)&&!e.diagramComponent&&(e.logs.classList.remove("invisibleImportant"),e.header.classList.remove("invisibleImportant")),r===void 0&&(n?(r=e.logItems.lastElementChild,e.logsContainer.scrollTop=e.logsContainer.scrollHeight):r=e.logItems.firstElementChild),r&&(r.tabIndex=0),r&&Le(e,r),r&&t&&Bm(e,r,t),ic(e)}function Bm(e,t,n){if(!n.search&&n.offset){const r=e.logEntryList.getElementByIdAndOffset(n.id,n.offset);r&&(r.tabIndex=0,Le(e,r)),delete n.offset}n.expand&&bn(t),n.search&&(e.filterFind.classList.remove("hiddenImportant"),e.filterFind.title=`Remove Search Filter: ${n.search.context}`,e.search.value=n.search.term,oc(e),fn(e,{searchResults:n.search.results,currentMatchIdx:Math.max(n.search.results.findIndex(r=>r.id===n.id),0)})),n.diagram&&e.focusedLogEntry?tc(e,e.focusedLogEntry):e.diagramComponent||(e.logItems.classList.remove("invisibleImportant"),e.header.classList.remove("invisibleImportant")),delete n.diagram}function k5(e){const t=document.createElement("div");t.classList.add("log-item"),t.style.visibility="hiddenImportant",t.textContent="&nbsp;",e.logItems.appendChild(t);const n=e.logItems.classList.contains("hiddenImportant");n&&e.logItems.classList.remove("hiddenImportant"),e.logItemHeight=t.getBoundingClientRect().height,e.logItems.removeChild(t),n&&e.logItems.classList.add("hiddenImportant")}function pt(e){e.logItems.childElementCount===0?e.noLogItemsPlaceholder.classList.remove("hiddenImportant"):e.noLogItemsPlaceholder.classList.add("hiddenImportant")}function Gc(e){e.watchData.entries.size===0?e.noWatchItemsPlaceholder.classList.remove("hiddenImportant"):e.noWatchItemsPlaceholder.classList.add("hiddenImportant")}function zl(e){var n;const t=e.orientation;Me(e)==="logs"&&(e.logsContainer.style.height=e.logs.clientHeight+"px",e.logsContainer.style.width=e.logs.clientWidth+"px"),e.orientation=M5(e.mainContainer.clientWidth,e.mainContainer.clientHeight),t!==e.orientation&&(e.mainContainer.classList.remove(t),e.mainContainer.classList.add(e.orientation),ur(e)),(n=e.diagramComponent)==null||n.resize()}const Tp=lc(e=>{const t=Math.floor((e.mainContainer.clientWidth-50)/(Math.ceil(sm)*e.fontSize/10));t&&e.channel.api.updatePreferredFormattingOptions({maxLineLength:Math.max(t,30)})});function M5(e,t){return e>1.8*t?"horizontal":"vertical"}let nt;function N5(e){if(nt&&clearTimeout(nt),e.focusedLogEntry){const t=e.focusedLogEntry;nt=setTimeout(()=>{nt&&clearTimeout(nt),t&&t===e.focusedLogEntry&&(e.focusedLogEntry.tabIndex=0,e.focusedLogEntry.querySelectorAll("a:not(.not-tabable)").forEach(n=>n.tabIndex=0),e.focusedLogEntry.focus({preventScroll:!0}),e.findWidget.classList.contains("visible")&&e.search.focus())},120)}}function q5(e){nt&&clearTimeout(nt),e.focusedLogEntry&&document.activeElement===e.focusedLogEntry&&(e.focusedLogEntry.tabIndex=-1,e.focusedLogEntry.querySelectorAll("a").forEach(t=>t.tabIndex=-1),e.focusedLogEntry.blur()),Ie(e),wn(e)}function gn(e){gm(e),e.searchTerm="",e.filterFind.classList.add("hiddenImportant"),e.findWidget.classList.remove("visible"),e.findWidget.classList.remove(Xl),e.focusedLogEntry&&e.focusedLogEntry.focus(),setTimeout(()=>{e.findWidget.classList.contains(Xl)||e.findWidget.classList.add("hiddenImportant")},500)}const F5=lc(e=>{const t=Math.max(e.logItems.childElementCount+e.logEntryList.getTotalDuplicateCount()-e.maxElementCount,0);if(t===0)return;const n=e.logEntryList.removeFirstElementsAndGroups(t);n!==0&&(e.logItems.replaceChildren(...Array.from(e.logItems.children).slice(n)),Oc(e))},250);function Rp(e,t,n,r){e.maxElementCount=t,F5(e),r&&(!n&&(e.logsContainer.scrollHeight<=e.logsContainer.clientHeight||!e.autoscrollValue||e.autoclearValue&&!e.scrollPositionBottom||e.searchTerm)&&Oc(e),e.autoscrollValue&&e.searchTerm===""&&e.scrollPositionBottom&&(e.logsContainer.scrollTop=e.logsContainer.scrollHeight))}function ac(e,t){const n=t.getBoundingClientRect(),r=Me(e)==="logs",i=r?e.logsContainer:t.closest(".container"),a=i.getBoundingClientRect();if(!(n.top>=a.top&&n.bottom<=a.bottom-10&&n.left>=a.left&&n.right<=a.right-10)){if(n.top<a.top||n.bottom>a.bottom-10){let s=n.top-a.top+i.scrollTop-n.height*2;s<a.height/2&&(s=0),i.scrollTo({top:s,behavior:"auto"})}if(n.left<a.left||n.right>a.right-10){let s=t.parentElement;for(;s&&!s.classList.contains("log-details");)s=s.parentElement;if(r||(s=i),s){const o=s.getBoundingClientRect();let l=n.left-o.left+s.scrollLeft-10;l+n.width+10<o.width&&(l=0),s.scrollTo({left:l,behavior:"auto"})}}}}function jl(e,t){t.enteredLogEntry&&lr||(e.stopPropagation(),e.preventDefault())}function D5(e){return e<=25}function Ap(e){e.onPreAddLogOrErrorEntry&&(e.onPreAddLogOrErrorEntry(),delete e.onPreAddLogOrErrorEntry)}function oc(e){return e.findWidget.classList.contains("hiddenImportant")?(e.findWidget.classList.remove("hiddenImportant"),e.findWidget.classList.add(Xl),setTimeout(()=>{e.findWidget.classList.add("visible"),e.search.focus()},0),!0):!1}function Bc(e){e.classList.remove(it),e.className=e.className.replace(Nc,"")}function Vm(e){return`${it}-${e}`}function Pp(e,t){if(e.classList.contains("pre-file-change"))return Bc(e),!1;const n=e.classList.toggle(it);if(e.classList.contains(it)){e.classList.add(Vm(t));const r=e.querySelector(".log-item-content");if(!r)return!1;let i=r.querySelector(".log-highlighter");i||(i=document.createElement("span"),i.className="log-highlighter",r.insertBefore(i,r.querySelector(".log-group-count")||r.querySelector(".log-message")))}else e.className=e.className.replace(Nc,"");return n}function Nn(e){e.logEntryList.hasHighlights()?e.removeHighlights.classList.remove("hiddenImportant"):e.removeHighlights.classList.add("hiddenImportant")}function Um(e){const t=Object.keys(e.tools),n=t.length>1;if(e.multiToolUseDetected=e.multiToolUseDetected||n,nc(e),p5(e),e.multiToolUseDetected&&!e.viewerOpts.mergeMultiToolLogs?e.logActionsDropdown.style.display="inline-block":e.selectedTool===void 0&&(e.logActionsDropdown.style.display="none"),Me(e)!=="logs"||!e.viewerOpts.allowToMergeMultiToolLogs||!e.multiToolUseDetected&&!e.viewerOpts.mergeMultiToolLogs)e.multiToolDisplayMode.classList.add("hiddenImportant");else{const r=t.join(t.length>2?", ":" and ");e.multiToolDisplayMode.classList.remove("hiddenImportant");const i=e.multiToolDisplayMode.firstChild;e.viewerOpts.mergeMultiToolLogs?(i.classList.add("selected-icon-state"),e.multiToolDisplayMode.title=`Show logs from ${r} separately (dedicated list per tool)`):(i.classList.remove("selected-icon-state"),e.multiToolDisplayMode.title=`Show logs from ${r} in one list`)}}function O5(e){return"detail"in e}function G5(){const e=Vc.useRef(null);return Vc.useLayoutEffect(()=>{e.current={showSearchHint:!1,showLogViewerProHint:!1,simpleDateTimeDisplayMode:!1,currentView:"logs",root:document.querySelector("#root"),mainContainer:document.querySelector(".main-container"),breadcrumbs:document.querySelector(".breadcrumbs"),diagramActions:document.querySelector(".diagram-actions"),diagram:document.querySelector(".diagram"),diagramComponent:void 0,header:document.querySelector(".header-content"),views:document.querySelector(".views"),logView:document.querySelector(".log-view"),watchesView:document.querySelector(".watches-view"),logs:document.querySelector(".logs"),logsContainer:document.querySelector(".logs-container"),logItems:document.querySelector(".log-items"),loadingIndicator:document.querySelector(".loading-indicator"),noLogItemsPlaceholder:document.querySelector(".no-log-items-placeholder"),noWatchItemsPlaceholder:document.querySelector(".no-watch-items-placeholder"),watches:document.querySelector(".watches"),watchesContainer:document.querySelector(".watches-container"),search:document.querySelector(".search-input"),searchLoading:document.querySelector(".search-loading"),regularExpression:document.querySelector(".use-regular-expression"),matchWholeWorld:document.querySelector(".match-whole-word"),matchCase:document.querySelector(".match-case"),hintLogViewerPro:document.querySelector(".viewer-pro-hint"),autoscroll:document.querySelector(".auto-scroll"),autoclear:document.querySelector(".auto-clear"),networkLoggingPaused:document.querySelector(".network-logging"),showDateTime:document.querySelector(".show-date"),filter:document.querySelector(".filter"),watchesLayout:document.querySelector(".toggle-watches-layout-mode"),multiToolDisplayMode:document.querySelector(".toggle-multitool-display-mode"),multiToolUseDetected:!1,removeHighlights:document.querySelector(".remove-highlights"),addCheckpoint:document.querySelector(".add-checkpoint"),autoscrollValue:!0,autoclearValue:!0,networkLoggingPausedValue:!1,showDateTimeValue:!0,fontSize:10,watchMinHeight:23,watchMinWidth:100,logSelector:document.querySelector(".log-selector"),logSelectorOverlay:document.querySelector(".log-selector-overlay"),logActionsDropdown:document.querySelector(".logs-action-dropdown"),logsName:document.querySelector(".logs-action-text"),tools:{},selectedTool:void 0,findWidget:document.querySelector(".find-widget"),matchesCount:document.querySelector(".matches-count"),previousMatch:document.querySelector(".find-previous"),nextMatch:document.querySelector(".find-next"),closeFind:document.querySelector(".find-close"),hintFind:document.querySelector(".find-hint"),filterFind:document.querySelector(".find-filter"),searchTerm:"",searchContext:0,searchRegexHtmlEncoded:/''/g,searchResults:[],searchResultsById:{},scrollPositionBottom:!0,currentMatchIdx:0,currentMatchType:"summary",currentMatchCount:0,totalMatches:0,onPreAddLogOrErrorEntry:void 0,errorInvestigationMode:void 0,channel:new Ym(window,Km,{addLogEntries:async l=>{Ap(e.current);const c=rt(l),u=D5(c.entries.length),d=Me(e.current)==="logs";u&&d?c.entries.forEach(h=>Om(e.current,h,e.current.logItems)):c.entries.forEach(h=>Dm(e.current,h,e.current.logItems)),Rp(e.current,c.totalNumberOfLogsAndErrors,u,d)},addErrorEntries:async l=>{Ap(e.current);const c=rt(l);c.entries.forEach(u=>Pm(e.current,u,e.current.logItems)),Rp(e.current,c.totalNumberOfLogsAndErrors,!0,Me(e.current)==="logs")},addFileChange:async l=>{Am(e.current,l)},clear:async l=>{const c=u=>{e.current.logItems.replaceChildren(),e.current.focusedLogEntry=void 0,u?pt(e.current):setTimeout(()=>pt(e.current),400),wt(e.current,e.current.logItems.lastElementChild),e.current.tools={},e.current.logEntryList.clear(),gn(e.current)};l==="immediately"?(e.current.onPreAddLogOrErrorEntry&&(e.current.onPreAddLogOrErrorEntry(),delete e.current.onPreAddLogOrErrorEntry),c(!0),Lp(e.current)):l==="onNewLogOrError"&&(e.current.onPreAddLogOrErrorEntry=c)},autoScrollChanged:async l=>{mm(e.current,l)},autoClearChanged:async l=>{vm(e.current,l)},pauseNetworkLoggingChanged:async l=>{ym(e.current,l)},dateTimeFormatChanged:async({dateTimeFormat:l,dateTimeDisplayMode:c,simpleDateTimeDisplayMode:u})=>{_m(e.current,c,u),bm(e.current,c,l),je(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0)},fontSizeChanged:async l=>{wm(e.current,l)},viewerOptsChanged:async l=>{Cm(e.current,l),je(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0)},select:async l=>{const c=e.current.logEntryList.getElementById(l.id);c!==void 0&&(c.tabIndex=0,Le(e.current,c),ic(e.current),Bm(e.current,c,l))},toggleHighlight:async l=>{const c=e.current.logEntryList.toggleHighlight(l);c&&Le(e.current,c),Nn(e.current),Vn(e.current,l.location)},removeAllHighlights:async()=>{e.current.logEntryList.removeAllHighlights(),Nn(e.current),Vn(e.current)},updateFileHighlights:async l=>{e.current.logEntryList.updateFileHighlights(l),Nn(e.current)},updateWatchValue:async l=>{qm(e.current,l)},updateFileWatches:async l=>{P5(e.current,l)},customizeWatchesLayout:async()=>{xp(e.current,e.current.watchData.layout==="auto"?"manual":"auto")},openTab:async l=>{Me(e.current)!==l&&(l==="logs"?e.current.logView.click():e.current.watchesView.click())},updateFilter:async l=>{e.current.logEntryList.updateFilter(l)&&je(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0),qc(e.current)},addLogViewerCheckpoint:async()=>{I5(e.current)},reloadLogEntries:async()=>{je(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0)}}),logEntryList:new B5,lastLogsContainerScrollTop:void 0,lastLogEntryWithPreviewLoaded:void 0,logItemHeight:0,maxElementCount:1/0,entryDateInserter:()=>{},entryToolInserter:()=>{},viewerOpts:{pageSize:100,renderIndentationGuides:!1,renderNodeExpansionControls:!1,renderBreadcrumbs:!1,renderLogEntryActions:!1,renderHighlights:!1,renderWatchView:!1,allowToMergeMultiToolLogs:!1,mergeMultiToolLogs:!1,networkLoggingAvailable:!1,networkLoggingPaused:!1},watchData:{entries:new Map,layout:"auto"},orientation:"vertical",contextWidget:document.querySelector(".context-actions-widget"),tooltipWidget:document.querySelector(".tooltip-widget"),codePreviewLocation:void 0,projectFolder:void 0},e.current.mainContainer.onkeydown=l=>{var c,u,d;if(l.metaKey||l.ctrlKey)l.key==="f"?oc(e.current)&&(l.stopPropagation(),l.preventDefault()):l.key==="c"&&e.current.focusedLogEntry&&e.current.viewerOpts.renderLogEntryActions&&!((c=window.getSelection())!=null&&c.toString())&&(ec(e.current,e.current.focusedLogEntry),l.stopPropagation(),l.preventDefault());else if(l.key==="d"&&((d=(u=e.current.focusedLogEntry)==null?void 0:u.data.args)!=null&&d.find(h=>h.diagram)))tc(e.current,e.current.focusedLogEntry),l.stopPropagation(),l.preventDefault();else if(l.key==="Escape")(e.current.findWidget.classList.contains("visible")||!e.current.contextWidget.classList.contains("hiddenImportant"))&&(gn(e.current),Ie(e.current),l.stopPropagation(),l.preventDefault());else if(l.key==="End")e.current.enteredLogEntry||Le(e.current,e.current.logItems.lastElementChild),jl(l,e.current);else if(l.key==="Home")e.current.enteredLogEntry||Le(e.current,e.current.logItems.firstElementChild),jl(l,e.current);else if(l.key==="PageDown"||l.key==="PageUp"){const h=e.current.focusedLogEntry;if(h&&!e.current.enteredLogEntry){const f=e.current.logItems,g=h.getBoundingClientRect().height,v=e.current.logsContainer.getBoundingClientRect().height,y=e.current.logEntryList.getIndex(h)||0,w=f.childElementCount;let p=y;l.key==="PageDown"?p+=Math.floor(v/g):p-=Math.floor(v/g),p<0?p=0:p>=w&&(p=w-1);const m=f.children[p];Le(e.current,m)}jl(l,e.current)}},e.current.closeFind.onclick=l=>{gn(e.current)},e.current.search.onkeydown=async l=>{l.key==="Escape"?(gn(e.current),l.preventDefault(),l.stopPropagation()):l.shiftKey&&l.key==="Enter"?e.current.previousMatch.click():l.key==="Enter"&&(e.current.searchTerm!==e.current.search.value?fn(e.current):e.current.nextMatch.click())},e.current.previousMatch.onclick=l=>{e.current.searchTerm!==e.current.search.value&&fn(e.current),e.current.previousMatch.classList.contains("disabled")||pm(e.current),e.current.search.focus()},e.current.nextMatch.onclick=l=>{e.current.searchTerm!==e.current.search.value&&fn(e.current),e.current.nextMatch.classList.contains("disabled")||Zl(e.current),e.current.search.focus()},e.current.contextWidget.onmouseover=l=>{var u;const c=l.target&&l.target;if(c){const d=c.tagName==="li"?c:c.closest("li");(u=d==null?void 0:d.parentElement)==null||u.querySelectorAll("li").forEach(h=>{h.classList.remove("selected")}),d==null||d.classList.add("selected")}},e.current.mainContainer.onclick=l=>{if(l.target&&l.target.tagName&&l.target.tagName.toLowerCase()!=="a"&&!l.target.classList.contains("layout-resizer")){const c=Me(e.current);c==="logs"?e.current.logView.focus():c==="watches"&&e.current.watchesView.focus(),l.stopPropagation(),l.preventDefault()}Ie(e.current)},window.addEventListener("resize",()=>{zl(e.current),Tp(e.current)}),window.addEventListener("focus",()=>N5(e.current)),window.addEventListener("blur",()=>q5(e.current)),window.addEventListener("keydown",l=>{l.shiftKey&&l.key==="Escape"&&Wl(e.current)}),document.addEventListener(Cn,l=>{if(O5(l)){const{link:c,loc:u}=l.detail,d={file:u.file.startsWith("file")||u.file.startsWith("http")?u.file:mn(u.file),line:u.line};c.onmouseover=h=>{d.file&&(e.current.codePreviewLocation=d,Lm(e.current,h,async f=>{if(e.current.codePreviewLocation!==d)return!1;const g=e.current.tooltipWidget,v=await e.current.channel.api.highlight({file:d.file,line:d.line});if(e.current.codePreviewLocation!==d||!v)return!1;g.onmouseover=()=>{e.current.codePreviewLocation=d,delete e.current.tooltipCloseRequested};const y=document.createElement("div");y.classList.add("file-content"),g.replaceChildren(y),y.innerHTML=v.text;const w=document.createElement("div");w.classList.add("file-name"),f.target instanceof HTMLAnchorElement&&(w.style.cursor="pointer",w.onclick=T=>{f.target.click(),On(e.current,0),T.preventDefault(),T.stopPropagation()});let p=Hm(d.file)||"",m=e.current.projectFolder;p=Ip(p),m&&(m=Ip(m)),m&&(p.startsWith(m)||lr&&p.toLowerCase().startsWith(m.toLowerCase()))&&(p=p.slice(m.length),(p.startsWith("/")||p.startsWith("\\"))&&(p=p.slice(1))),w.textContent=`${p}:${d.line}`,g.insertBefore(w,g.firstChild);const _=Array.from(g.querySelectorAll("p"));_[d.line-v.minLine].classList.add("median");const x=v.maxLine.toString().length;for(let T=0;T<_.length;T++){const E=_[T],A=T+v.minLine,N=document.createElement("span");N.classList.add("line-number"),N.textContent=`${A}`.padStart(x," "),E.insertBefore(N,E.firstChild)}const P=/^\s+/u,R=Array.from(g.querySelectorAll("span:first-child"));if(!R.some(T=>!P.test(T.textContent||""))){const T=Math.min(...R.map(E=>{if(!E.textContent)return 0;const A=E.textContent.match(P);return A?A[0].length:0}));R.forEach(E=>E.textContent=(E.textContent||"").slice(T))}return!0}))},c.onmouseout=()=>On(e.current)}}),zl(e.current),Tp(e.current);const t=l=>{l&&(l.onclick=()=>{l.classList.toggle("checked"),e.current.search.focus()},l.onkeydown=c=>{(c.key==="Enter"||c.key===" ")&&l.classList.toggle("checked")})};t(e.current.regularExpression),t(e.current.matchWholeWorld),t(e.current.matchCase);const n=()=>{e.current.views.querySelectorAll("li").forEach(l=>{var u,d;l.classList.remove("checked"),l.tabIndex=-1;const c=(d=(u=l.querySelector("a"))==null?void 0:u.getAttribute("aria-label"))==null?void 0:d.toLowerCase();if(c){const h=document.getElementById(c);h&&h.classList.add("hiddenImportant")}})},r=()=>{const l=Object.keys(e.current.tools);if(l.length>1){if(e.current.viewerOpts.mergeMultiToolLogs)return;e.current.logSelector.replaceChildren(),e.current.focusedLogEntry=void 0,l.sort((h,f)=>h.localeCompare(f)),l.forEach(h=>{let f=e.current.logSelector.appendChild(document.createElement("div"));f.outerHTML=`<div class='log-selector-item'>${h} Logs</div>`,f=e.current.logSelector.lastChild,f.dataset.tool=h,h==e.current.selectedTool&&f.classList.add("active"),f.onclick=()=>{e.current.selectedTool=h,nc(e.current),je(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0),e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none"},f.onmouseover=()=>{e.current.logSelector.querySelectorAll(".log-selector-item").forEach(g=>{g!==f?g.classList.remove("active"):g.classList.add("active")})}});const u=e.current.logView.querySelector("a").getBoundingClientRect();e.current.logSelector.style.left=u.left+"px",e.current.logSelector.style.top=u.bottom-5+"px",e.current.logSelector.style.minWidth=u.width+"px",e.current.logSelector.style.display="block",e.current.logSelector.focus();const d=e.current.logView.getBoundingClientRect();e.current.logSelectorOverlay.style.left=d.left+"px",e.current.logSelectorOverlay.style.top=d.top+"px",e.current.logSelectorOverlay.style.width=d.width+"px",e.current.logSelectorOverlay.style.height=d.height+"px",e.current.logSelectorOverlay.style.display="block"}},i=l=>{var u,d;l.classList.add("checked"),l.tabIndex=0;const c=(d=(u=l.querySelector("a"))==null?void 0:u.getAttribute("aria-label"))==null?void 0:d.toLowerCase();if(c){const h=document.getElementById(c);h&&h.classList.remove("hiddenImportant")}},a=(l,c)=>{var h,f;const u=(f=(h=l.querySelector("a"))==null?void 0:h.getAttribute("aria-label"))==null?void 0:f.toLowerCase();if(e.current.currentView=u,u===c)return;const d=`${u}-only`;e.current.mainContainer.querySelectorAll(".menu-entry").forEach(g=>{g.classList.contains(d)?g.classList.remove("hiddenForCurrentView"):g.className.includes("-only")&&g.classList.add("hiddenForCurrentView")}),zl(e.current),u==="logs"?(Gm(e.current),e.current.channel.api.openedView("logs")):e.current.channel.api.openedView("watches")};e.current.views.querySelectorAll("li").forEach(l=>{l.onblur=()=>{l.classList.remove("focused")},l.onfocus=()=>{l.classList.add("focused")},l.onkeydown=c=>{var h,f;const u=(h=l.parentElement)==null?void 0:h.querySelector(".focused"),d=(f=l.parentElement)==null?void 0:f.querySelector(".checked");if(c.key==="Enter"||c.key===" "){const g=Me(e.current);n(),i(u),u===d&&d===e.current.logView&&r(),a(u,g),c.preventDefault()}else c.key==="ArrowRight"?u!=null&&u.nextElementSibling&&(u.classList.remove("focused"),u.nextElementSibling.classList.add("focused"),c.preventDefault()):c.key==="ArrowLeft"&&u!=null&&u.previousElementSibling&&(u.classList.remove("focused"),u.previousElementSibling.classList.add("focused"),c.preventDefault())},l.onclick=c=>{const u=Me(e.current);l===e.current.logView&&!(c.screenX===0&&c.screenY===0)&&r(),n(),i(l),a(l,u),c.preventDefault(),c.stopPropagation()}}),e.current.logSelector.onkeydown=l=>{if(l.key==="Escape")e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none",l.preventDefault(),l.stopPropagation(),e.current.logView.focus();else if(l.key===" "||l.key==="Enter"){const c=e.current.logSelector.querySelector(".active");c&&c.dataset.tool&&(e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none",l.preventDefault(),e.current.logView.focus(),e.current.selectedTool=c.dataset.tool,nc(e.current),je(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0))}else if(l.key==="ArrowDown"){const c=e.current.logSelector.querySelector(".active");c!=null&&c.nextElementSibling&&(c.classList.remove("active"),c.nextElementSibling.classList.add("active"))}else if(l.key==="ArrowUp"){const c=e.current.logSelector.querySelector(".active");c!=null&&c.previousElementSibling&&(c.classList.remove("active"),c.previousElementSibling.classList.add("active"))}},e.current.logSelector.onblur=l=>{e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none"},e.current.logsContainer.onscroll=()=>ic(e.current),k5(e.current),je(e.current),xp(e.current,"auto");const s=l=>{if(!e.current.viewerOpts.renderBreadcrumbs)return;const c=l.detail,u=e.current.breadcrumbs;if(c.length>1){const d=[];c.forEach((h,f)=>{var y;const g=((y=h.textContent)==null?void 0:y.trimStart().replace(/:[^:]*$/,"").replace(/[\s\{\[\:]+$/g,""))||(f===0?"root":"..."),v=document.createElement("div");if(v.classList.add("breadcrumb"),v.textContent=g,v.onclick=()=>{const w="standout",p="standout-remove";h.classList.add(w),Le(e.current,h.closest(".log-item")),ac(e.current,h.querySelector(".expander")||h.querySelector("span")),setTimeout(()=>{h.classList.add(p),h.classList.remove(w),setTimeout(()=>{h.classList.remove(p)},500)},3e3)},d.push(v),f<c.length-1){const w=document.createElement("div");w.classList.add("codicon","codicon-chevron-right"),d.push(w)}else{const w=document.createElement("div");w.classList.add("actions","codicon","codicon-close"),w.onclick=()=>{wn(e.current)},d.push(w)}}),u.replaceChildren(...d)}else u.replaceChildren();if(u.hasChildNodes()){let d=function(h){if(m5(e.current)){if(h.offsetParent===null){wn(e.current);return}setTimeout(()=>d(h),400)}};Ql(e.current,!0),d(c[0])}else Ql(e.current,!1)};document.addEventListener(Mp,s),new MutationObserver(l=>{l.forEach(c=>{c.type==="attributes"&&c.attributeName==="data-vscode-theme-id"&&(async()=>{const{tokens:u,highlightStyles:d}=await e.current.channel.api.stylesChanged(document.body.getAttribute("data-vscode-theme-id"));Jl(e.current,u,d)})()})}).observe(document.body,{attributes:!0,attributeFilter:["data-vscode-theme-id"]})}),ue(Xm,{children:[$("div",{className:"log-selector-overlay",tabIndex:0}),$("div",{className:"log-selector",tabIndex:0}),ue("div",{className:"find-widget hiddenImportant",children:[$("div",{className:"find-widget-sash"}),$("div",{className:"findInput",children:ue("div",{className:"container",children:[$("input",{className:"search-input",type:"text",placeholder:"Find"}),$("div",{title:"Loading",className:"search-loading codicon codicon-loading hiddenImportant","aria-label":"Loading"})]})}),$("a",{title:"Previous Match (⇧Enter)",className:"button find-previous codicon codicon-arrow-up disabled"}),$("a",{title:"Next Match (Enter)",className:"button find-next codicon codicon-arrow-down disabled"}),$("a",{title:"Remove Search Filter",className:"button find-filter action-label selected-icon-state codicon codicon-filter hiddenImportant",onClick:()=>{e.current.filterFind.classList.add("hiddenImportant"),fn(e.current)}}),$("a",{title:"Close (Escape)",className:"button find-close codicon codicon-close"}),$("a",{title:"Show Quick Search Hint",href:"command:console-ninja.openHint?"+encodeURIComponent(JSON.stringify("Search")),className:"button find-hint codicon codicon-lightbulb hiddenImportant",onClick:()=>{e.current.showSearchHint=!1,e.current.hintFind.classList.add("hiddenImportant")}})]}),$("div",{className:"tooltip-widget hiddenImportant"}),ue("div",{className:"context-actions-widget hiddenImportant",children:[ue("div",{className:"header subtle hiddenImportant",children:[gt," + . to open | Esc to close"]}),ue("ul",{children:[ue("li",{className:"selected",onClick:t=>{e.current.focusedLogEntry&&ec(e.current,e.current.focusedLogEntry),Ie(e.current),t.preventDefault(),t.stopPropagation()},children:[$("span",{className:"codicon codicon-copy"}),ue("a",{href:"#",className:"copy-action not-tabable",tabIndex:-1,title:`Copy Log Entry To Clipboard (${gt} + C)`,children:[$("span",{className:"",children:"Copy to clipboard"})," ",ue("span",{className:"subtle",children:[gt," + C"]})]})]}),ue("li",{className:"",onClick:t=>{e.current.focusedLogEntry&&tc(e.current,e.current.focusedLogEntry),Ie(e.current),t.preventDefault(),t.stopPropagation()},children:[$("span",{className:"codicon codicon-type-hierarchy-sub"}),ue("a",{href:"#",className:"diagram-action not-tabable",tabIndex:-1,title:"Show As Diagram (D)",children:[$("span",{className:"",children:"Show as diagram"})," ",$("span",{className:"subtle",children:"D"})]})]}),ue("li",{onClick:t=>{if(e.current.focusedLogEntry){const n=e.current.focusedLogEntry;e.current.channel.api.toggleLineHighlight({line:n.data.line,file:n.data.file,useOriginalLocation:!0})}Ie(e.current),t.preventDefault(),t.stopPropagation()},children:[$("span",{className:"codicon codicon-star-full"}),$("a",{href:"#",className:"highlight-action not-tabable",tabIndex:-1,title:"Toggle Highlight Entries For This Location",children:"Highlight entries for this file/line"})]}),ue("li",{onClick:t=>{e.current.focusedLogEntry&&An(e.current,e.current.focusedLogEntry,"showLocation"),Ie(e.current),t.preventDefault(),t.stopPropagation()},children:[$("span",{className:"codicon codicon-filter-filled"}),$("a",{href:"#",className:"show-location-action not-tabable",tabIndex:-1,title:"Show Entries For This Location Only",children:"Show entries for this file/line only"})]}),ue("li",{onClick:t=>{e.current.focusedLogEntry&&An(e.current,e.current.focusedLogEntry,"showFile"),Ie(e.current),t.preventDefault(),t.stopPropagation()},children:[$("span",{className:"codicon codicon-filter-filled"}),$("a",{href:"#",className:"show-file-action not-tabable",tabIndex:-1,title:"Show Entries For This File Only",children:"Show entries for this file only"})]}),ue("li",{onClick:t=>{e.current.focusedLogEntry&&An(e.current,e.current.focusedLogEntry,"hideLocation"),Ie(e.current),t.preventDefault(),t.stopPropagation()},children:[$("span",{className:"codicon codicon-filter-filled"}),$("a",{href:"#",className:"hide-location-action not-tabable",tabIndex:-1,title:"Hide Entries For This Location",children:"Hide entries for this file/line"})]}),ue("li",{onClick:t=>{e.current.focusedLogEntry&&An(e.current,e.current.focusedLogEntry,"hideFile"),Ie(e.current),t.preventDefault(),t.stopPropagation()},children:[$("span",{className:"codicon codicon-filter-filled"}),$("a",{href:"#",className:"hide-file-action not-tabable",tabIndex:-1,title:"Hide Entries For This File",children:"Hide entries for this file"})]}),ue("li",{onClick:t=>{Wl(e.current),Ie(e.current),t.preventDefault(),t.stopPropagation()},children:[$("span",{className:"codicon codicon-filter"}),ue("a",{href:"#",className:"reset-filter-action not-tabable",tabIndex:-1,title:"Reset filter",children:["Reset filter ",$("span",{className:"subtle",children:"Shift + Escape"})]})]}),ue("li",{onClick:t=>{e.current&&e.current.focusedLogEntry&&_5(e.current,e.current.focusedLogEntry),Ie(e.current),t.preventDefault(),t.stopPropagation()},children:[$("span",{className:"codicon codicon-copilot"}),$("a",{href:"#",className:"investigate-with-copilot-action not-tabable",tabIndex:-1,title:"Investigate with AI",children:"Investigate with AI"})]})]})]}),ue("div",{className:"main-container vertical",role:"none",children:[ue("div",{className:"header",children:[$("div",{className:"breadcrumbs"}),$("div",{className:"diagram-actions",children:ue("ul",{className:"actions",children:[$("li",{children:$("a",{href:"#",className:"action-label codicon codicon-zoom-in",title:"Zoom In",onClick:t=>{e.current.diagramComponent.zoom(.1),t.preventDefault(),t.stopPropagation()}})}),$("li",{children:$("a",{href:"#",className:"action-label codicon codicon-zoom-out",title:"Zoom Out",onClick:t=>{e.current.diagramComponent.zoom(-.1),t.preventDefault(),t.stopPropagation()}})}),$("li",{children:$("a",{href:"#",className:"action-label codicon codicon-screen-full",title:"Fit View",onClick:t=>{e.current.diagramComponent.fitView(),t.preventDefault(),t.stopPropagation()}})}),$("li",{className:"action-item",children:$("a",{href:"#",className:"action-label codicon codicon-close",title:"Close Diagram",onClick:t=>{Sm(e.current,!1),t.preventDefault(),t.stopPropagation()}})})]})}),ue("div",{className:"header-content active",children:[$("div",{className:"views",children:ue("ul",{className:"actions-container",role:"tablist","aria-label":"Active View Switcher",children:[ue("li",{className:"log-view action-item checked",role:"tab","aria-label":"Logs",tabIndex:0,children:[$("a",{className:"action-label","aria-label":"Logs",children:ue("div",{className:"logs-action",children:[$("div",{className:"logs-action-text",children:"Logs"}),$("div",{className:"codicon codicon-chevron-down logs-action-dropdown",style:{display:"none"}})]})}),$("div",{className:"active-item-indicator"})]}),ue("li",{className:"watches-view action-item hiddenImportant",role:"tab","aria-label":"Watches",tabIndex:0,children:[$("a",{className:"action-label","aria-label":"Watches",children:$("div",{className:"watches-action",children:$("div",{className:"watches-action-text",children:"Values"})})}),$("div",{className:"active-item-indicator"})]})]})}),$("div",{className:"spacer"}),ue("ul",{className:"actions",children:[$("li",{className:"viewer-pro-hint action-item menu-entry logs-only hiddenImportant",role:"presentation",title:"Check out Log Viewer PRO features",children:$("a",{href:"command:console-ninja.openHint?"+encodeURIComponent(JSON.stringify("LogViewer")),onClick:()=>{e.current.showLogViewerProHint=!1,e.current.hintLogViewerPro.classList.add("hiddenImportant")},className:"action-label codicon codicon-lightbulb pro-hint",role:"button","aria-label":"Check out Log Viewer PRO features",tabIndex:-1})}),$("li",{className:"toggle-multitool-display-mode action-item menu-entry logs-only hiddenImportant",role:"presentation",title:"Toggle Multi-Tool Display Mode",children:$("a",{href:"command:console-ninja.toggleMultiToolDisplayMode",className:"action-label codicon codicon-merge",role:"button","aria-label":"Toggle Multi-Tool Display Mode",tabIndex:-1})}),$("li",{className:"toggle-watches-layout-mode action-item menu-entry watches-only hiddenForCurrentView",role:"presentation",title:"Switch To Manual Value Layout Mode",children:$("a",{className:"action-label selected-icon-state codicon codicon-layout",href:"command:console-ninja.customizeWatchesLayout",role:"button","aria-label":"Switch To Manual Value Layout Mode",tabIndex:-1})}),$("li",{className:"remove-highlights action-item menu-entry hiddenImportant",role:"presentation",title:"Remove All Highlights",children:$("a",{href:"command:console-ninja.removeAllHighlights",className:"action-label codicon codicon-star-half selected-icon-state",role:"button","aria-label":"Clear All Highlights",tabIndex:-1})}),$("li",{className:"action-item menu-entry watches-only hiddenForCurrentView",role:"presentation",title:"Close All Values",children:$("a",{onClick:t=>{Lp(e.current),t.preventDefault(),t.stopPropagation()},className:"action-label codicon codicon-close-all",role:"button","aria-label":"Close All Values",tabIndex:-1})}),$("li",{className:"action-item menu-entry logs-only",role:"presentation",title:"Clear Output",children:$("a",{href:"command:console-ninja.clearOutput",className:"action-label codicon codicon-clear-all",role:"button","aria-label":"Clear Output",tabIndex:-1})}),$("li",{className:"add-checkpoint action-item menu-entry logs-only disabled-icon-state",role:"presentation",title:"Add Checkpoint (horizontal separator between current and new log entries)",children:$("a",{href:"command:console-ninja.addLogViewerCheckpoint",className:"action-label codicon codicon-symbol-snippet",role:"button","aria-label":"Add Checkpoint",tabIndex:-1})}),$("li",{className:"filter action-item menu-entry logs-only disabled-icon-state hiddenImportant",role:"presentation",title:"Filter (use log entry context lightbulb menu to set)",children:$("a",{className:"action-label codicon codicon-filter",role:"button","aria-label":"Filter (use log entry context lightbulb menu to set)",tabIndex:-1,onClick:t=>{Wl(e.current),t.preventDefault(),t.stopPropagation()}})}),$("li",{className:"action-item menu-entry",role:"presentation",title:"Search (Ctrl/Cmd + F)",children:$("a",{onClick:t=>{oc(e.current),t.preventDefault(),t.stopPropagation()},className:"action-label codicon codicon-search action-item-search",role:"button","aria-label":"Search",tabIndex:-1})}),$("li",{className:"auto-scroll action-item menu-entry log-only",role:"presentation",title:"Turn Auto Scrolling Off",children:$("a",{href:"command:console-ninja.toggleLogViewerAutoScroll",className:"action-label codicon codicon-unlock",role:"button","aria-label":"Turn Auto Scrolling Off",tabIndex:-1})}),$("li",{className:"network-logging action-item menu-entry logs-only hiddenImportant",role:"presentation",title:"Toggle Network Logging",children:$("a",{href:"command:console-ninja.toggleNetworkRequestLogging",className:"action-label codicon codicon-broadcast",role:"button","aria-label":"Toggle Network Logging",tabIndex:-1})}),$("li",{className:"show-date action-item menu-entry logs-only",role:"presentation",title:"Change Date and Time Display Mode",children:$("a",{href:"command:console-ninja.changeDateTimeDisplayMode",onClick:t=>{const n=e.current;n.channel.api.changeDateTimeDisplayMode(n.simpleDateTimeDisplayMode?n.showDateTimeValue?"None":"Absolute":void 0),t.preventDefault(),t.stopPropagation()},className:"action-label codicon codicon-watch",role:"button","aria-label":"Change Date and Time Display Mode",tabIndex:-1})}),$("li",{className:"auto-clear action-item menu-entry logs-only",role:"presentation",title:"Turn Auto Clearing After Any File Change Off",children:$("a",{href:"command:console-ninja.toggleLogViewerAutoClear",className:"action-label codicon codicon-refresh",role:"button","aria-label":"Turn Auto Clearing After Any File Change Off",tabIndex:-1})}),$("li",{className:"action-item menu-entry",role:"presentation",title:"Open Ninja Settings",children:$("a",{href:`command:workbench.action.openSettings?${encodeURIComponent(JSON.stringify("@ext:wallabyjs.console-ninja"))}`,className:"action-label codicon codicon-settings",role:"button","aria-label":"Open Ninja Settings",tabIndex:-1})})]})]})]}),$("div",{id:"logs",className:"logs",children:ue("div",{className:"logs-container",children:[$("div",{className:"log-items"}),$("div",{className:"loading-indicator codicon codicon-loading hiddenImportant"}),$("div",{className:"no-log-items-placeholder hiddenImportant",children:"no logs available"})]})}),ue("div",{id:"watches",className:"watches hiddenImportant",children:[$("div",{className:"watches-container"}),$("div",{className:"no-watch-items-placeholder",children:"no watched values"})]}),$("div",{id:"diagram",className:"diagram hiddenImportant"})]})]})}class B5{constructor(){ge(this,"_loadedDetails");ge(this,"_elements");ge(this,"_index");ge(this,"_indexShift");ge(this,"_totalDuplicateCount");ge(this,"_elementsByLocation",new Map);ge(this,"_highlights",new Map);ge(this,"_filter",{isActive:!1,showFiles:new Set,hideFiles:new Set,showLocations:new Set,hideLocations:new Set});ge(this,"_onElementAdded",()=>{});ge(this,"_firstElementTs",0);this.clear()}size(){return this._elements.size}loadedDetails(){return this._loadedDetails}removeFirstElementsAndGroups(t){let n=0;if(t>0){for(const r of this._elements.keys()){const i=this._elements.get(r),a=i.data.duplicateCount;if(a){const s=Math.min(a,t);if(this._totalDuplicateCount-=s,t-=s,i.data.duplicateCount-=s,i.data.duplicateCount||delete i.data.duplicateCount,t===0){i.dispatchEvent(c5);break}}if(t--,this._deleteElement(i),n++,t===0)break}this._indexShift+=n,this._reIndexIfRequired()}return n}_reIndexIfRequired(){if(this._indexShift++,this._index>=Number.MAX_SAFE_INTEGER-1e3){this._indexShift=0,this._index=0;for(const t of this._elements.values())t.data.index=this._index++}}_deleteElement(t){const n=t.data.id,r=pe(t.data);if(this._elements.delete(n),delete this._loadedDetails[n],!r)return;const i=this._elementsByLocation.get(r);i&&i.delete(n)}clear(){this._loadedDetails={},this._elements=new Map,this._elementsByLocation=new Map,this._index=0,this._indexShift=0,this._totalDuplicateCount=0,this._onElementAdded=t=>{this._firstElementTs=t.data.ts,this._onElementAdded=()=>{}}}isLoaded(t){return!!this._loadedDetails[t]}setLoaded(t){this._loadedDetails[t]=1}getElementById(t){return this._elements.get(t)}addElement({id:t,ts:n,hash:r,duplicateCount:i,file:a,line:s,args:o},l){const c=l,u=this._elements.get(t);this._elements.set(t,c);const d=u?u.data.index:this._index++;c.data={id:t,ts:n,index:d,hash:r,duplicateCount:i,file:a,line:s,args:o},this._onElementAdded(c);const h=pe(c.data);if(!h)return;const f=this._elementsByLocation.get(h);if(f)f.set(t,c);else{const v=new Map;v.set(t,c),this._elementsByLocation.set(h,v)}const g=this._highlights.get(h);g&&Pp(c,g.key)}getIndex(t){if(!t)return;const n=t;if(n.data)return n.data.index-this._indexShift}getElementWithData(t){return t||void 0}getTimestamp(t){var r;return t?(r=t.data)==null?void 0:r.ts:void 0}getPreviousElementIndex(t){const n=this._elements.get(t);return(n?n.data.index:this._index)-1-this._indexShift}getFirstElementTimestamp(){return this._firstElementTs}getHash(t){var r;return t?(r=t.data)==null?void 0:r.hash:void 0}getId(t){var r;return t?(r=t.data)==null?void 0:r.id:void 0}getDuplicateCount(t){var r;return t?(r=t.data)==null?void 0:r.duplicateCount:void 0}getTotalDuplicateCount(){return this._totalDuplicateCount}incrementDuplicateCount(t){if(!t)return 0;const n=t;return n.data.duplicateCount?n.data.duplicateCount++:n.data.duplicateCount=1,this._totalDuplicateCount++,n.data.duplicateCount}getHighlight(t){const n=pe(t);if(n)return this._highlights.get(n)}toggleHighlight(t){var a;const n=pe(t.location);if(!n||(this._highlights.get(n)?this._highlights.delete(n):this._highlights.set(n,t),this._elementsByLocation.size===0))return;let i;for(const s of((a=this._elementsByLocation.get(n))==null?void 0:a.values())||[])Pp(s,t.key)&&(i=s);return i}removeAllHighlights(){for(const t of this._elementsByLocation.values())for(const n of t.values())Bc(n);this._highlights.clear()}hasHighlights(){return this._highlights.size>0}updateFileHighlights({file:t,lineMap:n,deletedLines:r}){Object.entries(n).forEach(([i,a])=>{const s=Number(i),o=pe({file:t,line:s});if(!o)return;let l;const c=pe({file:t,line:a});c&&(l=this._highlights.get(c),l&&(this._highlights.delete(c),this._highlights.set(o,l)))}),r.forEach(i=>{const a=pe({file:t,line:i});a&&this._highlights.delete(a)})}canAdd(t){return!0}getElementByIdAndOffset(t,n){const r=this.getElementById(t);if(!r)return;const i=pe(r.data);if(!i)return;const a=this._elementsByLocation.get(i);if(!a)return;const s=Array.from(a.values()).sort((l,c)=>l.data.index-c.data.index),o=s.findIndex(l=>l.data.id===t);return s[o+n]}_canAdd(t){if(t===void 0)return!0;if(this._filter.hideFiles.has(t.file)||this._filter.showFiles.size>0&&!this._filter.showFiles.has(t.file))return!1;const n=pe(t);return!(this._filter.hideLocations.has(n)||this._filter.showLocations.size>0&&!this._filter.showLocations.has(n))}addToFilter(t,n){switch(this.canAdd=this._canAdd.bind(this),this._filter.isActive=!0,n){case"showLocation":this._filter.showLocations.add(pe(t));break;case"showFile":this._filter.showFiles.add(t.file);break;case"hideLocation":this._filter.hideLocations.add(pe(t));break;case"hideFile":this._filter.hideFiles.add(t.file);break}}canAddToFilter(t,n){if(this._filter.showLocations.size)return!1;if(n==="showFile"||n==="hideFile"){if(this._filter.hideFiles.has(t.file)||this._filter.showFiles.has(t.file))return!1}else if(n==="showLocation"||n==="hideLocation"){const r=pe(t);if(this._filter.showLocations.has(r)||this._filter.hideLocations.has(r))return!1}return!0}updateFilter({file:t,lineMap:n,deletedLines:r}){let i=!1;return Object.entries(n).forEach(([a,s])=>{const o=Number(a),l=pe({file:t,line:o});if(!l)return;const c=pe({file:t,line:s});c&&(this._filter.showLocations.has(c)&&(this._filter.showLocations.delete(c),this._filter.showLocations.add(l)),this._filter.hideLocations.has(c)&&(this._filter.hideLocations.delete(c),this._filter.hideLocations.add(l)))}),r.forEach(a=>{const s=pe({file:t,line:a});s&&(i=this._filter.showLocations.delete(s)||i,this._filter.hideLocations.delete(s))}),this._filter.showFiles.size===0&&this._filter.hideFiles.size===0&&this._filter.showLocations.size===0&&this._filter.hideLocations.size===0&&this.resetFilter(),i}resetFilter(){this._filter.isActive=!1,this._filter.hideFiles.clear(),this._filter.hideLocations.clear(),this._filter.showFiles.clear(),this._filter.showLocations.clear(),this.canAdd=()=>!0}get filter(){if(this._filter.isActive)return{showFiles:Array.from(this._filter.showFiles),hideFiles:Array.from(this._filter.hideFiles),showLocations:Array.from(this._filter.showLocations),hideLocations:Array.from(this._filter.hideLocations)}}}function Hm(e){const t=new URL(e).pathname;let n=decodeURIComponent(t);return lr&&n.startsWith("/")&&(n=n.slice(1)),n}function Ip(e){return lr?e.replace(/\//gu,"\\"):e.replace(/\\/gu,"/")}ev.render($(G5,{}),document.getElementById("root"));
